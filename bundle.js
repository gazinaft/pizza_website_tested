(()=>{var t,e,r={666:t=>{var e=function(t){"use strict";var e,r=Object.prototype,n=r.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",i=o.asyncIterator||"@@asyncIterator",s=o.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var o=e&&e.prototype instanceof m?e:m,a=Object.create(o.prototype),i=new k(n||[]);return a._invoke=function(t,e,r){var n=h;return function(o,a){if(n===p)throw new Error("Generator is already running");if(n===g){if("throw"===o)throw a;return I()}for(r.method=o,r.arg=a;;){var i=r.delegate;if(i){var s=N(i,r);if(s){if(s===f)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(n===h)throw n=g,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n=p;var c=u(t,e,r);if("normal"===c.type){if(n=r.done?g:d,c.arg===f)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n=g,r.method="throw",r.arg=c.arg)}}}(t,r,i),a}function u(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=l;var h="suspendedStart",d="suspendedYield",p="executing",g="completed",f={};function m(){}function y(){}function v(){}var b={};b[a]=function(){return this};var w=Object.getPrototypeOf,_=w&&w(w(O([])));_&&_!==r&&n.call(_,a)&&(b=_);var E=v.prototype=m.prototype=Object.create(b);function L(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function j(t,e){function r(o,a,i,s){var c=u(t[o],t,a);if("throw"!==c.type){var l=c.arg,h=l.value;return h&&"object"==typeof h&&n.call(h,"__await")?e.resolve(h.__await).then((function(t){r("next",t,i,s)}),(function(t){r("throw",t,i,s)})):e.resolve(h).then((function(t){l.value=t,i(l)}),(function(t){return r("throw",t,i,s)}))}s(c.arg)}var o;this._invoke=function(t,n){function a(){return new e((function(e,o){r(t,n,e,o)}))}return o=o?o.then(a,a):a()}}function N(t,r){var n=t.iterator[r.method];if(n===e){if(r.delegate=null,"throw"===r.method){if(t.iterator.return&&(r.method="return",r.arg=e,N(t,r),"throw"===r.method))return f;r.method="throw",r.arg=new TypeError("The iterator does not provide a 'throw' method")}return f}var o=u(n,t.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,f;var a=o.arg;return a?a.done?(r[t.resultName]=a.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,f):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,f)}function S(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function k(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function O(t){if(t){var r=t[a];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}return{next:I}}function I(){return{value:e,done:!0}}return y.prototype=E.constructor=v,v.constructor=y,y.displayName=c(v,s,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===y||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,v):(t.__proto__=v,c(t,s,"GeneratorFunction")),t.prototype=Object.create(E),t},t.awrap=function(t){return{__await:t}},L(j.prototype),j.prototype[i]=function(){return this},t.AsyncIterator=j,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new j(l(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(t){return t.done?t.value:i.next()}))},L(E),c(E,s,"Generator"),E[a]=function(){return this},E.toString=function(){return"[object Generator]"},t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=O,k.prototype={constructor:k,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(x),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return s.type="throw",s.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],s=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),l=n.call(i,"finallyLoc");if(c&&l){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=t,i.arg=e,a?(this.method="next",this.next=a.finallyLoc,f):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),x(r),f}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:O(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),f}},t}(t.exports);try{regeneratorRuntime=e}catch(t){Function("r","regeneratorRuntime = r")(e)}},277:(t,e,r)=>{var n={"./__tests__/action/page.test.js":[369,369],"./__tests__/catalog.test.js":[716,716],"./__tests__/catalog/page.test.js":[368,368],"./__tests__/mainPage.test.js":[480,480],"./__tests__/order.test.js":[806,806],"./__tests__/orderDone.test.js":[624,624],"./__tests__/product/page.test.js":[329,329],"./action/page.js":[722,722],"./catalog.js":[87,87],"./catalog/page.js":[762,762],"./mainPage.js":[429,429],"./order.js":[880,880],"./orderDone.js":[879,879],"./product/page.js":[30,30]};function o(t){if(!r.o(n,t))return Promise.resolve().then((()=>{var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}));var e=n[t],o=e[0];return r.e(e[1]).then((()=>r(o)))}o.keys=()=>Object.keys(n),o.id=277,t.exports=o}},n={};function o(t){if(n[t])return n[t].exports;var e=n[t]={exports:{}};return r[t](e,e.exports,o),e.exports}o.m=r,o.d=(t,e)=>{for(var r in e)o.o(e,r)&&!o.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},o.f={},o.e=t=>Promise.all(Object.keys(o.f).reduce(((e,r)=>(o.f[r](t,e),e)),[])),o.u=t=>t+".bundle.js",o.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),o.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),t={},e="my-pizza-website-tested:",o.l=(r,n,a)=>{if(t[r])t[r].push(n);else{var i,s;if(void 0!==a)for(var c=document.getElementsByTagName("script"),l=0;l<c.length;l++){var u=c[l];if(u.getAttribute("src")==r||u.getAttribute("data-webpack")==e+a){i=u;break}}i||(s=!0,(i=document.createElement("script")).charset="utf-8",i.timeout=120,o.nc&&i.setAttribute("nonce",o.nc),i.setAttribute("data-webpack",e+a),i.src=r),t[r]=[n];var h=(e,n)=>{i.onerror=i.onload=null,clearTimeout(d);var o=t[r];if(delete t[r],i.parentNode&&i.parentNode.removeChild(i),o&&o.forEach((t=>t(n))),e)return e(n)},d=setTimeout(h.bind(null,void 0,{type:"timeout",target:i}),12e4);i.onerror=h.bind(null,i.onerror),i.onload=h.bind(null,i.onload),s&&document.head.appendChild(i)}},o.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},(()=>{var t;o.g.importScripts&&(t=o.g.location+"");var e=o.g.document;if(!t&&e&&(e.currentScript&&(t=e.currentScript.src),!t)){var r=e.getElementsByTagName("script");r.length&&(t=r[r.length-1].src)}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),o.p=t})(),(()=>{var t={179:0};o.f.j=(e,r)=>{var n=o.o(t,e)?t[e]:void 0;if(0!==n)if(n)r.push(n[2]);else{var a=new Promise(((r,o)=>{n=t[e]=[r,o]}));r.push(n[2]=a);var i=o.p+o.u(e),s=new Error;o.l(i,(r=>{if(o.o(t,e)&&(0!==(n=t[e])&&(t[e]=void 0),n)){var a=r&&("load"===r.type?"missing":r.type),i=r&&r.target&&r.target.src;s.message="Loading chunk "+e+" failed.\n("+a+": "+i+")",s.name="ChunkLoadError",s.type=a,s.request=i,n[1](s)}}),"chunk-"+e)}};var e=(e,r)=>{for(var n,a,[i,s,c]=r,l=0,u=[];l<i.length;l++)a=i[l],o.o(t,a)&&t[a]&&u.push(t[a][0]),t[a]=0;for(n in s)o.o(s,n)&&(o.m[n]=s[n]);for(c&&c(o),e&&e(r);u.length;)u.shift()()},r=self.webpackChunkmy_pizza_website_tested=self.webpackChunkmy_pizza_website_tested||[];r.forEach(e.bind(null,0)),r.push=e.bind(null,r.push.bind(r))})(),(()=>{"use strict";o(666),document.addEventListener("click",(r=>{switch(r.target.className.split(" ")[0]){case"closebt":case"closebtn":document.getElementById("myNav").style.width="0%";break;case"openbtn":document.getElementById("myNav").style.width="100%";break;case"cartbtn":a(r.target.id);break;case"removebtn":i(r.target.id);break;case"hashbtn":o=r.target.id,t.changeURL(o),l();break;case"showbtn":(async()=>{const t=document.getElementById("dropdown");if(t.classList.contains("show"))t.classList.remove("show");else{t.classList.add("show");const r=await e.getData("db");n.visualize(r,t)}})();break;case"submitformbtn":s()}var o}));const t=new class{getHash(){return window.location.hash.split("#")[1]}changeURL(t){history.pushState({},null,`#${t}`)}replace(t){history.replaceState({},null,`#${t}`)}goBack(){history.back()}getShit(t){return(e="")=>({catalog:{viewName:e?"catalog/page":"catalog",endpointName:"db"},order:{viewName:"order",endpointName:"db"},action:{viewName:e?"action/page":"mainPage",endpointName:"db"},product:{viewName:e?"product/page":"mainPage",endpointName:"db"}}[t]||{viewName:"mainPage",endpointName:"db"})}getState(){if(!this.getHash())return{viewName:"mainPage",endpointName:"db"};if(this.getHash().includes("/")){const t=this.getHash().split("/");return this.getShit(t[0])(t[1])}return this.getShit(this.getHash())()}},e=new class{getData(t){return fetch(`https://my-json-server.typicode.com/gazinaft/pizza_db/${t}`).then((t=>t.json())).catch((t=>console.log(t)))}post(t,e){return fetch(`https://my-json-server.typicode.com/gazinaft/pizza_db/${e}`,{method:"POST",body:JSON.stringify(t)}).then((t=>t.json())).catch((t=>console.log(t)))}},r=new class{render(t){document.getElementById("main").innerHTML=t}loader(){document.getElementById("main").innerHTML='\n    <div class="text-center">\n      <div class="spinner-border text-primary" role="status" style="width: 5rem; height: 5rem;">\n        <span class="sr-only">Loading...</span>\n      </div>\n    </div>\n    '}},n=new class{constructor(){void 0===localStorage.getItem("cart")&&localStorage.setItem("cart","{}")}add(t){const e=JSON.parse(localStorage.getItem("cart"));void 0===e[t]?e[t]=1:++e[t],localStorage.setItem("cart",JSON.stringify(e))}getItems(){return JSON.parse(localStorage.getItem("cart"))}delete(t){const e=JSON.parse(localStorage.getItem("cart"));e[t]&&(--e[t],0===e[t]&&delete e[t],localStorage.setItem("cart",JSON.stringify(e)))}isEmpty(){const t=JSON.parse(localStorage.getItem("cart"));return 0===Object.keys(t).length}clear(){localStorage.setItem("cart","{}")}getPrice(t){const e=this.getItems();let r=0;for(const n in e)r+=t.find((t=>t.id===n)).price*e[n];return r}visualize(t,e){const r=this.getItems(),n=t.products.filter((t=>Object.keys(r).includes(t.id)));e.innerHTML=`<div class="list-group">\n${n.map((t=>`<a class="list-group-item list-group-item-action flex-column align-items-start">\n        <div class="d-flex w-100 justify-content-between">\n          <h5 class="mb-1">${t.productName}</h5>\n        </div>\n        <p class="mb-1">${r[t.id]} for ${t.price} each</p>\n        <hr>\n        <button class="cartbtn btn btn-outline-primary" id="${t.id}" style="float: left">Add</button>\n        <button class="removebtn btn btn-outline-primary" id="${t.id}">Remove</button>   \n      </a>`)).join("\n")}\n        <h3>Total: ${this.getPrice(t.products)}</h3>\n    </div>`}},a=t=>{n.add(t)},i=t=>{n.delete(t)},s=async()=>{const a=document.getElementById("email"),i=document.getElementById("phone"),s=document.getElementById("name"),c=document.getElementById("address"),u=document.getElementById("time"),h=document.getElementById("cash");r.loader();let d=await e.getData("db");console.log(d),console.log(n.getItems());const p={email:a.value,phone:i.value,name:s.value,address:c.value,time:u.value,payment:h.checked?"cash":"card",order:n.getItems(),price:n.getPrice(d.products)};n.clear();const g=(await e.post(p,"orders")).id,f=(await o.e(879).then(o.bind(o,879))).default;window.removeEventListener("hashchange",l),t.changeURL(`order${g}`),r.render(f(p,d.products)),window.addEventListener("hashchange",l)};let c;const l=()=>{const{viewName:n,endpointName:a}=t.getState();r.loader(),o(277)(`./${n}.js`).then((t=>(c=t.default,e.getData(a)))).catch((t=>{console.log(t),async function(){const t=await o.e(429).then(o.bind(o,429)).catch((t=>console.log(t))),n=await e.getData("db").catch((t=>console.log(t)));r.render(t(n))}()})).then((e=>{r.render(c(e,t.getHash()))})).catch((t=>{console.log(t)}))};l(),window.addEventListener("hashchange",l),window.addEventListener("hashchange",(()=>{n.isEmpty()&&"order"===t.getHash()&&t.goBack()}))})()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9teS1waXp6YS13ZWJzaXRlLXRlc3RlZC93ZWJwYWNrL3J1bnRpbWUvbG9hZCBzY3JpcHQiLCJ3ZWJwYWNrOi8vbXktcGl6emEtd2Vic2l0ZS10ZXN0ZWQvLi9ub2RlX21vZHVsZXMvcmVnZW5lcmF0b3ItcnVudGltZS9ydW50aW1lLmpzIiwid2VicGFjazovL215LXBpenphLXdlYnNpdGUtdGVzdGVkLy4vc3JjL3ZpZXdzfGxhenl8L14vLiovLmpzJC98Z3JvdXBPcHRpb25zOiB7fXxuYW1lc3BhY2Ugb2JqZWN0Iiwid2VicGFjazovL215LXBpenphLXdlYnNpdGUtdGVzdGVkL3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovL215LXBpenphLXdlYnNpdGUtdGVzdGVkL3dlYnBhY2svcnVudGltZS9kZWZpbmUgcHJvcGVydHkgZ2V0dGVycyIsIndlYnBhY2s6Ly9teS1waXp6YS13ZWJzaXRlLXRlc3RlZC93ZWJwYWNrL3J1bnRpbWUvZW5zdXJlIGNodW5rIiwid2VicGFjazovL215LXBpenphLXdlYnNpdGUtdGVzdGVkL3dlYnBhY2svcnVudGltZS9nZXQgamF2YXNjcmlwdCBjaHVuayBmaWxlbmFtZSIsIndlYnBhY2s6Ly9teS1waXp6YS13ZWJzaXRlLXRlc3RlZC93ZWJwYWNrL3J1bnRpbWUvZ2xvYmFsIiwid2VicGFjazovL215LXBpenphLXdlYnNpdGUtdGVzdGVkL3dlYnBhY2svcnVudGltZS9oYXNPd25Qcm9wZXJ0eSBzaG9ydGhhbmQiLCJ3ZWJwYWNrOi8vbXktcGl6emEtd2Vic2l0ZS10ZXN0ZWQvd2VicGFjay9ydW50aW1lL21ha2UgbmFtZXNwYWNlIG9iamVjdCIsIndlYnBhY2s6Ly9teS1waXp6YS13ZWJzaXRlLXRlc3RlZC93ZWJwYWNrL3J1bnRpbWUvcHVibGljUGF0aCIsIndlYnBhY2s6Ly9teS1waXp6YS13ZWJzaXRlLXRlc3RlZC93ZWJwYWNrL3J1bnRpbWUvanNvbnAgY2h1bmsgbG9hZGluZyIsIndlYnBhY2s6Ly9teS1waXp6YS13ZWJzaXRlLXRlc3RlZC8uL3NyYy9zY3JpcHQuanMiLCJ3ZWJwYWNrOi8vbXktcGl6emEtd2Vic2l0ZS10ZXN0ZWQvLi9zcmMvcm91dGVyLmpzIiwid2VicGFjazovL215LXBpenphLXdlYnNpdGUtdGVzdGVkLy4vc3JjL2NsaWVudC5qcyIsIndlYnBhY2s6Ly9teS1waXp6YS13ZWJzaXRlLXRlc3RlZC8uL3NyYy9lbmdpbmUuanMiLCJ3ZWJwYWNrOi8vbXktcGl6emEtd2Vic2l0ZS10ZXN0ZWQvLi9zcmMvY2FydExvZ2ljLmpzIl0sIm5hbWVzIjpbImluUHJvZ3Jlc3MiLCJkYXRhV2VicGFja1ByZWZpeCIsInJ1bnRpbWUiLCJleHBvcnRzIiwidW5kZWZpbmVkIiwiT3AiLCJPYmplY3QiLCJwcm90b3R5cGUiLCJoYXNPd24iLCJoYXNPd25Qcm9wZXJ0eSIsIiRTeW1ib2wiLCJTeW1ib2wiLCJpdGVyYXRvclN5bWJvbCIsIml0ZXJhdG9yIiwiYXN5bmNJdGVyYXRvclN5bWJvbCIsImFzeW5jSXRlcmF0b3IiLCJ0b1N0cmluZ1RhZ1N5bWJvbCIsInRvU3RyaW5nVGFnIiwiZGVmaW5lIiwib2JqIiwia2V5IiwidmFsdWUiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJjb25maWd1cmFibGUiLCJ3cml0YWJsZSIsImVyciIsIndyYXAiLCJpbm5lckZuIiwib3V0ZXJGbiIsInNlbGYiLCJ0cnlMb2NzTGlzdCIsInByb3RvR2VuZXJhdG9yIiwiR2VuZXJhdG9yIiwiZ2VuZXJhdG9yIiwiY3JlYXRlIiwiY29udGV4dCIsIkNvbnRleHQiLCJfaW52b2tlIiwic3RhdGUiLCJHZW5TdGF0ZVN1c3BlbmRlZFN0YXJ0IiwibWV0aG9kIiwiYXJnIiwiR2VuU3RhdGVFeGVjdXRpbmciLCJFcnJvciIsIkdlblN0YXRlQ29tcGxldGVkIiwiZG9uZVJlc3VsdCIsImRlbGVnYXRlIiwiZGVsZWdhdGVSZXN1bHQiLCJtYXliZUludm9rZURlbGVnYXRlIiwiQ29udGludWVTZW50aW5lbCIsInNlbnQiLCJfc2VudCIsImRpc3BhdGNoRXhjZXB0aW9uIiwiYWJydXB0IiwicmVjb3JkIiwidHJ5Q2F0Y2giLCJ0eXBlIiwiZG9uZSIsIkdlblN0YXRlU3VzcGVuZGVkWWllbGQiLCJtYWtlSW52b2tlTWV0aG9kIiwiZm4iLCJjYWxsIiwiR2VuZXJhdG9yRnVuY3Rpb24iLCJHZW5lcmF0b3JGdW5jdGlvblByb3RvdHlwZSIsIkl0ZXJhdG9yUHJvdG90eXBlIiwidGhpcyIsImdldFByb3RvIiwiZ2V0UHJvdG90eXBlT2YiLCJOYXRpdmVJdGVyYXRvclByb3RvdHlwZSIsInZhbHVlcyIsIkdwIiwiZGVmaW5lSXRlcmF0b3JNZXRob2RzIiwiZm9yRWFjaCIsIkFzeW5jSXRlcmF0b3IiLCJQcm9taXNlSW1wbCIsImludm9rZSIsInJlc29sdmUiLCJyZWplY3QiLCJyZXN1bHQiLCJfX2F3YWl0IiwidGhlbiIsInVud3JhcHBlZCIsImVycm9yIiwicHJldmlvdXNQcm9taXNlIiwiY2FsbEludm9rZVdpdGhNZXRob2RBbmRBcmciLCJUeXBlRXJyb3IiLCJpbmZvIiwicmVzdWx0TmFtZSIsIm5leHQiLCJuZXh0TG9jIiwicHVzaFRyeUVudHJ5IiwibG9jcyIsImVudHJ5IiwidHJ5TG9jIiwiY2F0Y2hMb2MiLCJmaW5hbGx5TG9jIiwiYWZ0ZXJMb2MiLCJ0cnlFbnRyaWVzIiwicHVzaCIsInJlc2V0VHJ5RW50cnkiLCJjb21wbGV0aW9uIiwicmVzZXQiLCJpdGVyYWJsZSIsIml0ZXJhdG9yTWV0aG9kIiwiaXNOYU4iLCJsZW5ndGgiLCJpIiwiY29uc3RydWN0b3IiLCJkaXNwbGF5TmFtZSIsImlzR2VuZXJhdG9yRnVuY3Rpb24iLCJnZW5GdW4iLCJjdG9yIiwibmFtZSIsIm1hcmsiLCJzZXRQcm90b3R5cGVPZiIsIl9fcHJvdG9fXyIsImF3cmFwIiwiYXN5bmMiLCJQcm9taXNlIiwiaXRlciIsInRvU3RyaW5nIiwia2V5cyIsIm9iamVjdCIsInJldmVyc2UiLCJwb3AiLCJza2lwVGVtcFJlc2V0IiwicHJldiIsImNoYXJBdCIsInNsaWNlIiwic3RvcCIsInJvb3RSZWNvcmQiLCJydmFsIiwiZXhjZXB0aW9uIiwiaGFuZGxlIiwibG9jIiwiY2F1Z2h0IiwiaGFzQ2F0Y2giLCJoYXNGaW5hbGx5IiwiZmluYWxseUVudHJ5IiwiY29tcGxldGUiLCJmaW5pc2giLCJ0aHJvd24iLCJkZWxlZ2F0ZVlpZWxkIiwibW9kdWxlIiwicmVnZW5lcmF0b3JSdW50aW1lIiwiYWNjaWRlbnRhbFN0cmljdE1vZGUiLCJGdW5jdGlvbiIsIm1hcCIsIndlYnBhY2tBc3luY0NvbnRleHQiLCJyZXEiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibyIsImUiLCJjb2RlIiwiaWRzIiwiaWQiLCJfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX18iLCJtb2R1bGVJZCIsIl9fd2VicGFja19tb2R1bGVzX18iLCJtIiwiZCIsImRlZmluaXRpb24iLCJnZXQiLCJmIiwiY2h1bmtJZCIsImFsbCIsInJlZHVjZSIsInByb21pc2VzIiwidSIsImciLCJnbG9iYWxUaGlzIiwid2luZG93IiwicHJvcCIsImwiLCJ1cmwiLCJzY3JpcHQiLCJuZWVkQXR0YWNoIiwic2NyaXB0cyIsImRvY3VtZW50IiwiZ2V0RWxlbWVudHNCeVRhZ05hbWUiLCJzIiwiZ2V0QXR0cmlidXRlIiwiY3JlYXRlRWxlbWVudCIsImNoYXJzZXQiLCJ0aW1lb3V0IiwibmMiLCJzZXRBdHRyaWJ1dGUiLCJzcmMiLCJvblNjcmlwdENvbXBsZXRlIiwiZXZlbnQiLCJvbmVycm9yIiwib25sb2FkIiwiY2xlYXJUaW1lb3V0IiwiZG9uZUZucyIsInBhcmVudE5vZGUiLCJyZW1vdmVDaGlsZCIsInNldFRpbWVvdXQiLCJiaW5kIiwidGFyZ2V0IiwiaGVhZCIsImFwcGVuZENoaWxkIiwiciIsInNjcmlwdFVybCIsImltcG9ydFNjcmlwdHMiLCJsb2NhdGlvbiIsImN1cnJlbnRTY3JpcHQiLCJyZXBsYWNlIiwicCIsImluc3RhbGxlZENodW5rcyIsIjE3OSIsImoiLCJpbnN0YWxsZWRDaHVua0RhdGEiLCJwcm9taXNlIiwiZXJyb3JUeXBlIiwicmVhbFNyYyIsIm1lc3NhZ2UiLCJyZXF1ZXN0Iiwid2VicGFja0pzb25wQ2FsbGJhY2siLCJwYXJlbnRDaHVua0xvYWRpbmdGdW5jdGlvbiIsImRhdGEiLCJjaHVua0lkcyIsIm1vcmVNb2R1bGVzIiwicmVzb2x2ZXMiLCJzaGlmdCIsImNodW5rTG9hZGluZ0dsb2JhbCIsImFkZEV2ZW50TGlzdGVuZXIiLCJldnQiLCJjbGFzc05hbWUiLCJzcGxpdCIsImdldEVsZW1lbnRCeUlkIiwic3R5bGUiLCJ3aWR0aCIsImNhcnRhZGQiLCJjYXJ0cmVtb3ZlIiwiaGFzaCIsInJvdXRlciIsImNoYW5nZVVSTCIsIm1haW5GIiwidGFnIiwiY2xhc3NMaXN0IiwiY29udGFpbnMiLCJyZW1vdmUiLCJhZGQiLCJjbGllbnQiLCJnZXREYXRhIiwiY2FydCIsInZpc3VhbGl6ZSIsInNob3ciLCJzdWJtaXRGb3JtIiwiaGlzdG9yeSIsInB1c2hTdGF0ZSIsInJlcGxhY2VTdGF0ZSIsImJhY2siLCJtaWRVUkwiLCJlbmRVUkwiLCJ2aWV3TmFtZSIsImVuZHBvaW50TmFtZSIsImdldEhhc2giLCJpbmNsdWRlcyIsImxpc3QiLCJnZXRTaGl0IiwiZW5kcG9pbnQiLCJmZXRjaCIsInJlc3BvbnNlIiwianNvbiIsImNhdGNoIiwiY29uc29sZSIsImxvZyIsImJvZHkiLCJKU09OIiwic3RyaW5naWZ5IiwiZW5naW5lIiwidmlldyIsImlubmVySFRNTCIsImxvY2FsU3RvcmFnZSIsImdldEl0ZW0iLCJzZXRJdGVtIiwiaXRlbUlkIiwicGFyc2UiLCJvcmRlcnMiLCJnZXRJdGVtcyIsInJlcyIsImZpbmQiLCJwcm9kdWN0IiwicHJpY2UiLCJjYXJ0cHJvZHVjdHMiLCJwcm9kdWN0cyIsImZpbHRlciIsInByb2QiLCJwcm9kdWN0TmFtZSIsImpvaW4iLCJnZXRQcmljZSIsIml0ZW0iLCJkZWxldGUiLCJlbWFpbCIsInBob25lIiwiYWRkcmVzcyIsInRpbWUiLCJjYXNoIiwibG9hZGVyIiwiZGIiLCJwYXltZW50IiwiY2hlY2tlZCIsIm9yZGVyIiwiY2xlYXIiLCJvcmRlcklkIiwicG9zdCIsImRlZmF1bHQiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwicmVuZGVyIiwiZ2V0U3RhdGUiLCJ2aWV3TW9kZWwiLCJyZWFzb24iLCJsb2FkTWFpbiIsImlzRW1wdHkiLCJnb0JhY2siXSwibWFwcGluZ3MiOiJVQUFJQSxFQUNBQyxFLFdDTUosSUFBSUMsRUFBVyxTQUFVQyxHQUN2QixhQUVBLElBRUlDLEVBRkFDLEVBQUtDLE9BQU9DLFVBQ1pDLEVBQVNILEVBQUdJLGVBRVpDLEVBQTRCLG1CQUFYQyxPQUF3QkEsT0FBUyxHQUNsREMsRUFBaUJGLEVBQVFHLFVBQVksYUFDckNDLEVBQXNCSixFQUFRSyxlQUFpQixrQkFDL0NDLEVBQW9CTixFQUFRTyxhQUFlLGdCQUUvQyxTQUFTQyxFQUFPQyxFQUFLQyxFQUFLQyxHQU94QixPQU5BZixPQUFPZ0IsZUFBZUgsRUFBS0MsRUFBSyxDQUM5QkMsTUFBT0EsRUFDUEUsWUFBWSxFQUNaQyxjQUFjLEVBQ2RDLFVBQVUsSUFFTE4sRUFBSUMsR0FFYixJQUVFRixFQUFPLEdBQUksSUFDWCxNQUFPUSxHQUNQUixFQUFTLFNBQVNDLEVBQUtDLEVBQUtDLEdBQzFCLE9BQU9GLEVBQUlDLEdBQU9DLEdBSXRCLFNBQVNNLEVBQUtDLEVBQVNDLEVBQVNDLEVBQU1DLEdBRXBDLElBQUlDLEVBQWlCSCxHQUFXQSxFQUFRdEIscUJBQXFCMEIsRUFBWUosRUFBVUksRUFDL0VDLEVBQVk1QixPQUFPNkIsT0FBT0gsRUFBZXpCLFdBQ3pDNkIsRUFBVSxJQUFJQyxFQUFRTixHQUFlLElBTXpDLE9BRkFHLEVBQVVJLFFBc01aLFNBQTBCVixFQUFTRSxFQUFNTSxHQUN2QyxJQUFJRyxFQUFRQyxFQUVaLE9BQU8sU0FBZ0JDLEVBQVFDLEdBQzdCLEdBQUlILElBQVVJLEVBQ1osTUFBTSxJQUFJQyxNQUFNLGdDQUdsQixHQUFJTCxJQUFVTSxFQUFtQixDQUMvQixHQUFlLFVBQVhKLEVBQ0Ys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SUFDTHZDLEVBQU91QyxFQUFVSixRQUNWaEUsRUFBT0MsUUFBUVksTUFFdkJTLE9BQU0rQyxJQUNMOUMsUUFBUUMsSUFBSTZDLEdBaEJsQm5NLGlCQUNFLE1BQU0ySixRQUFhLDZCQUE4QlAsT0FBT2pILEdBQU1rSCxRQUFRQyxJQUFJbkgsS0FDcEVtRSxRQUFhd0IsRUFBT0MsUUFBUSxNQUFNcUIsT0FBT2pILEdBQU1rSCxRQUFRQyxJQUFJbkgsS0FDakV1SCxFQUFPc0MsT0FBT3JDLEVBQUtyRCxJQWNmOEYsTUFFRHpPLE1BQUsySSxJQUNKb0QsRUFBT3NDLE9BQU9yQyxFQUFLckQsRUFBTWdCLEVBQU9zQixlQUVqQ1EsT0FBTStDLElBQ0w5QyxRQUFRQyxJQUFJNkMsT0FJbEIzRSxJQUNBbEUsT0FBT3NELGlCQUFpQixhQUFjWSxHQU90Q2xFLE9BQU9zRCxpQkFBaUIsY0FMTCxLQUNkb0IsRUFBS3FFLFdBQWtDLFVBQXJCL0UsRUFBT3NCLFdBQzFCdEIsRUFBT2dGLGEiLCJmaWxlIjoiYnVuZGxlLmpzIiwic291cmNlc0NvbnRlbnQiOlsidmFyIGluUHJvZ3Jlc3MgPSB7fTtcbnZhciBkYXRhV2VicGFja1ByZWZpeCA9IFwibXktcGl6emEtd2Vic2l0ZS10ZXN0ZWQ6XCI7XG4vLyBsb2FkU2NyaXB0IGZ1bmN0aW9uIHRvIGxvYWQgYSBzY3JpcHQgdmlhIHNjcmlwdCB0YWdcbl9fd2VicGFja19yZXF1aXJlX18ubCA9ICh1cmwsIGRvbmUsIGtleSkgPT4ge1xuXHRpZihpblByb2dyZXNzW3VybF0pIHsgaW5Qcm9ncmVzc1t1cmxdLnB1c2goZG9uZSk7IHJldHVybjsgfVxuXHR2YXIgc2NyaXB0LCBuZWVkQXR0YWNoO1xuXHRpZihrZXkgIT09IHVuZGVmaW5lZCkge1xuXHRcdHZhciBzY3JpcHRzID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJzY3JpcHRcIik7XG5cdFx0Zm9yKHZhciBpID0gMDsgaSA8IHNjcmlwdHMubGVuZ3RoOyBpKyspIHtcblx0XHRcdHZhciBzID0gc2NyaXB0c1tpXTtcblx0XHRcdGlmKHMuZ2V0QXR0cmlidXRlKFwic3JjXCIpID09IHVybCB8fCBzLmdldEF0dHJpYnV0ZShcImRhdGEtd2VicGFja1wiKSA9PSBkYXRhV2VicGFja1ByZWZpeCArIGtleSkgeyBzY3JpcHQgPSBzOyBicmVhazsgfVxuXHRcdH1cblx0fVxuXHRpZighc2NyaXB0KSB7XG5cdFx0bmVlZEF0dGFjaCA9IHRydWU7XG5cdFx0c2NyaXB0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc2NyaXB0Jyk7XG5cblx0XHRzY3JpcHQuY2hhcnNldCA9ICd1dGYtOCc7XG5cdFx0c2NyaXB0LnRpbWVvdXQgPSAxMjA7XG5cdFx0aWYgKF9fd2VicGFja19yZXF1aXJlX18ubmMpIHtcblx0XHRcdHNjcmlwdC5zZXRBdHRyaWJ1dGUoXCJub25jZVwiLCBfX3dlYnBhY2tfcmVxdWlyZV9fLm5jKTtcblx0XHR9XG5cdFx0c2NyaXB0LnNldEF0dHJpYnV0ZShcImRhdGEtd2VicGFja1wiLCBkYXRhV2VicGFja1ByZWZpeCArIGtleSk7XG5cdFx0c2NyaXB0LnNyYyA9IHVybDtcblx0fVxuXHRpblByb2dyZXNzW3VybF0gPSBbZG9uZV07XG5cdHZhciBvblNjcmlwdENvbXBsZXRlID0gKHByZXYsIGV2ZW50KSA9PiB7XG5cdFx0Ly8gYXZvaWQgbWVtIGxlYWtzIGluIElFLlxuXHRcdHNjcmlwdC5vbmVycm9yID0gc2NyaXB0Lm9ubG9hZCA9IG51bGw7XG5cdFx0Y2xlYXJUaW1lb3V0KHRpbWVvdXQpO1xuXHRcdHZhciBkb25lRm5zID0gaW5Qcm9ncmVzc1t1cmxdO1xuXHRcdGRlbGV0ZSBpblByb2dyZXNzW3VybF07XG5cdFx0c2NyaXB0LnBhcmVudE5vZGUgJiYgc2NyaXB0LnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoc2NyaXB0KTtcblx0XHRkb25lRm5zICYmIGRvbmVGbnMuZm9yRWFjaCgoZm4pID0+IGZuKGV2ZW50KSk7XG5cdFx0aWYocHJldikgcmV0dXJuIHByZXYoZXZlbnQpO1xuXHR9XG5cdDtcblx0dmFyIHRpbWVvdXQgPSBzZXRUaW1lb3V0KG9uU2NyaXB0Q29tcGxldGUuYmluZChudWxsLCB1bmRlZmluZWQsIHsgdHlwZTogJ3RpbWVvdXQnLCB0YXJnZXQ6IHNjcmlwdCB9KSwgMTIwMDAwKTtcblx0c2NyaXB0Lm9uZXJyb3IgPSBvblNjcmlwdENvbXBsZXRlLmJpbmQobnVsbCwgc2NyaXB0Lm9uZXJyb3IpO1xuXHRzY3JpcHQub25sb2FkID0gb25TY3JpcHRDb21wbGV0ZS5iaW5kKG51bGwsIHNjcmlwdC5vbmxvYWQpO1xuXHRuZWVkQXR0YWNoICYmIGRvY3VtZW50LmhlYWQuYXBwZW5kQ2hpbGQoc2NyaXB0KTtcbn07IiwiLyoqXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTQtcHJlc2VudCwgRmFjZWJvb2ssIEluYy5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS5cbiAqL1xuXG52YXIgcnVudGltZSA9IChmdW5jdGlvbiAoZXhwb3J0cykge1xuICBcInVzZSBzdHJpY3RcIjtcblxuICB2YXIgT3AgPSBPYmplY3QucHJvdG90eXBlO1xuICB2YXIgaGFzT3duID0gT3AuaGFzT3duUHJvcGVydHk7XG4gIHZhciB1bmRlZmluZWQ7IC8vIE1vcmUgY29tcHJlc3NpYmxlIHRoYW4gdm9pZCAwLlxuICB2YXIgJFN5bWJvbCA9IHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiA/IFN5bWJvbCA6IHt9O1xuICB2YXIgaXRlcmF0b3JTeW1ib2wgPSAkU3ltYm9sLml0ZXJhdG9yIHx8IFwiQEBpdGVyYXRvclwiO1xuICB2YXIgYXN5bmNJdGVyYXRvclN5bWJvbCA9ICRTeW1ib2wuYXN5bmNJdGVyYXRvciB8fCBcIkBAYXN5bmNJdGVyYXRvclwiO1xuICB2YXIgdG9TdHJpbmdUYWdTeW1ib2wgPSAkU3ltYm9sLnRvU3RyaW5nVGFnIHx8IFwiQEB0b1N0cmluZ1RhZ1wiO1xuXG4gIGZ1bmN0aW9uIGRlZmluZShvYmosIGtleSwgdmFsdWUpIHtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHtcbiAgICAgIHZhbHVlOiB2YWx1ZSxcbiAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICB3cml0YWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIHJldHVybiBvYmpba2V5XTtcbiAgfVxuICB0cnkge1xuICAgIC8vIElFIDggaGFzIGEgYnJva2VuIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSB0aGF0IG9ubHkgd29ya3Mgb24gRE9NIG9iamVjdHMuXG4gICAgZGVmaW5lKHt9LCBcIlwiKTtcbiAgfSBjYXRjaCAoZXJyKSB7XG4gICAgZGVmaW5lID0gZnVuY3Rpb24ob2JqLCBrZXksIHZhbHVlKSB7XG4gICAgICByZXR1cm4gb2JqW2tleV0gPSB2YWx1ZTtcbiAgICB9O1xuICB9XG5cbiAgZnVuY3Rpb24gd3JhcChpbm5lckZuLCBvdXRlckZuLCBzZWxmLCB0cnlMb2NzTGlzdCkge1xuICAgIC8vIElmIG91dGVyRm4gcHJvdmlkZWQgYW5kIG91dGVyRm4ucHJvdG90eXBlIGlzIGEgR2VuZXJhdG9yLCB0aGVuIG91dGVyRm4ucHJvdG90eXBlIGluc3RhbmNlb2YgR2VuZXJhdG9yLlxuICAgIHZhciBwcm90b0dlbmVyYXRvciA9IG91dGVyRm4gJiYgb3V0ZXJGbi5wcm90b3R5cGUgaW5zdGFuY2VvZiBHZW5lcmF0b3IgPyBvdXRlckZuIDogR2VuZXJhdG9yO1xuICAgIHZhciBnZW5lcmF0b3IgPSBPYmplY3QuY3JlYXRlKHByb3RvR2VuZXJhdG9yLnByb3RvdHlwZSk7XG4gICAgdmFyIGNvbnRleHQgPSBuZXcgQ29udGV4dCh0cnlMb2NzTGlzdCB8fCBbXSk7XG5cbiAgICAvLyBUaGUgLl9pbnZva2UgbWV0aG9kIHVuaWZpZXMgdGhlIGltcGxlbWVudGF0aW9ucyBvZiB0aGUgLm5leHQsXG4gICAgLy8gLnRocm93LCBhbmQgLnJldHVybiBtZXRob2RzLlxuICAgIGdlbmVyYXRvci5faW52b2tlID0gbWFrZUludm9rZU1ldGhvZChpbm5lckZuLCBzZWxmLCBjb250ZXh0KTtcblxuICAgIHJldHVybiBnZW5lcmF0b3I7XG4gIH1cbiAgZXhwb3J0cy53cmFwID0gd3JhcDtcblxuICAvLyBUcnkvY2F0Y2ggaGVscGVyIHRvIG1pbmltaXplIGRlb3B0aW1pemF0aW9ucy4gUmV0dXJucyBhIGNvbXBsZXRpb25cbiAgLy8gcmVjb3JkIGxpa2UgY29udGV4dC50cnlFbnRyaWVzW2ldLmNvbXBsZXRpb24uIFRoaXMgaW50ZXJmYWNlIGNvdWxkXG4gIC8vIGhhdmUgYmVlbiAoYW5kIHdhcyBwcmV2aW91c2x5KSBkZXNpZ25lZCB0byB0YWtlIGEgY2xvc3VyZSB0byBiZVxuICAvLyBpbnZva2VkIHdpdGhvdXQgYXJndW1lbnRzLCBidXQgaW4gYWxsIHRoZSBjYXNlcyB3ZSBjYXJlIGFib3V0IHdlXG4gIC8vIGFscmVhZHkgaGF2ZSBhbiBleGlzdGluZyBtZXRob2Qgd2Ugd2FudCB0byBjYWxsLCBzbyB0aGVyZSdzIG5vIG5lZWRcbiAgLy8gdG8gY3JlYXRlIGEgbmV3IGZ1bmN0aW9uIG9iamVjdC4gV2UgY2FuIGV2ZW4gZ2V0IGF3YXkgd2l0aCBhc3N1bWluZ1xuICAvLyB0aGUgbWV0aG9kIHRha2VzIGV4YWN0bHkgb25lIGFyZ3VtZW50LCBzaW5jZSB0aGF0IGhhcHBlbnMgdG8gYmUgdHJ1ZVxuICAvLyBpbiBldmVyeSBjYXNlLCBzbyB3ZSBkb24ndCBoYXZlIHRvIHRvdWNoIHRoZSBhcmd1bWVudHMgb2JqZWN0LiBUaGVcbiAgLy8gb25seSBhZGRpdGlvbmFsIGFsbG9jYXRpb24gcmVxdWlyZWQgaXMgdGhlIGNvbXBsZXRpb24gcmVjb3JkLCB3aGljaFxuICAvLyBoYXMgYSBzdGFibGUgc2hhcGUgYW5kIHNvIGhvcGVmdWxseSBzaG91bGQgYmUgY2hlYXAgdG8gYWxsb2NhdGUuXG4gIGZ1bmN0aW9uIHRyeUNhdGNoKGZuLCBvYmosIGFyZykge1xuICAgIHRyeSB7XG4gICAgICByZXR1cm4geyB0eXBlOiBcIm5vcm1hbFwiLCBhcmc6IGZuLmNhbGwob2JqLCBhcmcpIH07XG4gICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICByZXR1cm4geyB0eXBlOiBcInRocm93XCIsIGFyZzogZXJyIH07XG4gICAgfVxuICB9XG5cbiAgdmFyIEdlblN0YXRlU3VzcGVuZGVkU3RhcnQgPSBcInN1c3BlbmRlZFN0YXJ0XCI7XG4gIHZhciBHZW5TdGF0ZVN1c3BlbmRlZFlpZWxkID0gXCJzdXNwZW5kZWRZaWVsZFwiO1xuICB2YXIgR2VuU3RhdGVFeGVjdXRpbmcgPSBcImV4ZWN1dGluZ1wiO1xuICB2YXIgR2VuU3RhdGVDb21wbGV0ZWQgPSBcImNvbXBsZXRlZFwiO1xuXG4gIC8vIFJldHVybmluZyB0aGlzIG9iamVjdCBmcm9tIHRoZSBpbm5lckZuIGhhcyB0aGUgc2FtZSBlZmZlY3QgYXNcbiAgLy8gYnJlYWtpbmcgb3V0IG9mIHRoZSBkaXNwYXRjaCBzd2l0Y2ggc3RhdGVtZW50LlxuICB2YXIgQ29udGludWVTZW50aW5lbCA9IHt9O1xuXG4gIC8vIER1bW15IGNvbnN0cnVjdG9yIGZ1bmN0aW9ucyB0aGF0IHdlIHVzZSBhcyB0aGUgLmNvbnN0cnVjdG9yIGFuZFxuICAvLyAuY29uc3RydWN0b3IucHJvdG90eXBlIHByb3BlcnRpZXMgZm9yIGZ1bmN0aW9ucyB0aGF0IHJldHVybiBHZW5lcmF0b3JcbiAgLy8gb2JqZWN0cy4gRm9yIGZ1bGwgc3BlYyBjb21wbGlhbmNlLCB5b3UgbWF5IHdpc2ggdG8gY29uZmlndXJlIHlvdXJcbiAgLy8gbWluaWZpZXIgbm90IHRvIG1hbmdsZSB0aGUgbmFtZXMgb2YgdGhlc2UgdHdvIGZ1bmN0aW9ucy5cbiAgZnVuY3Rpb24gR2VuZXJhdG9yKCkge31cbiAgZnVuY3Rpb24gR2VuZXJhdG9yRnVuY3Rpb24oKSB7fVxuICBmdW5jdGlvbiBHZW5lcmF0b3JGdW5jdGlvblByb3RvdHlwZSgpIHt9XG5cbiAgLy8gVGhpcyBpcyBhIHBvbHlmaWxsIGZvciAlSXRlcmF0b3JQcm90b3R5cGUlIGZvciBlbnZpcm9ubWVudHMgdGhhdFxuICAvLyBkb24ndCBuYXRpdmVseSBzdXBwb3J0IGl0LlxuICB2YXIgSXRlcmF0b3JQcm90b3R5cGUgPSB7fTtcbiAgSXRlcmF0b3JQcm90b3R5cGVbaXRlcmF0b3JTeW1ib2xdID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiB0aGlzO1xuICB9O1xuXG4gIHZhciBnZXRQcm90byA9IE9iamVjdC5nZXRQcm90b3R5cGVPZjtcbiAgdmFyIE5hdGl2ZUl0ZXJhdG9yUHJvdG90eXBlID0gZ2V0UHJvdG8gJiYgZ2V0UHJvdG8oZ2V0UHJvdG8odmFsdWVzKFtdKSkpO1xuICBpZiAoTmF0aXZlSXRlcmF0b3JQcm90b3R5cGUgJiZcbiAgICAgIE5hdGl2ZUl0ZXJhdG9yUHJvdG90eXBlICE9PSBPcCAmJlxuICAgICAgaGFzT3duLmNhbGwoTmF0aXZlSXRlcmF0b3JQcm90b3R5cGUsIGl0ZXJhdG9yU3ltYm9sKSkge1xuICAgIC8vIFRoaXMgZW52aXJvbm1lbnQgaGFzIGEgbmF0aXZlICVJdGVyYXRvclByb3RvdHlwZSU7IHVzZSBpdCBpbnN0ZWFkXG4gICAgLy8gb2YgdGhlIHBvbHlmaWxsLlxuICAgIEl0ZXJhdG9yUHJvdG90eXBlID0gTmF0aXZlSXRlcmF0b3JQcm90b3R5cGU7XG4gIH1cblxuICB2YXIgR3AgPSBHZW5lcmF0b3JGdW5jdGlvblByb3RvdHlwZS5wcm90b3R5cGUgPVxuICAgIEdlbmVyYXRvci5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKEl0ZXJhdG9yUHJvdG90eXBlKTtcbiAgR2VuZXJhdG9yRnVuY3Rpb24ucHJvdG90eXBlID0gR3AuY29uc3RydWN0b3IgPSBHZW5lcmF0b3JGdW5jdGlvblByb3RvdHlwZTtcbiAgR2VuZXJhdG9yRnVuY3Rpb25Qcm90b3R5cGUuY29uc3RydWN0b3IgPSBHZW5lcmF0b3JGdW5jdGlvbjtcbiAgR2VuZXJhdG9yRnVuY3Rpb24uZGlzcGxheU5hbWUgPSBkZWZpbmUoXG4gICAgR2VuZXJhdG9yRnVuY3Rpb25Qcm90b3R5cGUsXG4gICAgdG9TdHJpbmdUYWdTeW1ib2wsXG4gICAgXCJHZW5lcmF0b3JGdW5jdGlvblwiXG4gICk7XG5cbiAgLy8gSGVscGVyIGZvciBkZWZpbmluZyB0aGUgLm5leHQsIC50aHJvdywgYW5kIC5yZXR1cm4gbWV0aG9kcyBvZiB0aGVcbiAgLy8gSXRlcmF0b3IgaW50ZXJmYWNlIGluIHRlcm1zIG9mIGEgc2luZ2xlIC5faW52b2tlIG1ldGhvZC5cbiAgZnVuY3Rpb24gZGVmaW5lSXRlcmF0b3JNZXRob2RzKHByb3RvdHlwZSkge1xuICAgIFtcIm5leHRcIiwgXCJ0aHJvd1wiLCBcInJldHVyblwiXS5mb3JFYWNoKGZ1bmN0aW9uKG1ldGhvZCkge1xuICAgICAgZGVmaW5lKHByb3RvdHlwZSwgbWV0aG9kLCBmdW5jdGlvbihhcmcpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2ludm9rZShtZXRob2QsIGFyZyk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfVxuXG4gIGV4cG9ydHMuaXNHZW5lcmF0b3JGdW5jdGlvbiA9IGZ1bmN0aW9uKGdlbkZ1bikge1xuICAgIHZhciBjdG9yID0gdHlwZW9mIGdlbkZ1biA9PT0gXCJmdW5jdGlvblwiICYmIGdlbkZ1bi5jb25zdHJ1Y3RvcjtcbiAgICByZXR1cm4gY3RvclxuICAgICAgPyBjdG9yID09PSBHZW5lcmF0b3JGdW5jdGlvbiB8fFxuICAgICAgICAvLyBGb3IgdGhlIG5hdGl2ZSBHZW5lcmF0b3JGdW5jdGlvbiBjb25zdHJ1Y3RvciwgdGhlIGJlc3Qgd2UgY2FuXG4gICAgICAgIC8vIGRvIGlzIHRvIGNoZWNrIGl0cyAubmFtZSBwcm9wZXJ0eS5cbiAgICAgICAgKGN0b3IuZGlzcGxheU5hbWUgfHwgY3Rvci5uYW1lKSA9PT0gXCJHZW5lcmF0b3JGdW5jdGlvblwiXG4gICAgICA6IGZhbHNlO1xuICB9O1xuXG4gIGV4cG9ydHMubWFyayA9IGZ1bmN0aW9uKGdlbkZ1bikge1xuICAgIGlmIChPYmplY3Quc2V0UHJvdG90eXBlT2YpIHtcbiAgICAgIE9iamVjdC5zZXRQcm90b3R5cGVPZihnZW5GdW4sIEdlbmVyYXRvckZ1bmN0aW9uUHJvdG90eXBlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgZ2VuRnVuLl9fcHJvdG9fXyA9IEdlbmVyYXRvckZ1bmN0aW9uUHJvdG90eXBlO1xuICAgICAgZGVmaW5lKGdlbkZ1biwgdG9TdHJpbmdUYWdTeW1ib2wsIFwiR2VuZXJhdG9yRnVuY3Rpb25cIik7XG4gICAgfVxuICAgIGdlbkZ1bi5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKEdwKTtcbiAgICByZXR1cm4gZ2VuRnVuO1xuICB9O1xuXG4gIC8vIFdpdGhpbiB0aGUgYm9keSBvZiBhbnkgYXN5bmMgZnVuY3Rpb24sIGBhd2FpdCB4YCBpcyB0cmFuc2Zvcm1lZCB0b1xuICAvLyBgeWllbGQgcmVnZW5lcmF0b3JSdW50aW1lLmF3cmFwKHgpYCwgc28gdGhhdCB0aGUgcnVudGltZSBjYW4gdGVzdFxuICAvLyBgaGFzT3duLmNhbGwodmFsdWUsIFwiX19hd2FpdFwiKWAgdG8gZGV0ZXJtaW5lIGlmIHRoZSB5aWVsZGVkIHZhbHVlIGlzXG4gIC8vIG1lYW50IHRvIGJlIGF3YWl0ZWQuXG4gIGV4cG9ydHMuYXdyYXAgPSBmdW5jdGlvbihhcmcpIHtcbiAgICByZXR1cm4geyBfX2F3YWl0OiBhcmcgfTtcbiAgfTtcblxuICBmdW5jdGlvbiBBc3luY0l0ZXJhdG9yKGdlbmVyYXRvciwgUHJvbWlzZUltcGwpIHtcbiAgICBmdW5jdGlvbiBpbnZva2UobWV0aG9kLCBhcmcsIHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgdmFyIHJlY29yZCA9IHRyeUNhdGNoKGdlbmVyYXRvclttZXRob2RdLCBnZW5lcmF0b3IsIGFyZyk7XG4gICAgICBpZiAocmVjb3JkLnR5cGUgPT09IFwidGhyb3dcIikge1xuICAgICAgICByZWplY3QocmVjb3JkLmFyZyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB2YXIgcmVzdWx0ID0gcmVjb3JkLmFyZztcbiAgICAgICAgdmFyIHZhbHVlID0gcmVzdWx0LnZhbHVlO1xuICAgICAgICBpZiAodmFsdWUgJiZcbiAgICAgICAgICAgIHR5cGVvZiB2YWx1ZSA9PT0gXCJvYmplY3RcIiAmJlxuICAgICAgICAgICAgaGFzT3duLmNhbGwodmFsdWUsIFwiX19hd2FpdFwiKSkge1xuICAgICAgICAgIHJldHVybiBQcm9taXNlSW1wbC5yZXNvbHZlKHZhbHVlLl9fYXdhaXQpLnRoZW4oZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgICAgICAgIGludm9rZShcIm5leHRcIiwgdmFsdWUsIHJlc29sdmUsIHJlamVjdCk7XG4gICAgICAgICAgfSwgZnVuY3Rpb24oZXJyKSB7XG4gICAgICAgICAgICBpbnZva2UoXCJ0aHJvd1wiLCBlcnIsIHJlc29sdmUsIHJlamVjdCk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gUHJvbWlzZUltcGwucmVzb2x2ZSh2YWx1ZSkudGhlbihmdW5jdGlvbih1bndyYXBwZWQpIHtcbiAgICAgICAgICAvLyBXaGVuIGEgeWllbGRlZCBQcm9taXNlIGlzIHJlc29sdmVkLCBpdHMgZmluYWwgdmFsdWUgYmVjb21lc1xuICAgICAgICAgIC8vIHRoZSAudmFsdWUgb2YgdGhlIFByb21pc2U8e3ZhbHVlLGRvbmV9PiByZXN1bHQgZm9yIHRoZVxuICAgICAgICAgIC8vIGN1cnJlbnQgaXRlcmF0aW9uLlxuICAgICAgICAgIHJlc3VsdC52YWx1ZSA9IHVud3JhcHBlZDtcbiAgICAgICAgICByZXNvbHZlKHJlc3VsdCk7XG4gICAgICAgIH0sIGZ1bmN0aW9uKGVycm9yKSB7XG4gICAgICAgICAgLy8gSWYgYSByZWplY3RlZCBQcm9taXNlIHdhcyB5aWVsZGVkLCB0aHJvdyB0aGUgcmVqZWN0aW9uIGJhY2tcbiAgICAgICAgICAvLyBpbnRvIHRoZSBhc3luYyBnZW5lcmF0b3IgZnVuY3Rpb24gc28gaXQgY2FuIGJlIGhhbmRsZWQgdGhlcmUuXG4gICAgICAgICAgcmV0dXJuIGludm9rZShcInRocm93XCIsIGVycm9yLCByZXNvbHZlLCByZWplY3QpO1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICB2YXIgcHJldmlvdXNQcm9taXNlO1xuXG4gICAgZnVuY3Rpb24gZW5xdWV1ZShtZXRob2QsIGFyZykge1xuICAgICAgZnVuY3Rpb24gY2FsbEludm9rZVdpdGhNZXRob2RBbmRBcmcoKSB7XG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZUltcGwoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgICAgaW52b2tlKG1ldGhvZCwgYXJnLCByZXNvbHZlLCByZWplY3QpO1xuICAgICAgICB9KTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHByZXZpb3VzUHJvbWlzZSA9XG4gICAgICAgIC8vIElmIGVucXVldWUgaGFzIGJlZW4gY2FsbGVkIGJlZm9yZSwgdGhlbiB3ZSB3YW50IHRvIHdhaXQgdW50aWxcbiAgICAgICAgLy8gYWxsIHByZXZpb3VzIFByb21pc2VzIGhhdmUgYmVlbiByZXNvbHZlZCBiZWZvcmUgY2FsbGluZyBpbnZva2UsXG4gICAgICAgIC8vIHNvIHRoYXQgcmVzdWx0cyBhcmUgYWx3YXlzIGRlbGl2ZXJlZCBpbiB0aGUgY29ycmVjdCBvcmRlci4gSWZcbiAgICAgICAgLy8gZW5xdWV1ZSBoYXMgbm90IGJlZW4gY2FsbGVkIGJlZm9yZSwgdGhlbiBpdCBpcyBpbXBvcnRhbnQgdG9cbiAgICAgICAgLy8gY2FsbCBpbnZva2UgaW1tZWRpYXRlbHksIHdpdGhvdXQgd2FpdGluZyBvbiBhIGNhbGxiYWNrIHRvIGZpcmUsXG4gICAgICAgIC8vIHNvIHRoYXQgdGhlIGFzeW5jIGdlbmVyYXRvciBmdW5jdGlvbiBoYXMgdGhlIG9wcG9ydHVuaXR5IHRvIGRvXG4gICAgICAgIC8vIGFueSBuZWNlc3Nhcnkgc2V0dXAgaW4gYSBwcmVkaWN0YWJsZSB3YXkuIFRoaXMgcHJlZGljdGFiaWxpdHlcbiAgICAgICAgLy8gaXMgd2h5IHRoZSBQcm9taXNlIGNvbnN0cnVjdG9yIHN5bmNocm9ub3VzbHkgaW52b2tlcyBpdHNcbiAgICAgICAgLy8gZXhlY3V0b3IgY2FsbGJhY2ssIGFuZCB3aHkgYXN5bmMgZnVuY3Rpb25zIHN5bmNocm9ub3VzbHlcbiAgICAgICAgLy8gZXhlY3V0ZSBjb2RlIGJlZm9yZSB0aGUgZmlyc3QgYXdhaXQuIFNpbmNlIHdlIGltcGxlbWVudCBzaW1wbGVcbiAgICAgICAgLy8gYXN5bmMgZnVuY3Rpb25zIGluIHRlcm1zIG9mIGFzeW5jIGdlbmVyYXRvcnMsIGl0IGlzIGVzcGVjaWFsbHlcbiAgICAgICAgLy8gaW1wb3J0YW50IHRvIGdldCB0aGlzIHJpZ2h0LCBldmVuIHRob3VnaCBpdCByZXF1aXJlcyBjYXJlLlxuICAgICAgICBwcmV2aW91c1Byb21pc2UgPyBwcmV2aW91c1Byb21pc2UudGhlbihcbiAgICAgICAgICBjYWxsSW52b2tlV2l0aE1ldGhvZEFuZEFyZyxcbiAgICAgICAgICAvLyBBdm9pZCBwcm9wYWdhdGluZyBmYWlsdXJlcyB0byBQcm9taXNlcyByZXR1cm5lZCBieSBsYXRlclxuICAgICAgICAgIC8vIGludm9jYXRpb25zIG9mIHRoZSBpdGVyYXRvci5cbiAgICAgICAgICBjYWxsSW52b2tlV2l0aE1ldGhvZEFuZEFyZ1xuICAgICAgICApIDogY2FsbEludm9rZVdpdGhNZXRob2RBbmRBcmcoKTtcbiAgICB9XG5cbiAgICAvLyBEZWZpbmUgdGhlIHVuaWZpZWQgaGVscGVyIG1ldGhvZCB0aGF0IGlzIHVzZWQgdG8gaW1wbGVtZW50IC5uZXh0LFxuICAgIC8vIC50aHJvdywgYW5kIC5yZXR1cm4gKHNlZSBkZWZpbmVJdGVyYXRvck1ldGhvZHMpLlxuICAgIHRoaXMuX2ludm9rZSA9IGVucXVldWU7XG4gIH1cblxuICBkZWZpbmVJdGVyYXRvck1ldGhvZHMoQXN5bmNJdGVyYXRvci5wcm90b3R5cGUpO1xuICBBc3luY0l0ZXJhdG9yLnByb3RvdHlwZVthc3luY0l0ZXJhdG9yU3ltYm9sXSA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gdGhpcztcbiAgfTtcbiAgZXhwb3J0cy5Bc3luY0l0ZXJhdG9yID0gQXN5bmNJdGVyYXRvcjtcblxuICAvLyBOb3RlIHRoYXQgc2ltcGxlIGFzeW5jIGZ1bmN0aW9ucyBhcmUgaW1wbGVtZW50ZWQgb24gdG9wIG9mXG4gIC8vIEFzeW5jSXRlcmF0b3Igb2JqZWN0czsgdGhleSBqdXN0IHJldHVybiBhIFByb21pc2UgZm9yIHRoZSB2YWx1ZSBvZlxuICAvLyB0aGUgZmluYWwgcmVzdWx0IHByb2R1Y2VkIGJ5IHRoZSBpdGVyYXRvci5cbiAgZXhwb3J0cy5hc3luYyA9IGZ1bmN0aW9uKGlubmVyRm4sIG91dGVyRm4sIHNlbGYsIHRyeUxvY3NMaXN0LCBQcm9taXNlSW1wbCkge1xuICAgIGlmIChQcm9taXNlSW1wbCA9PT0gdm9pZCAwKSBQcm9taXNlSW1wbCA9IFByb21pc2U7XG5cbiAgICB2YXIgaXRlciA9IG5ldyBBc3luY0l0ZXJhdG9yKFxuICAgICAgd3JhcChpbm5lckZuLCBvdXRlckZuLCBzZWxmLCB0cnlMb2NzTGlzdCksXG4gICAgICBQcm9taXNlSW1wbFxuICAgICk7XG5cbiAgICByZXR1cm4gZXhwb3J0cy5pc0dlbmVyYXRvckZ1bmN0aW9uKG91dGVyRm4pXG4gICAgICA/IGl0ZXIgLy8gSWYgb3V0ZXJGbiBpcyBhIGdlbmVyYXRvciwgcmV0dXJuIHRoZSBmdWxsIGl0ZXJhdG9yLlxuICAgICAgOiBpdGVyLm5leHQoKS50aGVuKGZ1bmN0aW9uKHJlc3VsdCkge1xuICAgICAgICAgIHJldHVybiByZXN1bHQuZG9uZSA/IHJlc3VsdC52YWx1ZSA6IGl0ZXIubmV4dCgpO1xuICAgICAgICB9KTtcbiAgfTtcblxuICBmdW5jdGlvbiBtYWtlSW52b2tlTWV0aG9kKGlubmVyRm4sIHNlbGYsIGNvbnRleHQpIHtcbiAgICB2YXIgc3RhdGUgPSBHZW5TdGF0ZVN1c3BlbmRlZFN0YXJ0O1xuXG4gICAgcmV0dXJuIGZ1bmN0aW9uIGludm9rZShtZXRob2QsIGFyZykge1xuICAgICAgaWYgKHN0YXRlID09PSBHZW5TdGF0ZUV4ZWN1dGluZykge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJHZW5lcmF0b3IgaXMgYWxyZWFkeSBydW5uaW5nXCIpO1xuICAgICAgfVxuXG4gICAgICBpZiAoc3RhdGUgPT09IEdlblN0YXRlQ29tcGxldGVkKSB7XG4gICAgICAgIGlmIChtZXRob2QgPT09IFwidGhyb3dcIikge1xuICAgICAgICAgIHRocm93IGFyZztcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIEJlIGZvcmdpdmluZywgcGVyIDI1LjMuMy4zLjMgb2YgdGhlIHNwZWM6XG4gICAgICAgIC8vIGh0dHBzOi8vcGVvcGxlLm1vemlsbGEub3JnL35qb3JlbmRvcmZmL2VzNi1kcmFmdC5odG1sI3NlYy1nZW5lcmF0b3JyZXN1bWVcbiAgICAgICAgcmV0dXJuIGRvbmVSZXN1bHQoKTtcbiAgICAgIH1cblxuICAgICAgY29udGV4dC5tZXRob2QgPSBtZXRob2Q7XG4gICAgICBjb250ZXh0LmFyZyA9IGFyZztcblxuICAgICAgd2hpbGUgKHRydWUpIHtcbiAgICAgICAgdmFyIGRlbGVnYXRlID0gY29udGV4dC5kZWxlZ2F0ZTtcbiAgICAgICAgaWYgKGRlbGVnYXRlKSB7XG4gICAgICAgICAgdmFyIGRlbGVnYXRlUmVzdWx0ID0gbWF5YmVJbnZva2VEZWxlZ2F0ZShkZWxlZ2F0ZSwgY29udGV4dCk7XG4gICAgICAgICAgaWYgKGRlbGVnYXRlUmVzdWx0KSB7XG4gICAgICAgICAgICBpZiAoZGVsZWdhdGVSZXN1bHQgPT09IENvbnRpbnVlU2VudGluZWwpIGNvbnRpbnVlO1xuICAgICAgICAgICAgcmV0dXJuIGRlbGVnYXRlUmVzdWx0O1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChjb250ZXh0Lm1ldGhvZCA9PT0gXCJuZXh0XCIpIHtcbiAgICAgICAgICAvLyBTZXR0aW5nIGNvbnRleHQuX3NlbnQgZm9yIGxlZ2FjeSBzdXBwb3J0IG9mIEJhYmVsJ3NcbiAgICAgICAgICAvLyBmdW5jdGlvbi5zZW50IGltcGxlbWVudGF0aW9uLlxuICAgICAgICAgIGNvbnRleHQuc2VudCA9IGNvbnRleHQuX3NlbnQgPSBjb250ZXh0LmFyZztcblxuICAgICAgICB9IGVsc2UgaWYgKGNvbnRleHQubWV0aG9kID09PSBcInRocm93XCIpIHtcbiAgICAgICAgICBpZiAoc3RhdGUgPT09IEdlblN0YXRlU3VzcGVuZGVkU3RhcnQpIHtcbiAgICAgICAgICAgIHN0YXRlID0gR2VuU3RhdGVDb21wbGV0ZWQ7XG4gICAgICAgICAgICB0aHJvdyBjb250ZXh0LmFyZztcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBjb250ZXh0LmRpc3BhdGNoRXhjZXB0aW9uKGNvbnRleHQuYXJnKTtcblxuICAgICAgICB9IGVsc2UgaWYgKGNvbnRleHQubWV0aG9kID09PSBcInJldHVyblwiKSB7XG4gICAgICAgICAgY29udGV4dC5hYnJ1cHQoXCJyZXR1cm5cIiwgY29udGV4dC5hcmcpO1xuICAgICAgICB9XG5cbiAgICAgICAgc3RhdGUgPSBHZW5TdGF0ZUV4ZWN1dGluZztcblxuICAgICAgICB2YXIgcmVjb3JkID0gdHJ5Q2F0Y2goaW5uZXJGbiwgc2VsZiwgY29udGV4dCk7XG4gICAgICAgIGlmIChyZWNvcmQudHlwZSA9PT0gXCJub3JtYWxcIikge1xuICAgICAgICAgIC8vIElmIGFuIGV4Y2VwdGlvbiBpcyB0aHJvd24gZnJvbSBpbm5lckZuLCB3ZSBsZWF2ZSBzdGF0ZSA9PT1cbiAgICAgICAgICAvLyBHZW5TdGF0ZUV4ZWN1dGluZyBhbmQgbG9vcCBiYWNrIGZvciBhbm90aGVyIGludm9jYXRpb24uXG4gICAgICAgICAgc3RhdGUgPSBjb250ZXh0LmRvbmVcbiAgICAgICAgICAgID8gR2VuU3RhdGVDb21wbGV0ZWRcbiAgICAgICAgICAgIDogR2VuU3RhdGVTdXNwZW5kZWRZaWVsZDtcblxuICAgICAgICAgIGlmIChyZWNvcmQuYXJnID09PSBDb250aW51ZVNlbnRpbmVsKSB7XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgdmFsdWU6IHJlY29yZC5hcmcsXG4gICAgICAgICAgICBkb25lOiBjb250ZXh0LmRvbmVcbiAgICAgICAgICB9O1xuXG4gICAgICAgIH0gZWxzZSBpZiAocmVjb3JkLnR5cGUgPT09IFwidGhyb3dcIikge1xuICAgICAgICAgIHN0YXRlID0gR2VuU3RhdGVDb21wbGV0ZWQ7XG4gICAgICAgICAgLy8gRGlzcGF0Y2ggdGhlIGV4Y2VwdGlvbiBieSBsb29waW5nIGJhY2sgYXJvdW5kIHRvIHRoZVxuICAgICAgICAgIC8vIGNvbnRleHQuZGlzcGF0Y2hFeGNlcHRpb24oY29udGV4dC5hcmcpIGNhbGwgYWJvdmUuXG4gICAgICAgICAgY29udGV4dC5tZXRob2QgPSBcInRocm93XCI7XG4gICAgICAgICAgY29udGV4dC5hcmcgPSByZWNvcmQuYXJnO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfTtcbiAgfVxuXG4gIC8vIENhbGwgZGVsZWdhdGUuaXRlcmF0b3JbY29udGV4dC5tZXRob2RdKGNvbnRleHQuYXJnKSBhbmQgaGFuZGxlIHRoZVxuICAvLyByZXN1bHQsIGVpdGhlciBieSByZXR1cm5pbmcgYSB7IHZhbHVlLCBkb25lIH0gcmVzdWx0IGZyb20gdGhlXG4gIC8vIGRlbGVnYXRlIGl0ZXJhdG9yLCBvciBieSBtb2RpZnlpbmcgY29udGV4dC5tZXRob2QgYW5kIGNvbnRleHQuYXJnLFxuICAvLyBzZXR0aW5nIGNvbnRleHQuZGVsZWdhdGUgdG8gbnVsbCwgYW5kIHJldHVybmluZyB0aGUgQ29udGludWVTZW50aW5lbC5cbiAgZnVuY3Rpb24gbWF5YmVJbnZva2VEZWxlZ2F0ZShkZWxlZ2F0ZSwgY29udGV4dCkge1xuICAgIHZhciBtZXRob2QgPSBkZWxlZ2F0ZS5pdGVyYXRvcltjb250ZXh0Lm1ldGhvZF07XG4gICAgaWYgKG1ldGhvZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAvLyBBIC50aHJvdyBvciAucmV0dXJuIHdoZW4gdGhlIGRlbGVnYXRlIGl0ZXJhdG9yIGhhcyBubyAudGhyb3dcbiAgICAgIC8vIG1ldGhvZCBhbHdheXMgdGVybWluYXRlcyB0aGUgeWllbGQqIGxvb3AuXG4gICAgICBjb250ZXh0LmRlbGVnYXRlID0gbnVsbDtcblxuICAgICAgaWYgKGNvbnRleHQubWV0aG9kID09PSBcInRocm93XCIpIHtcbiAgICAgICAgLy8gTm90ZTogW1wicmV0dXJuXCJdIG11c3QgYmUgdXNlZCBmb3IgRVMzIHBhcnNpbmcgY29tcGF0aWJpbGl0eS5cbiAgICAgICAgaWYgKGRlbGVnYXRlLml0ZXJhdG9yW1wicmV0dXJuXCJdKSB7XG4gICAgICAgICAgLy8gSWYgdGhlIGRlbGVnYXRlIGl0ZXJhdG9yIGhhcyBhIHJldHVybiBtZXRob2QsIGdpdmUgaXQgYVxuICAgICAgICAgIC8vIGNoYW5jZSB0byBjbGVhbiB1cC5cbiAgICAgICAgICBjb250ZXh0Lm1ldGhvZCA9IFwicmV0dXJuXCI7XG4gICAgICAgICAgY29udGV4dC5hcmcgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgbWF5YmVJbnZva2VEZWxlZ2F0ZShkZWxlZ2F0ZSwgY29udGV4dCk7XG5cbiAgICAgICAgICBpZiAoY29udGV4dC5tZXRob2QgPT09IFwidGhyb3dcIikge1xuICAgICAgICAgICAgLy8gSWYgbWF5YmVJbnZva2VEZWxlZ2F0ZShjb250ZXh0KSBjaGFuZ2VkIGNvbnRleHQubWV0aG9kIGZyb21cbiAgICAgICAgICAgIC8vIFwicmV0dXJuXCIgdG8gXCJ0aHJvd1wiLCBsZXQgdGhhdCBvdmVycmlkZSB0aGUgVHlwZUVycm9yIGJlbG93LlxuICAgICAgICAgICAgcmV0dXJuIENvbnRpbnVlU2VudGluZWw7XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgY29udGV4dC5tZXRob2QgPSBcInRocm93XCI7XG4gICAgICAgIGNvbnRleHQuYXJnID0gbmV3IFR5cGVFcnJvcihcbiAgICAgICAgICBcIlRoZSBpdGVyYXRvciBkb2VzIG5vdCBwcm92aWRlIGEgJ3Rocm93JyBtZXRob2RcIik7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBDb250aW51ZVNlbnRpbmVsO1xuICAgIH1cblxuICAgIHZhciByZWNvcmQgPSB0cnlDYXRjaChtZXRob2QsIGRlbGVnYXRlLml0ZXJhdG9yLCBjb250ZXh0LmFyZyk7XG5cbiAgICBpZiAocmVjb3JkLnR5cGUgPT09IFwidGhyb3dcIikge1xuICAgICAgY29udGV4dC5tZXRob2QgPSBcInRocm93XCI7XG4gICAgICBjb250ZXh0LmFyZyA9IHJlY29yZC5hcmc7XG4gICAgICBjb250ZXh0LmRlbGVnYXRlID0gbnVsbDtcbiAgICAgIHJldHVybiBDb250aW51ZVNlbnRpbmVsO1xuICAgIH1cblxuICAgIHZhciBpbmZvID0gcmVjb3JkLmFyZztcblxuICAgIGlmICghIGluZm8pIHtcbiAgICAgIGNvbnRleHQubWV0aG9kID0gXCJ0aHJvd1wiO1xuICAgICAgY29udGV4dC5hcmcgPSBuZXcgVHlwZUVycm9yKFwiaXRlcmF0b3IgcmVzdWx0IGlzIG5vdCBhbiBvYmplY3RcIik7XG4gICAgICBjb250ZXh0LmRlbGVnYXRlID0gbnVsbDtcbiAgICAgIHJldHVybiBDb250aW51ZVNlbnRpbmVsO1xuICAgIH1cblxuICAgIGlmIChpbmZvLmRvbmUpIHtcbiAgICAgIC8vIEFzc2lnbiB0aGUgcmVzdWx0IG9mIHRoZSBmaW5pc2hlZCBkZWxlZ2F0ZSB0byB0aGUgdGVtcG9yYXJ5XG4gICAgICAvLyB2YXJpYWJsZSBzcGVjaWZpZWQgYnkgZGVsZWdhdGUucmVzdWx0TmFtZSAoc2VlIGRlbGVnYXRlWWllbGQpLlxuICAgICAgY29udGV4dFtkZWxlZ2F0ZS5yZXN1bHROYW1lXSA9IGluZm8udmFsdWU7XG5cbiAgICAgIC8vIFJlc3VtZSBleGVjdXRpb24gYXQgdGhlIGRlc2lyZWQgbG9jYXRpb24gKHNlZSBkZWxlZ2F0ZVlpZWxkKS5cbiAgICAgIGNvbnRleHQubmV4dCA9IGRlbGVnYXRlLm5leHRMb2M7XG5cbiAgICAgIC8vIElmIGNvbnRleHQubWV0aG9kIHdhcyBcInRocm93XCIgYnV0IHRoZSBkZWxlZ2F0ZSBoYW5kbGVkIHRoZVxuICAgICAgLy8gZXhjZXB0aW9uLCBsZXQgdGhlIG91dGVyIGdlbmVyYXRvciBwcm9jZWVkIG5vcm1hbGx5LiBJZlxuICAgICAgLy8gY29udGV4dC5tZXRob2Qgd2FzIFwibmV4dFwiLCBmb3JnZXQgY29udGV4dC5hcmcgc2luY2UgaXQgaGFzIGJlZW5cbiAgICAgIC8vIFwiY29uc3VtZWRcIiBieSB0aGUgZGVsZWdhdGUgaXRlcmF0b3IuIElmIGNvbnRleHQubWV0aG9kIHdhc1xuICAgICAgLy8gXCJyZXR1cm5cIiwgYWxsb3cgdGhlIG9yaWdpbmFsIC5yZXR1cm4gY2FsbCB0byBjb250aW51ZSBpbiB0aGVcbiAgICAgIC8vIG91dGVyIGdlbmVyYXRvci5cbiAgICAgIGlmIChjb250ZXh0Lm1ldGhvZCAhPT0gXCJyZXR1cm5cIikge1xuICAgICAgICBjb250ZXh0Lm1ldGhvZCA9IFwibmV4dFwiO1xuICAgICAgICBjb250ZXh0LmFyZyA9IHVuZGVmaW5lZDtcbiAgICAgIH1cblxuICAgIH0gZWxzZSB7XG4gICAgICAvLyBSZS15aWVsZCB0aGUgcmVzdWx0IHJldHVybmVkIGJ5IHRoZSBkZWxlZ2F0ZSBtZXRob2QuXG4gICAgICByZXR1cm4gaW5mbztcbiAgICB9XG5cbiAgICAvLyBUaGUgZGVsZWdhdGUgaXRlcmF0b3IgaXMgZmluaXNoZWQsIHNvIGZvcmdldCBpdCBhbmQgY29udGludWUgd2l0aFxuICAgIC8vIHRoZSBvdXRlciBnZW5lcmF0b3IuXG4gICAgY29udGV4dC5kZWxlZ2F0ZSA9IG51bGw7XG4gICAgcmV0dXJuIENvbnRpbnVlU2VudGluZWw7XG4gIH1cblxuICAvLyBEZWZpbmUgR2VuZXJhdG9yLnByb3RvdHlwZS57bmV4dCx0aHJvdyxyZXR1cm59IGluIHRlcm1zIG9mIHRoZVxuICAvLyB1bmlmaWVkIC5faW52b2tlIGhlbHBlciBtZXRob2QuXG4gIGRlZmluZUl0ZXJhdG9yTWV0aG9kcyhHcCk7XG5cbiAgZGVmaW5lKEdwLCB0b1N0cmluZ1RhZ1N5bWJvbCwgXCJHZW5lcmF0b3JcIik7XG5cbiAgLy8gQSBHZW5lcmF0b3Igc2hvdWxkIGFsd2F5cyByZXR1cm4gaXRzZWxmIGFzIHRoZSBpdGVyYXRvciBvYmplY3Qgd2hlbiB0aGVcbiAgLy8gQEBpdGVyYXRvciBmdW5jdGlvbiBpcyBjYWxsZWQgb24gaXQuIFNvbWUgYnJvd3NlcnMnIGltcGxlbWVudGF0aW9ucyBvZiB0aGVcbiAgLy8gaXRlcmF0b3IgcHJvdG90eXBlIGNoYWluIGluY29ycmVjdGx5IGltcGxlbWVudCB0aGlzLCBjYXVzaW5nIHRoZSBHZW5lcmF0b3JcbiAgLy8gb2JqZWN0IHRvIG5vdCBiZSByZXR1cm5lZCBmcm9tIHRoaXMgY2FsbC4gVGhpcyBlbnN1cmVzIHRoYXQgZG9lc24ndCBoYXBwZW4uXG4gIC8vIFNlZSBodHRwczovL2dpdGh1Yi5jb20vZmFjZWJvb2svcmVnZW5lcmF0b3IvaXNzdWVzLzI3NCBmb3IgbW9yZSBkZXRhaWxzLlxuICBHcFtpdGVyYXRvclN5bWJvbF0gPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcztcbiAgfTtcblxuICBHcC50b1N0cmluZyA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBcIltvYmplY3QgR2VuZXJhdG9yXVwiO1xuICB9O1xuXG4gIGZ1bmN0aW9uIHB1c2hUcnlFbnRyeShsb2NzKSB7XG4gICAgdmFyIGVudHJ5ID0geyB0cnlMb2M6IGxvY3NbMF0gfTtcblxuICAgIGlmICgxIGluIGxvY3MpIHtcbiAgICAgIGVudHJ5LmNhdGNoTG9jID0gbG9jc1sxXTtcbiAgICB9XG5cbiAgICBpZiAoMiBpbiBsb2NzKSB7XG4gICAgICBlbnRyeS5maW5hbGx5TG9jID0gbG9jc1syXTtcbiAgICAgIGVudHJ5LmFmdGVyTG9jID0gbG9jc1szXTtcbiAgICB9XG5cbiAgICB0aGlzLnRyeUVudHJpZXMucHVzaChlbnRyeSk7XG4gIH1cblxuICBmdW5jdGlvbiByZXNldFRyeUVudHJ5KGVudHJ5KSB7XG4gICAgdmFyIHJlY29yZCA9IGVudHJ5LmNvbXBsZXRpb24gfHwge307XG4gICAgcmVjb3JkLnR5cGUgPSBcIm5vcm1hbFwiO1xuICAgIGRlbGV0ZSByZWNvcmQuYXJnO1xuICAgIGVudHJ5LmNvbXBsZXRpb24gPSByZWNvcmQ7XG4gIH1cblxuICBmdW5jdGlvbiBDb250ZXh0KHRyeUxvY3NMaXN0KSB7XG4gICAgLy8gVGhlIHJvb3QgZW50cnkgb2JqZWN0IChlZmZlY3RpdmVseSBhIHRyeSBzdGF0ZW1lbnQgd2l0aG91dCBhIGNhdGNoXG4gICAgLy8gb3IgYSBmaW5hbGx5IGJsb2NrKSBnaXZlcyB1cyBhIHBsYWNlIHRvIHN0b3JlIHZhbHVlcyB0aHJvd24gZnJvbVxuICAgIC8vIGxvY2F0aW9ucyB3aGVyZSB0aGVyZSBpcyBubyBlbmNsb3NpbmcgdHJ5IHN0YXRlbWVudC5cbiAgICB0aGlzLnRyeUVudHJpZXMgPSBbeyB0cnlMb2M6IFwicm9vdFwiIH1dO1xuICAgIHRyeUxvY3NMaXN0LmZvckVhY2gocHVzaFRyeUVudHJ5LCB0aGlzKTtcbiAgICB0aGlzLnJlc2V0KHRydWUpO1xuICB9XG5cbiAgZXhwb3J0cy5rZXlzID0gZnVuY3Rpb24ob2JqZWN0KSB7XG4gICAgdmFyIGtleXMgPSBbXTtcbiAgICBmb3IgKHZhciBrZXkgaW4gb2JqZWN0KSB7XG4gICAgICBrZXlzLnB1c2goa2V5KTtcbiAgICB9XG4gICAga2V5cy5yZXZlcnNlKCk7XG5cbiAgICAvLyBSYXRoZXIgdGhhbiByZXR1cm5pbmcgYW4gb2JqZWN0IHdpdGggYSBuZXh0IG1ldGhvZCwgd2Uga2VlcFxuICAgIC8vIHRoaW5ncyBzaW1wbGUgYW5kIHJldHVybiB0aGUgbmV4dCBmdW5jdGlvbiBpdHNlbGYuXG4gICAgcmV0dXJuIGZ1bmN0aW9uIG5leHQoKSB7XG4gICAgICB3aGlsZSAoa2V5cy5sZW5ndGgpIHtcbiAgICAgICAgdmFyIGtleSA9IGtleXMucG9wKCk7XG4gICAgICAgIGlmIChrZXkgaW4gb2JqZWN0KSB7XG4gICAgICAgICAgbmV4dC52YWx1ZSA9IGtleTtcbiAgICAgICAgICBuZXh0LmRvbmUgPSBmYWxzZTtcbiAgICAgICAgICByZXR1cm4gbmV4dDtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvLyBUbyBhdm9pZCBjcmVhdGluZyBhbiBhZGRpdGlvbmFsIG9iamVjdCwgd2UganVzdCBoYW5nIHRoZSAudmFsdWVcbiAgICAgIC8vIGFuZCAuZG9uZSBwcm9wZXJ0aWVzIG9mZiB0aGUgbmV4dCBmdW5jdGlvbiBvYmplY3QgaXRzZWxmLiBUaGlzXG4gICAgICAvLyBhbHNvIGVuc3VyZXMgdGhhdCB0aGUgbWluaWZpZXIgd2lsbCBub3QgYW5vbnltaXplIHRoZSBmdW5jdGlvbi5cbiAgICAgIG5leHQuZG9uZSA9IHRydWU7XG4gICAgICByZXR1cm4gbmV4dDtcbiAgICB9O1xuICB9O1xuXG4gIGZ1bmN0aW9uIHZhbHVlcyhpdGVyYWJsZSkge1xuICAgIGlmIChpdGVyYWJsZSkge1xuICAgICAgdmFyIGl0ZXJhdG9yTWV0aG9kID0gaXRlcmFibGVbaXRlcmF0b3JTeW1ib2xdO1xuICAgICAgaWYgKGl0ZXJhdG9yTWV0aG9kKSB7XG4gICAgICAgIHJldHVybiBpdGVyYXRvck1ldGhvZC5jYWxsKGl0ZXJhYmxlKTtcbiAgICAgIH1cblxuICAgICAgaWYgKHR5cGVvZiBpdGVyYWJsZS5uZXh0ID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgcmV0dXJuIGl0ZXJhYmxlO1xuICAgICAgfVxuXG4gICAgICBpZiAoIWlzTmFOKGl0ZXJhYmxlLmxlbmd0aCkpIHtcbiAgICAgICAgdmFyIGkgPSAtMSwgbmV4dCA9IGZ1bmN0aW9uIG5leHQoKSB7XG4gICAgICAgICAgd2hpbGUgKCsraSA8IGl0ZXJhYmxlLmxlbmd0aCkge1xuICAgICAgICAgICAgaWYgKGhhc093bi5jYWxsKGl0ZXJhYmxlLCBpKSkge1xuICAgICAgICAgICAgICBuZXh0LnZhbHVlID0gaXRlcmFibGVbaV07XG4gICAgICAgICAgICAgIG5leHQuZG9uZSA9IGZhbHNlO1xuICAgICAgICAgICAgICByZXR1cm4gbmV4dDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG5cbiAgICAgICAgICBuZXh0LnZhbHVlID0gdW5kZWZpbmVkO1xuICAgICAgICAgIG5leHQuZG9uZSA9IHRydWU7XG5cbiAgICAgICAgICByZXR1cm4gbmV4dDtcbiAgICAgICAgfTtcblxuICAgICAgICByZXR1cm4gbmV4dC5uZXh0ID0gbmV4dDtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBSZXR1cm4gYW4gaXRlcmF0b3Igd2l0aCBubyB2YWx1ZXMuXG4gICAgcmV0dXJuIHsgbmV4dDogZG9uZVJlc3VsdCB9O1xuICB9XG4gIGV4cG9ydHMudmFsdWVzID0gdmFsdWVzO1xuXG4gIGZ1bmN0aW9uIGRvbmVSZXN1bHQoKSB7XG4gICAgcmV0dXJuIHsgdmFsdWU6IHVuZGVmaW5lZCwgZG9uZTogdHJ1ZSB9O1xuICB9XG5cbiAgQ29udGV4dC5wcm90b3R5cGUgPSB7XG4gICAgY29uc3RydWN0b3I6IENvbnRleHQsXG5cbiAgICByZXNldDogZnVuY3Rpb24oc2tpcFRlbXBSZXNldCkge1xuICAgICAgdGhpcy5wcmV2ID0gMDtcbiAgICAgIHRoaXMubmV4dCA9IDA7XG4gICAgICAvLyBSZXNldHRpbmcgY29udGV4dC5fc2VudCBmb3IgbGVnYWN5IHN1cHBvcnQgb2YgQmFiZWwnc1xuICAgICAgLy8gZnVuY3Rpb24uc2VudCBpbXBsZW1lbnRhdGlvbi5cbiAgICAgIHRoaXMuc2VudCA9IHRoaXMuX3NlbnQgPSB1bmRlZmluZWQ7XG4gICAgICB0aGlzLmRvbmUgPSBmYWxzZTtcbiAgICAgIHRoaXMuZGVsZWdhdGUgPSBudWxsO1xuXG4gICAgICB0aGlzLm1ldGhvZCA9IFwibmV4dFwiO1xuICAgICAgdGhpcy5hcmcgPSB1bmRlZmluZWQ7XG5cbiAgICAgIHRoaXMudHJ5RW50cmllcy5mb3JFYWNoKHJlc2V0VHJ5RW50cnkpO1xuXG4gICAgICBpZiAoIXNraXBUZW1wUmVzZXQpIHtcbiAgICAgICAgZm9yICh2YXIgbmFtZSBpbiB0aGlzKSB7XG4gICAgICAgICAgLy8gTm90IHN1cmUgYWJvdXQgdGhlIG9wdGltYWwgb3JkZXIgb2YgdGhlc2UgY29uZGl0aW9uczpcbiAgICAgICAgICBpZiAobmFtZS5jaGFyQXQoMCkgPT09IFwidFwiICYmXG4gICAgICAgICAgICAgIGhhc093bi5jYWxsKHRoaXMsIG5hbWUpICYmXG4gICAgICAgICAgICAgICFpc05hTigrbmFtZS5zbGljZSgxKSkpIHtcbiAgICAgICAgICAgIHRoaXNbbmFtZV0gPSB1bmRlZmluZWQ7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSxcblxuICAgIHN0b3A6IGZ1bmN0aW9uKCkge1xuICAgICAgdGhpcy5kb25lID0gdHJ1ZTtcblxuICAgICAgdmFyIHJvb3RFbnRyeSA9IHRoaXMudHJ5RW50cmllc1swXTtcbiAgICAgIHZhciByb290UmVjb3JkID0gcm9vdEVudHJ5LmNvbXBsZXRpb247XG4gICAgICBpZiAocm9vdFJlY29yZC50eXBlID09PSBcInRocm93XCIpIHtcbiAgICAgICAgdGhyb3cgcm9vdFJlY29yZC5hcmc7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB0aGlzLnJ2YWw7XG4gICAgfSxcblxuICAgIGRpc3BhdGNoRXhjZXB0aW9uOiBmdW5jdGlvbihleGNlcHRpb24pIHtcbiAgICAgIGlmICh0aGlzLmRvbmUpIHtcbiAgICAgICAgdGhyb3cgZXhjZXB0aW9uO1xuICAgICAgfVxuXG4gICAgICB2YXIgY29udGV4dCA9IHRoaXM7XG4gICAgICBmdW5jdGlvbiBoYW5kbGUobG9jLCBjYXVnaHQpIHtcbiAgICAgICAgcmVjb3JkLnR5cGUgPSBcInRocm93XCI7XG4gICAgICAgIHJlY29yZC5hcmcgPSBleGNlcHRpb247XG4gICAgICAgIGNvbnRleHQubmV4dCA9IGxvYztcblxuICAgICAgICBpZiAoY2F1Z2h0KSB7XG4gICAgICAgICAgLy8gSWYgdGhlIGRpc3BhdGNoZWQgZXhjZXB0aW9uIHdhcyBjYXVnaHQgYnkgYSBjYXRjaCBibG9jayxcbiAgICAgICAgICAvLyB0aGVuIGxldCB0aGF0IGNhdGNoIGJsb2NrIGhhbmRsZSB0aGUgZXhjZXB0aW9uIG5vcm1hbGx5LlxuICAgICAgICAgIGNvbnRleHQubWV0aG9kID0gXCJuZXh0XCI7XG4gICAgICAgICAgY29udGV4dC5hcmcgPSB1bmRlZmluZWQ7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gISEgY2F1Z2h0O1xuICAgICAgfVxuXG4gICAgICBmb3IgKHZhciBpID0gdGhpcy50cnlFbnRyaWVzLmxlbmd0aCAtIDE7IGkgPj0gMDsgLS1pKSB7XG4gICAgICAgIHZhciBlbnRyeSA9IHRoaXMudHJ5RW50cmllc1tpXTtcbiAgICAgICAgdmFyIHJlY29yZCA9IGVudHJ5LmNvbXBsZXRpb247XG5cbiAgICAgICAgaWYgKGVudHJ5LnRyeUxvYyA9PT0gXCJyb290XCIpIHtcbiAgICAgICAgICAvLyBFeGNlcHRpb24gdGhyb3duIG91dHNpZGUgb2YgYW55IHRyeSBibG9jayB0aGF0IGNvdWxkIGhhbmRsZVxuICAgICAgICAgIC8vIGl0LCBzbyBzZXQgdGhlIGNvbXBsZXRpb24gdmFsdWUgb2YgdGhlIGVudGlyZSBmdW5jdGlvbiB0b1xuICAgICAgICAgIC8vIHRocm93IHRoZSBleGNlcHRpb24uXG4gICAgICAgICAgcmV0dXJuIGhhbmRsZShcImVuZFwiKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChlbnRyeS50cnlMb2MgPD0gdGhpcy5wcmV2KSB7XG4gICAgICAgICAgdmFyIGhhc0NhdGNoID0gaGFzT3duLmNhbGwoZW50cnksIFwiY2F0Y2hMb2NcIik7XG4gICAgICAgICAgdmFyIGhhc0ZpbmFsbHkgPSBoYXNPd24uY2FsbChlbnRyeSwgXCJmaW5hbGx5TG9jXCIpO1xuXG4gICAgICAgICAgaWYgKGhhc0NhdGNoICYmIGhhc0ZpbmFsbHkpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnByZXYgPCBlbnRyeS5jYXRjaExvYykge1xuICAgICAgICAgICAgICByZXR1cm4gaGFuZGxlKGVudHJ5LmNhdGNoTG9jLCB0cnVlKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5wcmV2IDwgZW50cnkuZmluYWxseUxvYykge1xuICAgICAgICAgICAgICByZXR1cm4gaGFuZGxlKGVudHJ5LmZpbmFsbHlMb2MpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgfSBlbHNlIGlmIChoYXNDYXRjaCkge1xuICAgICAgICAgICAgaWYgKHRoaXMucHJldiA8IGVudHJ5LmNhdGNoTG9jKSB7XG4gICAgICAgICAgICAgIHJldHVybiBoYW5kbGUoZW50cnkuY2F0Y2hMb2MsIHRydWUpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgfSBlbHNlIGlmIChoYXNGaW5hbGx5KSB7XG4gICAgICAgICAgICBpZiAodGhpcy5wcmV2IDwgZW50cnkuZmluYWxseUxvYykge1xuICAgICAgICAgICAgICByZXR1cm4gaGFuZGxlKGVudHJ5LmZpbmFsbHlMb2MpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcInRyeSBzdGF0ZW1lbnQgd2l0aG91dCBjYXRjaCBvciBmaW5hbGx5XCIpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0sXG5cbiAgICBhYnJ1cHQ6IGZ1bmN0aW9uKHR5cGUsIGFyZykge1xuICAgICAgZm9yICh2YXIgaSA9IHRoaXMudHJ5RW50cmllcy5sZW5ndGggLSAxOyBpID49IDA7IC0taSkge1xuICAgICAgICB2YXIgZW50cnkgPSB0aGlzLnRyeUVudHJpZXNbaV07XG4gICAgICAgIGlmIChlbnRyeS50cnlMb2MgPD0gdGhpcy5wcmV2ICYmXG4gICAgICAgICAgICBoYXNPd24uY2FsbChlbnRyeSwgXCJmaW5hbGx5TG9jXCIpICYmXG4gICAgICAgICAgICB0aGlzLnByZXYgPCBlbnRyeS5maW5hbGx5TG9jKSB7XG4gICAgICAgICAgdmFyIGZpbmFsbHlFbnRyeSA9IGVudHJ5O1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmIChmaW5hbGx5RW50cnkgJiZcbiAgICAgICAgICAodHlwZSA9PT0gXCJicmVha1wiIHx8XG4gICAgICAgICAgIHR5cGUgPT09IFwiY29udGludWVcIikgJiZcbiAgICAgICAgICBmaW5hbGx5RW50cnkudHJ5TG9jIDw9IGFyZyAmJlxuICAgICAgICAgIGFyZyA8PSBmaW5hbGx5RW50cnkuZmluYWxseUxvYykge1xuICAgICAgICAvLyBJZ25vcmUgdGhlIGZpbmFsbHkgZW50cnkgaWYgY29udHJvbCBpcyBub3QganVtcGluZyB0byBhXG4gICAgICAgIC8vIGxvY2F0aW9uIG91dHNpZGUgdGhlIHRyeS9jYXRjaCBibG9jay5cbiAgICAgICAgZmluYWxseUVudHJ5ID0gbnVsbDtcbiAgICAgIH1cblxuICAgICAgdmFyIHJlY29yZCA9IGZpbmFsbHlFbnRyeSA/IGZpbmFsbHlFbnRyeS5jb21wbGV0aW9uIDoge307XG4gICAgICByZWNvcmQudHlwZSA9IHR5cGU7XG4gICAgICByZWNvcmQuYXJnID0gYXJnO1xuXG4gICAgICBpZiAoZmluYWxseUVudHJ5KSB7XG4gICAgICAgIHRoaXMubWV0aG9kID0gXCJuZXh0XCI7XG4gICAgICAgIHRoaXMubmV4dCA9IGZpbmFsbHlFbnRyeS5maW5hbGx5TG9jO1xuICAgICAgICByZXR1cm4gQ29udGludWVTZW50aW5lbDtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHRoaXMuY29tcGxldGUocmVjb3JkKTtcbiAgICB9LFxuXG4gICAgY29tcGxldGU6IGZ1bmN0aW9uKHJlY29yZCwgYWZ0ZXJMb2MpIHtcbiAgICAgIGlmIChyZWNvcmQudHlwZSA9PT0gXCJ0aHJvd1wiKSB7XG4gICAgICAgIHRocm93IHJlY29yZC5hcmc7XG4gICAgICB9XG5cbiAgICAgIGlmIChyZWNvcmQudHlwZSA9PT0gXCJicmVha1wiIHx8XG4gICAgICAgICAgcmVjb3JkLnR5cGUgPT09IFwiY29udGludWVcIikge1xuICAgICAgICB0aGlzLm5leHQgPSByZWNvcmQuYXJnO1xuICAgICAgfSBlbHNlIGlmIChyZWNvcmQudHlwZSA9PT0gXCJyZXR1cm5cIikge1xuICAgICAgICB0aGlzLnJ2YWwgPSB0aGlzLmFyZyA9IHJlY29yZC5hcmc7XG4gICAgICAgIHRoaXMubWV0aG9kID0gXCJyZXR1cm5cIjtcbiAgICAgICAgdGhpcy5uZXh0ID0gXCJlbmRcIjtcbiAgICAgIH0gZWxzZSBpZiAocmVjb3JkLnR5cGUgPT09IFwibm9ybWFsXCIgJiYgYWZ0ZXJMb2MpIHtcbiAgICAgICAgdGhpcy5uZXh0ID0gYWZ0ZXJMb2M7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBDb250aW51ZVNlbnRpbmVsO1xuICAgIH0sXG5cbiAgICBmaW5pc2g6IGZ1bmN0aW9uKGZpbmFsbHlMb2MpIHtcbiAgICAgIGZvciAodmFyIGkgPSB0aGlzLnRyeUVudHJpZXMubGVuZ3RoIC0gMTsgaSA+PSAwOyAtLWkpIHtcbiAgICAgICAgdmFyIGVudHJ5ID0gdGhpcy50cnlFbnRyaWVzW2ldO1xuICAgICAgICBpZiAoZW50cnkuZmluYWxseUxvYyA9PT0gZmluYWxseUxvYykge1xuICAgICAgICAgIHRoaXMuY29tcGxldGUoZW50cnkuY29tcGxldGlvbiwgZW50cnkuYWZ0ZXJMb2MpO1xuICAgICAgICAgIHJlc2V0VHJ5RW50cnkoZW50cnkpO1xuICAgICAgICAgIHJldHVybiBDb250aW51ZVNlbnRpbmVsO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSxcblxuICAgIFwiY2F0Y2hcIjogZnVuY3Rpb24odHJ5TG9jKSB7XG4gICAgICBmb3IgKHZhciBpID0gdGhpcy50cnlFbnRyaWVzLmxlbmd0aCAtIDE7IGkgPj0gMDsgLS1pKSB7XG4gICAgICAgIHZhciBlbnRyeSA9IHRoaXMudHJ5RW50cmllc1tpXTtcbiAgICAgICAgaWYgKGVudHJ5LnRyeUxvYyA9PT0gdHJ5TG9jKSB7XG4gICAgICAgICAgdmFyIHJlY29yZCA9IGVudHJ5LmNvbXBsZXRpb247XG4gICAgICAgICAgaWYgKHJlY29yZC50eXBlID09PSBcInRocm93XCIpIHtcbiAgICAgICAgICAgIHZhciB0aHJvd24gPSByZWNvcmQuYXJnO1xuICAgICAgICAgICAgcmVzZXRUcnlFbnRyeShlbnRyeSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybiB0aHJvd247XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLy8gVGhlIGNvbnRleHQuY2F0Y2ggbWV0aG9kIG11c3Qgb25seSBiZSBjYWxsZWQgd2l0aCBhIGxvY2F0aW9uXG4gICAgICAvLyBhcmd1bWVudCB0aGF0IGNvcnJlc3BvbmRzIHRvIGEga25vd24gY2F0Y2ggYmxvY2suXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJpbGxlZ2FsIGNhdGNoIGF0dGVtcHRcIik7XG4gICAgfSxcblxuICAgIGRlbGVnYXRlWWllbGQ6IGZ1bmN0aW9uKGl0ZXJhYmxlLCByZXN1bHROYW1lLCBuZXh0TG9jKSB7XG4gICAgICB0aGlzLmRlbGVnYXRlID0ge1xuICAgICAgICBpdGVyYXRvcjogdmFsdWVzKGl0ZXJhYmxlKSxcbiAgICAgICAgcmVzdWx0TmFtZTogcmVzdWx0TmFtZSxcbiAgICAgICAgbmV4dExvYzogbmV4dExvY1xuICAgICAgfTtcblxuICAgICAgaWYgKHRoaXMubWV0aG9kID09PSBcIm5leHRcIikge1xuICAgICAgICAvLyBEZWxpYmVyYXRlbHkgZm9yZ2V0IHRoZSBsYXN0IHNlbnQgdmFsdWUgc28gdGhhdCB3ZSBkb24ndFxuICAgICAgICAvLyBhY2NpZGVudGFsbHkgcGFzcyBpdCBvbiB0byB0aGUgZGVsZWdhdGUuXG4gICAgICAgIHRoaXMuYXJnID0gdW5kZWZpbmVkO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gQ29udGludWVTZW50aW5lbDtcbiAgICB9XG4gIH07XG5cbiAgLy8gUmVnYXJkbGVzcyBvZiB3aGV0aGVyIHRoaXMgc2NyaXB0IGlzIGV4ZWN1dGluZyBhcyBhIENvbW1vbkpTIG1vZHVsZVxuICAvLyBvciBub3QsIHJldHVybiB0aGUgcnVudGltZSBvYmplY3Qgc28gdGhhdCB3ZSBjYW4gZGVjbGFyZSB0aGUgdmFyaWFibGVcbiAgLy8gcmVnZW5lcmF0b3JSdW50aW1lIGluIHRoZSBvdXRlciBzY29wZSwgd2hpY2ggYWxsb3dzIHRoaXMgbW9kdWxlIHRvIGJlXG4gIC8vIGluamVjdGVkIGVhc2lseSBieSBgYmluL3JlZ2VuZXJhdG9yIC0taW5jbHVkZS1ydW50aW1lIHNjcmlwdC5qc2AuXG4gIHJldHVybiBleHBvcnRzO1xuXG59KFxuICAvLyBJZiB0aGlzIHNjcmlwdCBpcyBleGVjdXRpbmcgYXMgYSBDb21tb25KUyBtb2R1bGUsIHVzZSBtb2R1bGUuZXhwb3J0c1xuICAvLyBhcyB0aGUgcmVnZW5lcmF0b3JSdW50aW1lIG5hbWVzcGFjZS4gT3RoZXJ3aXNlIGNyZWF0ZSBhIG5ldyBlbXB0eVxuICAvLyBvYmplY3QuIEVpdGhlciB3YXksIHRoZSByZXN1bHRpbmcgb2JqZWN0IHdpbGwgYmUgdXNlZCB0byBpbml0aWFsaXplXG4gIC8vIHRoZSByZWdlbmVyYXRvclJ1bnRpbWUgdmFyaWFibGUgYXQgdGhlIHRvcCBvZiB0aGlzIGZpbGUuXG4gIHR5cGVvZiBtb2R1bGUgPT09IFwib2JqZWN0XCIgPyBtb2R1bGUuZXhwb3J0cyA6IHt9XG4pKTtcblxudHJ5IHtcbiAgcmVnZW5lcmF0b3JSdW50aW1lID0gcnVudGltZTtcbn0gY2F0Y2ggKGFjY2lkZW50YWxTdHJpY3RNb2RlKSB7XG4gIC8vIFRoaXMgbW9kdWxlIHNob3VsZCBub3QgYmUgcnVubmluZyBpbiBzdHJpY3QgbW9kZSwgc28gdGhlIGFib3ZlXG4gIC8vIGFzc2lnbm1lbnQgc2hvdWxkIGFsd2F5cyB3b3JrIHVubGVzcyBzb21ldGhpbmcgaXMgbWlzY29uZmlndXJlZC4gSnVzdFxuICAvLyBpbiBjYXNlIHJ1bnRpbWUuanMgYWNjaWRlbnRhbGx5IHJ1bnMgaW4gc3RyaWN0IG1vZGUsIHdlIGNhbiBlc2NhcGVcbiAgLy8gc3RyaWN0IG1vZGUgdXNpbmcgYSBnbG9iYWwgRnVuY3Rpb24gY2FsbC4gVGhpcyBjb3VsZCBjb25jZWl2YWJseSBmYWlsXG4gIC8vIGlmIGEgQ29udGVudCBTZWN1cml0eSBQb2xpY3kgZm9yYmlkcyB1c2luZyBGdW5jdGlvbiwgYnV0IGluIHRoYXQgY2FzZVxuICAvLyB0aGUgcHJvcGVyIHNvbHV0aW9uIGlzIHRvIGZpeCB0aGUgYWNjaWRlbnRhbCBzdHJpY3QgbW9kZSBwcm9ibGVtLiBJZlxuICAvLyB5b3UndmUgbWlzY29uZmlndXJlZCB5b3VyIGJ1bmRsZXIgdG8gZm9yY2Ugc3RyaWN0IG1vZGUgYW5kIGFwcGxpZWQgYVxuICAvLyBDU1AgdG8gZm9yYmlkIEZ1bmN0aW9uLCBhbmQgeW91J3JlIG5vdCB3aWxsaW5nIHRvIGZpeCBlaXRoZXIgb2YgdGhvc2VcbiAgLy8gcHJvYmxlbXMsIHBsZWFzZSBkZXRhaWwgeW91ciB1bmlxdWUgcHJlZGljYW1lbnQgaW4gYSBHaXRIdWIgaXNzdWUuXG4gIEZ1bmN0aW9uKFwiclwiLCBcInJlZ2VuZXJhdG9yUnVudGltZSA9IHJcIikocnVudGltZSk7XG59XG4iLCJ2YXIgbWFwID0ge1xuXHRcIi4vX190ZXN0c19fL2FjdGlvbi9wYWdlLnRlc3QuanNcIjogW1xuXHRcdDM2OSxcblx0XHQzNjlcblx0XSxcblx0XCIuL19fdGVzdHNfXy9jYXRhbG9nLnRlc3QuanNcIjogW1xuXHRcdDcxNixcblx0XHQ3MTZcblx0XSxcblx0XCIuL19fdGVzdHNfXy9jYXRhbG9nL3BhZ2UudGVzdC5qc1wiOiBbXG5cdFx0MzY4LFxuXHRcdDM2OFxuXHRdLFxuXHRcIi4vX190ZXN0c19fL21haW5QYWdlLnRlc3QuanNcIjogW1xuXHRcdDQ4MCxcblx0XHQ0ODBcblx0XSxcblx0XCIuL19fdGVzdHNfXy9vcmRlci50ZXN0LmpzXCI6IFtcblx0XHQ4MDYsXG5cdFx0ODA2XG5cdF0sXG5cdFwiLi9fX3Rlc3RzX18vb3JkZXJEb25lLnRlc3QuanNcIjogW1xuXHRcdDYyNCxcblx0XHQ2MjRcblx0XSxcblx0XCIuL19fdGVzdHNfXy9wcm9kdWN0L3BhZ2UudGVzdC5qc1wiOiBbXG5cdFx0MzI5LFxuXHRcdDMyOVxuXHRdLFxuXHRcIi4vYWN0aW9uL3BhZ2UuanNcIjogW1xuXHRcdDcyMixcblx0XHQ3MjJcblx0XSxcblx0XCIuL2NhdGFsb2cuanNcIjogW1xuXHRcdDg3LFxuXHRcdDg3XG5cdF0sXG5cdFwiLi9jYXRhbG9nL3BhZ2UuanNcIjogW1xuXHRcdDc2Mixcblx0XHQ3NjJcblx0XSxcblx0XCIuL21haW5QYWdlLmpzXCI6IFtcblx0XHQ0MjksXG5cdFx0NDI5XG5cdF0sXG5cdFwiLi9vcmRlci5qc1wiOiBbXG5cdFx0ODgwLFxuXHRcdDg4MFxuXHRdLFxuXHRcIi4vb3JkZXJEb25lLmpzXCI6IFtcblx0XHQ4NzksXG5cdFx0ODc5XG5cdF0sXG5cdFwiLi9wcm9kdWN0L3BhZ2UuanNcIjogW1xuXHRcdDMwLFxuXHRcdDMwXG5cdF1cbn07XG5mdW5jdGlvbiB3ZWJwYWNrQXN5bmNDb250ZXh0KHJlcSkge1xuXHRpZighX193ZWJwYWNrX3JlcXVpcmVfXy5vKG1hcCwgcmVxKSkge1xuXHRcdHJldHVybiBQcm9taXNlLnJlc29sdmUoKS50aGVuKCgpID0+IHtcblx0XHRcdHZhciBlID0gbmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIiArIHJlcSArIFwiJ1wiKTtcblx0XHRcdGUuY29kZSA9ICdNT0RVTEVfTk9UX0ZPVU5EJztcblx0XHRcdHRocm93IGU7XG5cdFx0fSk7XG5cdH1cblxuXHR2YXIgaWRzID0gbWFwW3JlcV0sIGlkID0gaWRzWzBdO1xuXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXy5lKGlkc1sxXSkudGhlbigoKSA9PiB7XG5cdFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oaWQpO1xuXHR9KTtcbn1cbndlYnBhY2tBc3luY0NvbnRleHQua2V5cyA9ICgpID0+IE9iamVjdC5rZXlzKG1hcCk7XG53ZWJwYWNrQXN5bmNDb250ZXh0LmlkID0gMjc3O1xubW9kdWxlLmV4cG9ydHMgPSB3ZWJwYWNrQXN5bmNDb250ZXh0OyIsIi8vIFRoZSBtb2R1bGUgY2FjaGVcbnZhciBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX18gPSB7fTtcblxuLy8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbmZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG5cdGlmKF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF0pIHtcblx0XHRyZXR1cm4gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXS5leHBvcnRzO1xuXHR9XG5cdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG5cdHZhciBtb2R1bGUgPSBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdID0ge1xuXHRcdC8vIG5vIG1vZHVsZS5pZCBuZWVkZWRcblx0XHQvLyBubyBtb2R1bGUubG9hZGVkIG5lZWRlZFxuXHRcdGV4cG9ydHM6IHt9XG5cdH07XG5cblx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG5cdF9fd2VicGFja19tb2R1bGVzX19bbW9kdWxlSWRdKG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG5cdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG5cdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbn1cblxuLy8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbl9fd2VicGFja19yZXF1aXJlX18ubSA9IF9fd2VicGFja19tb2R1bGVzX187XG5cbiIsIi8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb25zIGZvciBoYXJtb255IGV4cG9ydHNcbl9fd2VicGFja19yZXF1aXJlX18uZCA9IChleHBvcnRzLCBkZWZpbml0aW9uKSA9PiB7XG5cdGZvcih2YXIga2V5IGluIGRlZmluaXRpb24pIHtcblx0XHRpZihfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZGVmaW5pdGlvbiwga2V5KSAmJiAhX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIGtleSkpIHtcblx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBrZXksIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBkZWZpbml0aW9uW2tleV0gfSk7XG5cdFx0fVxuXHR9XG59OyIsIl9fd2VicGFja19yZXF1aXJlX18uZiA9IHt9O1xuLy8gVGhpcyBmaWxlIGNvbnRhaW5zIG9ubHkgdGhlIGVudHJ5IGNodW5rLlxuLy8gVGhlIGNodW5rIGxvYWRpbmcgZnVuY3Rpb24gZm9yIGFkZGl0aW9uYWwgY2h1bmtzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLmUgPSAoY2h1bmtJZCkgPT4ge1xuXHRyZXR1cm4gUHJvbWlzZS5hbGwoT2JqZWN0LmtleXMoX193ZWJwYWNrX3JlcXVpcmVfXy5mKS5yZWR1Y2UoKHByb21pc2VzLCBrZXkpID0+IHtcblx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLmZba2V5XShjaHVua0lkLCBwcm9taXNlcyk7XG5cdFx0cmV0dXJuIHByb21pc2VzO1xuXHR9LCBbXSkpO1xufTsiLCIvLyBUaGlzIGZ1bmN0aW9uIGFsbG93IHRvIHJlZmVyZW5jZSBhc3luYyBjaHVua3Ncbl9fd2VicGFja19yZXF1aXJlX18udSA9IChjaHVua0lkKSA9PiB7XG5cdC8vIHJldHVybiB1cmwgZm9yIGZpbGVuYW1lcyBiYXNlZCBvbiB0ZW1wbGF0ZVxuXHRyZXR1cm4gXCJcIiArIGNodW5rSWQgKyBcIi5idW5kbGUuanNcIjtcbn07IiwiX193ZWJwYWNrX3JlcXVpcmVfXy5nID0gKGZ1bmN0aW9uKCkge1xuXHRpZiAodHlwZW9mIGdsb2JhbFRoaXMgPT09ICdvYmplY3QnKSByZXR1cm4gZ2xvYmFsVGhpcztcblx0dHJ5IHtcblx0XHRyZXR1cm4gdGhpcyB8fCBuZXcgRnVuY3Rpb24oJ3JldHVybiB0aGlzJykoKTtcblx0fSBjYXRjaCAoZSkge1xuXHRcdGlmICh0eXBlb2Ygd2luZG93ID09PSAnb2JqZWN0JykgcmV0dXJuIHdpbmRvdztcblx0fVxufSkoKTsiLCJfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSAob2JqLCBwcm9wKSA9PiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBwcm9wKSIsIi8vIGRlZmluZSBfX2VzTW9kdWxlIG9uIGV4cG9ydHNcbl9fd2VicGFja19yZXF1aXJlX18uciA9IChleHBvcnRzKSA9PiB7XG5cdGlmKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC50b1N0cmluZ1RhZykge1xuXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6ICdNb2R1bGUnIH0pO1xuXHR9XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG59OyIsInZhciBzY3JpcHRVcmw7XG5pZiAoX193ZWJwYWNrX3JlcXVpcmVfXy5nLmltcG9ydFNjcmlwdHMpIHNjcmlwdFVybCA9IF9fd2VicGFja19yZXF1aXJlX18uZy5sb2NhdGlvbiArIFwiXCI7XG52YXIgZG9jdW1lbnQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fLmcuZG9jdW1lbnQ7XG5pZiAoIXNjcmlwdFVybCAmJiBkb2N1bWVudCkge1xuXHRpZiAoZG9jdW1lbnQuY3VycmVudFNjcmlwdClcblx0XHRzY3JpcHRVcmwgPSBkb2N1bWVudC5jdXJyZW50U2NyaXB0LnNyY1xuXHRpZiAoIXNjcmlwdFVybCkge1xuXHRcdHZhciBzY3JpcHRzID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJzY3JpcHRcIik7XG5cdFx0aWYoc2NyaXB0cy5sZW5ndGgpIHNjcmlwdFVybCA9IHNjcmlwdHNbc2NyaXB0cy5sZW5ndGggLSAxXS5zcmNcblx0fVxufVxuLy8gV2hlbiBzdXBwb3J0aW5nIGJyb3dzZXJzIHdoZXJlIGFuIGF1dG9tYXRpYyBwdWJsaWNQYXRoIGlzIG5vdCBzdXBwb3J0ZWQgeW91IG11c3Qgc3BlY2lmeSBhbiBvdXRwdXQucHVibGljUGF0aCBtYW51YWxseSB2aWEgY29uZmlndXJhdGlvblxuLy8gb3IgcGFzcyBhbiBlbXB0eSBzdHJpbmcgKFwiXCIpIGFuZCBzZXQgdGhlIF9fd2VicGFja19wdWJsaWNfcGF0aF9fIHZhcmlhYmxlIGZyb20geW91ciBjb2RlIHRvIHVzZSB5b3VyIG93biBsb2dpYy5cbmlmICghc2NyaXB0VXJsKSB0aHJvdyBuZXcgRXJyb3IoXCJBdXRvbWF0aWMgcHVibGljUGF0aCBpcyBub3Qgc3VwcG9ydGVkIGluIHRoaXMgYnJvd3NlclwiKTtcbnNjcmlwdFVybCA9IHNjcmlwdFVybC5yZXBsYWNlKC8jLiokLywgXCJcIikucmVwbGFjZSgvXFw/LiokLywgXCJcIikucmVwbGFjZSgvXFwvW15cXC9dKyQvLCBcIi9cIik7XG5fX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBzY3JpcHRVcmw7IiwiLy8gbm8gYmFzZVVSSVxuXG4vLyBvYmplY3QgdG8gc3RvcmUgbG9hZGVkIGFuZCBsb2FkaW5nIGNodW5rc1xuLy8gdW5kZWZpbmVkID0gY2h1bmsgbm90IGxvYWRlZCwgbnVsbCA9IGNodW5rIHByZWxvYWRlZC9wcmVmZXRjaGVkXG4vLyBQcm9taXNlID0gY2h1bmsgbG9hZGluZywgMCA9IGNodW5rIGxvYWRlZFxudmFyIGluc3RhbGxlZENodW5rcyA9IHtcblx0MTc5OiAwXG59O1xuXG5cbl9fd2VicGFja19yZXF1aXJlX18uZi5qID0gKGNodW5rSWQsIHByb21pc2VzKSA9PiB7XG5cdFx0Ly8gSlNPTlAgY2h1bmsgbG9hZGluZyBmb3IgamF2YXNjcmlwdFxuXHRcdHZhciBpbnN0YWxsZWRDaHVua0RhdGEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fLm8oaW5zdGFsbGVkQ2h1bmtzLCBjaHVua0lkKSA/IGluc3RhbGxlZENodW5rc1tjaHVua0lkXSA6IHVuZGVmaW5lZDtcblx0XHRpZihpbnN0YWxsZWRDaHVua0RhdGEgIT09IDApIHsgLy8gMCBtZWFucyBcImFscmVhZHkgaW5zdGFsbGVkXCIuXG5cblx0XHRcdC8vIGEgUHJvbWlzZSBtZWFucyBcImN1cnJlbnRseSBsb2FkaW5nXCIuXG5cdFx0XHRpZihpbnN0YWxsZWRDaHVua0RhdGEpIHtcblx0XHRcdFx0cHJvbWlzZXMucHVzaChpbnN0YWxsZWRDaHVua0RhdGFbMl0pO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0aWYodHJ1ZSkgeyAvLyBhbGwgY2h1bmtzIGhhdmUgSlNcblx0XHRcdFx0XHQvLyBzZXR1cCBQcm9taXNlIGluIGNodW5rIGNhY2hlXG5cdFx0XHRcdFx0dmFyIHByb21pc2UgPSBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG5cdFx0XHRcdFx0XHRpbnN0YWxsZWRDaHVua0RhdGEgPSBpbnN0YWxsZWRDaHVua3NbY2h1bmtJZF0gPSBbcmVzb2x2ZSwgcmVqZWN0XTtcblx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHRwcm9taXNlcy5wdXNoKGluc3RhbGxlZENodW5rRGF0YVsyXSA9IHByb21pc2UpO1xuXG5cdFx0XHRcdFx0Ly8gc3RhcnQgY2h1bmsgbG9hZGluZ1xuXHRcdFx0XHRcdHZhciB1cmwgPSBfX3dlYnBhY2tfcmVxdWlyZV9fLnAgKyBfX3dlYnBhY2tfcmVxdWlyZV9fLnUoY2h1bmtJZCk7XG5cdFx0XHRcdFx0Ly8gY3JlYXRlIGVycm9yIGJlZm9yZSBzdGFjayB1bndvdW5kIHRvIGdldCB1c2VmdWwgc3RhY2t0cmFjZSBsYXRlclxuXHRcdFx0XHRcdHZhciBlcnJvciA9IG5ldyBFcnJvcigpO1xuXHRcdFx0XHRcdHZhciBsb2FkaW5nRW5kZWQgPSAoZXZlbnQpID0+IHtcblx0XHRcdFx0XHRcdGlmKF9fd2VicGFja19yZXF1aXJlX18ubyhpbnN0YWxsZWRDaHVua3MsIGNodW5rSWQpKSB7XG5cdFx0XHRcdFx0XHRcdGluc3RhbGxlZENodW5rRGF0YSA9IGluc3RhbGxlZENodW5rc1tjaHVua0lkXTtcblx0XHRcdFx0XHRcdFx0aWYoaW5zdGFsbGVkQ2h1bmtEYXRhICE9PSAwKSBpbnN0YWxsZWRDaHVua3NbY2h1bmtJZF0gPSB1bmRlZmluZWQ7XG5cdFx0XHRcdFx0XHRcdGlmKGluc3RhbGxlZENodW5rRGF0YSkge1xuXHRcdFx0XHRcdFx0XHRcdHZhciBlcnJvclR5cGUgPSBldmVudCAmJiAoZXZlbnQudHlwZSA9PT0gJ2xvYWQnID8gJ21pc3NpbmcnIDogZXZlbnQudHlwZSk7XG5cdFx0XHRcdFx0XHRcdFx0dmFyIHJlYWxTcmMgPSBldmVudCAmJiBldmVudC50YXJnZXQgJiYgZXZlbnQudGFyZ2V0LnNyYztcblx0XHRcdFx0XHRcdFx0XHRlcnJvci5tZXNzYWdlID0gJ0xvYWRpbmcgY2h1bmsgJyArIGNodW5rSWQgKyAnIGZhaWxlZC5cXG4oJyArIGVycm9yVHlwZSArICc6ICcgKyByZWFsU3JjICsgJyknO1xuXHRcdFx0XHRcdFx0XHRcdGVycm9yLm5hbWUgPSAnQ2h1bmtMb2FkRXJyb3InO1xuXHRcdFx0XHRcdFx0XHRcdGVycm9yLnR5cGUgPSBlcnJvclR5cGU7XG5cdFx0XHRcdFx0XHRcdFx0ZXJyb3IucmVxdWVzdCA9IHJlYWxTcmM7XG5cdFx0XHRcdFx0XHRcdFx0aW5zdGFsbGVkQ2h1bmtEYXRhWzFdKGVycm9yKTtcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH07XG5cdFx0XHRcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5sKHVybCwgbG9hZGluZ0VuZGVkLCBcImNodW5rLVwiICsgY2h1bmtJZCk7XG5cdFx0XHRcdH0gZWxzZSBpbnN0YWxsZWRDaHVua3NbY2h1bmtJZF0gPSAwO1xuXHRcdFx0fVxuXHRcdH1cbn07XG5cbi8vIG5vIHByZWZldGNoaW5nXG5cbi8vIG5vIHByZWxvYWRlZFxuXG4vLyBubyBITVJcblxuLy8gbm8gSE1SIG1hbmlmZXN0XG5cbi8vIG5vIGRlZmVycmVkIHN0YXJ0dXBcblxuLy8gaW5zdGFsbCBhIEpTT05QIGNhbGxiYWNrIGZvciBjaHVuayBsb2FkaW5nXG52YXIgd2VicGFja0pzb25wQ2FsbGJhY2sgPSAocGFyZW50Q2h1bmtMb2FkaW5nRnVuY3Rpb24sIGRhdGEpID0+IHtcblx0dmFyIFtjaHVua0lkcywgbW9yZU1vZHVsZXMsIHJ1bnRpbWVdID0gZGF0YTtcblx0Ly8gYWRkIFwibW9yZU1vZHVsZXNcIiB0byB0aGUgbW9kdWxlcyBvYmplY3QsXG5cdC8vIHRoZW4gZmxhZyBhbGwgXCJjaHVua0lkc1wiIGFzIGxvYWRlZCBhbmQgZmlyZSBjYWxsYmFja1xuXHR2YXIgbW9kdWxlSWQsIGNodW5rSWQsIGkgPSAwLCByZXNvbHZlcyA9IFtdO1xuXHRmb3IoO2kgPCBjaHVua0lkcy5sZW5ndGg7IGkrKykge1xuXHRcdGNodW5rSWQgPSBjaHVua0lkc1tpXTtcblx0XHRpZihfX3dlYnBhY2tfcmVxdWlyZV9fLm8oaW5zdGFsbGVkQ2h1bmtzLCBjaHVua0lkKSAmJiBpbnN0YWxsZWRDaHVua3NbY2h1bmtJZF0pIHtcblx0XHRcdHJlc29sdmVzLnB1c2goaW5zdGFsbGVkQ2h1bmtzW2NodW5rSWRdWzBdKTtcblx0XHR9XG5cdFx0aW5zdGFsbGVkQ2h1bmtzW2NodW5rSWRdID0gMDtcblx0fVxuXHRmb3IobW9kdWxlSWQgaW4gbW9yZU1vZHVsZXMpIHtcblx0XHRpZihfX3dlYnBhY2tfcmVxdWlyZV9fLm8obW9yZU1vZHVsZXMsIG1vZHVsZUlkKSkge1xuXHRcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tW21vZHVsZUlkXSA9IG1vcmVNb2R1bGVzW21vZHVsZUlkXTtcblx0XHR9XG5cdH1cblx0aWYocnVudGltZSkgcnVudGltZShfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblx0aWYocGFyZW50Q2h1bmtMb2FkaW5nRnVuY3Rpb24pIHBhcmVudENodW5rTG9hZGluZ0Z1bmN0aW9uKGRhdGEpO1xuXHR3aGlsZShyZXNvbHZlcy5sZW5ndGgpIHtcblx0XHRyZXNvbHZlcy5zaGlmdCgpKCk7XG5cdH1cblxufVxuXG52YXIgY2h1bmtMb2FkaW5nR2xvYmFsID0gc2VsZltcIndlYnBhY2tDaHVua215X3BpenphX3dlYnNpdGVfdGVzdGVkXCJdID0gc2VsZltcIndlYnBhY2tDaHVua215X3BpenphX3dlYnNpdGVfdGVzdGVkXCJdIHx8IFtdO1xuY2h1bmtMb2FkaW5nR2xvYmFsLmZvckVhY2god2VicGFja0pzb25wQ2FsbGJhY2suYmluZChudWxsLCAwKSk7XG5jaHVua0xvYWRpbmdHbG9iYWwucHVzaCA9IHdlYnBhY2tKc29ucENhbGxiYWNrLmJpbmQobnVsbCwgY2h1bmtMb2FkaW5nR2xvYmFsLnB1c2guYmluZChjaHVua0xvYWRpbmdHbG9iYWwpKTtcblxuLy8gbm8gZGVmZXJyZWQgc3RhcnR1cCIsImltcG9ydCBSZW5kZXJFbmdpbmUgZnJvbSAnLi9lbmdpbmUuanMnO1xuaW1wb3J0IFJvdXRlciBmcm9tICcuL3JvdXRlci5qcyc7XG5pbXBvcnQgQ2xpZW50IGZyb20gJy4vY2xpZW50LmpzJztcbmltcG9ydCBDYXJ0IGZyb20gJy4vY2FydExvZ2ljLmpzJztcbmltcG9ydCByZWdlbmVyYXRvclJ1bnRpbWUgZnJvbSAncmVnZW5lcmF0b3ItcnVudGltZSc7XG5cbmNvbnN0IG9wZW5OYXYgPSAoKSA9PiB7XG4gIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdteU5hdicpLnN0eWxlLndpZHRoID0gJzEwMCUnO1xufTtcbiAgXG5jb25zdCBjbG9zZU5hdiA9ICgpID0+IHtcbiAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ215TmF2Jykuc3R5bGUud2lkdGggPSAnMCUnO1xufTtcblxuXG5jb25zdCBzaG93ID0gYXN5bmMgKCkgPT4ge1xuICBjb25zdCB0YWcgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZHJvcGRvd24nKTtcbiAgaWYgKHRhZy5jbGFzc0xpc3QuY29udGFpbnMoJ3Nob3cnKSkge1xuICAgIHRhZy5jbGFzc0xpc3QucmVtb3ZlKCdzaG93Jyk7XG4gIH0gZWxzZSB7XG4gICAgdGFnLmNsYXNzTGlzdC5hZGQoJ3Nob3cnKTtcbiAgICBjb25zdCBkYXRhID0gYXdhaXQgY2xpZW50LmdldERhdGEoJ2RiJyk7XG4gICAgY2FydC52aXN1YWxpemUoZGF0YSwgdGFnKTtcbiAgfVxufTtcblxuY29uc3QgY2hhbmdlSGFzaCA9IGhhc2ggPT4ge1xuICByb3V0ZXIuY2hhbmdlVVJMKGhhc2gpO1xuICBtYWluRigpO1xufTtcblxuZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZXZ0KSA9PiB7XG4gIHN3aXRjaCAoZXZ0LnRhcmdldC5jbGFzc05hbWUuc3BsaXQoJyAnKVswXSkge1xuICBjYXNlICdjbG9zZWJ0JzpcbiAgY2FzZSAnY2xvc2VidG4nOlxuICAgIGNsb3NlTmF2KCk7XG4gICAgYnJlYWs7XG4gIGNhc2UgJ29wZW5idG4nOlxuICAgIG9wZW5OYXYoKTtcbiAgICBicmVhaztcbiAgY2FzZSAnY2FydGJ0bic6XG4gICAgY2FydGFkZChldnQudGFyZ2V0LmlkKTtcbiAgICBicmVhaztcbiAgY2FzZSAncmVtb3ZlYnRuJzpcbiAgICBjYXJ0cmVtb3ZlKGV2dC50YXJnZXQuaWQpO1xuICAgIGJyZWFrO1xuICBjYXNlICdoYXNoYnRuJzpcbiAgICBjaGFuZ2VIYXNoKGV2dC50YXJnZXQuaWQpO1xuICAgIGJyZWFrO1xuICBjYXNlICdzaG93YnRuJzpcbiAgICBzaG93KCk7XG4gICAgYnJlYWs7XG4gIGNhc2UgJ3N1Ym1pdGZvcm1idG4nOlxuICAgIHN1Ym1pdEZvcm0oKTtcbiAgICBicmVhaztcbiAgZGVmYXVsdDpcbiAgICBicmVhaztcbiAgfVxufSk7XG5cbmNvbnN0IHJvdXRlciA9IG5ldyBSb3V0ZXIoKTtcbmNvbnN0IGNsaWVudCA9IG5ldyBDbGllbnQoKTtcbmNvbnN0IGVuZ2luZSA9IG5ldyBSZW5kZXJFbmdpbmUoKTtcbmNvbnN0IGNhcnQgPSBuZXcgQ2FydCgpO1xuXG5jb25zdCBjYXJ0YWRkID0gKGl0ZW0pID0+IHtcbiAgY2FydC5hZGQoaXRlbSk7XG59O1xuXG5jb25zdCBjYXJ0cmVtb3ZlID0gKGl0ZW0pID0+IHtcbiAgY2FydC5kZWxldGUoaXRlbSk7XG59O1xuXG5jb25zdCBzdWJtaXRGb3JtID0gYXN5bmMgKCkgPT4ge1xuICBjb25zdCBlbWFpbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdlbWFpbCcpO1xuICBjb25zdCBwaG9uZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwaG9uZScpO1xuICBjb25zdCBuYW1lID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ25hbWUnKTtcbiAgY29uc3QgYWRkcmVzcyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhZGRyZXNzJyk7XG4gIGNvbnN0IHRpbWUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndGltZScpO1xuICBjb25zdCBjYXNoID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Nhc2gnKTtcbiAgZW5naW5lLmxvYWRlcigpO1xuICBsZXQgZGIgPSBhd2FpdCBjbGllbnQuZ2V0RGF0YSgnZGInKTtcbiAgY29uc29sZS5sb2coZGIpO1xuICBjb25zb2xlLmxvZyhjYXJ0LmdldEl0ZW1zKCkpO1xuICBjb25zdCBvYmogPSB7XG4gICAgZW1haWw6IGVtYWlsLnZhbHVlLFxuICAgIHBob25lOiBwaG9uZS52YWx1ZSxcbiAgICBuYW1lOiBuYW1lLnZhbHVlLFxuICAgIGFkZHJlc3M6IGFkZHJlc3MudmFsdWUsXG4gICAgdGltZTogdGltZS52YWx1ZSxcbiAgICBwYXltZW50OiBjYXNoLmNoZWNrZWQgPyAnY2FzaCcgOiAnY2FyZCcsXG4gICAgb3JkZXI6IGNhcnQuZ2V0SXRlbXMoKSxcbiAgICBwcmljZTogY2FydC5nZXRQcmljZShkYi5wcm9kdWN0cylcbiAgfTtcbiAgY2FydC5jbGVhcigpO1xuICBjb25zdCBvcmRlcklkID0gKGF3YWl0IGNsaWVudC5wb3N0KG9iaiwgJ29yZGVycycpKS5pZDtcbiAgY29uc3QgdmlldyA9IChhd2FpdCBpbXBvcnQoJy4vdmlld3Mvb3JkZXJEb25lLmpzJykpLmRlZmF1bHQ7XG4gIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdoYXNoY2hhbmdlJywgbWFpbkYpO1xuICByb3V0ZXIuY2hhbmdlVVJMKGBvcmRlciR7b3JkZXJJZH1gKTtcbiAgZW5naW5lLnJlbmRlcih2aWV3KG9iaiwgZGIucHJvZHVjdHMpKTtcbiAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2hhc2hjaGFuZ2UnLCBtYWluRik7XG59O1xuXG5cbmFzeW5jIGZ1bmN0aW9uIGxvYWRNYWluKCkge1xuICBjb25zdCB2aWV3ID0gYXdhaXQgaW1wb3J0KCcuL3ZpZXdzL21haW5QYWdlLmpzJykuY2F0Y2goKGUpID0+IGNvbnNvbGUubG9nKGUpKTtcbiAgY29uc3QgZGF0YSA9IGF3YWl0IGNsaWVudC5nZXREYXRhKCdkYicpLmNhdGNoKChlKSA9PiBjb25zb2xlLmxvZyhlKSk7XG4gIGVuZ2luZS5yZW5kZXIodmlldyhkYXRhKSk7XG59XG5cbmxldCB2aWV3O1xuY29uc3QgbWFpbkYgPSAoKSA9PiB7XG4gIGNvbnN0IHsgdmlld05hbWUsIGVuZHBvaW50TmFtZSB9ID0gcm91dGVyLmdldFN0YXRlKCk7XG4gIGVuZ2luZS5sb2FkZXIoKTtcbiAgaW1wb3J0KGAuL3ZpZXdzLyR7dmlld05hbWV9LmpzYClcbiAgICAudGhlbigodmlld01vZGVsKSA9PiB7XG4gICAgICB2aWV3ID0gdmlld01vZGVsLmRlZmF1bHQ7XG4gICAgICByZXR1cm4gY2xpZW50LmdldERhdGEoZW5kcG9pbnROYW1lKTtcbiAgICB9KVxuICAgIC5jYXRjaChyZWFzb24gPT4ge1xuICAgICAgY29uc29sZS5sb2cocmVhc29uKTtcbiAgICAgIGxvYWRNYWluKCk7XG4gICAgfSlcbiAgICAudGhlbihkYXRhID0+IHtcbiAgICAgIGVuZ2luZS5yZW5kZXIodmlldyhkYXRhLCByb3V0ZXIuZ2V0SGFzaCgpKSk7XG4gICAgfSlcbiAgICAuY2F0Y2gocmVhc29uID0+IHtcbiAgICAgIGNvbnNvbGUubG9nKHJlYXNvbik7XG4gICAgfSk7XG5cbn07XG5tYWluRigpO1xud2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2hhc2hjaGFuZ2UnLCBtYWluRik7XG5cbmNvbnN0IGNoZWNrRW1wdHkgPSAoKSA9PiB7XG4gIGlmKGNhcnQuaXNFbXB0eSgpICYmIHJvdXRlci5nZXRIYXNoKCkgPT09ICdvcmRlcicpIHtcbiAgICByb3V0ZXIuZ29CYWNrKCk7XG4gIH1cbn07XG53aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignaGFzaGNoYW5nZScsIGNoZWNrRW1wdHkpO1xuXG5cbmV4cG9ydCB7XG4gIG9wZW5OYXYsXG4gIGNsb3NlTmF2LFxuICBzdWJtaXRGb3JtLFxuICBjaGFuZ2VIYXNoLFxuICBjYXJ0YWRkLFxuICBjYXJ0cmVtb3ZlLFxuICBtYWluRixcbiAgbG9hZE1haW4sXG4gIGNoZWNrRW1wdHlcbn07IiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgUm91dGVyIHtcblxuICBnZXRIYXNoKCkge1xuICAgIHJldHVybiB3aW5kb3cubG9jYXRpb24uaGFzaC5zcGxpdCgnIycpWzFdO1xuICB9XG5cbiAgY2hhbmdlVVJMKHVybCkge1xuICAgIGhpc3RvcnkucHVzaFN0YXRlKHt9LCBudWxsLCBgIyR7dXJsfWApO1xuICB9XG5cbiAgcmVwbGFjZShoYXNoKSB7XG4gICAgaGlzdG9yeS5yZXBsYWNlU3RhdGUoe30sIG51bGwsIGAjJHtoYXNofWApO1xuICB9XG4gIFxuICBnb0JhY2soKSB7XG4gICAgaGlzdG9yeS5iYWNrKCk7XG4gIH1cblxuICBnZXRTaGl0KG1pZFVSTCkge1xuICAgIHJldHVybiAoZW5kVVJMID0gJycpID0+ICh7XG4gICAgICAnY2F0YWxvZyc6IHt2aWV3TmFtZTogYCR7ZW5kVVJMID8gJ2NhdGFsb2cvcGFnZScgOiAnY2F0YWxvZyd9YCwgZW5kcG9pbnROYW1lOiAnZGInfSxcbiAgICAgICdvcmRlcic6IHt2aWV3TmFtZTogJ29yZGVyJywgZW5kcG9pbnROYW1lOiAnZGInfSxcbiAgICAgICdhY3Rpb24nOiB7dmlld05hbWU6IGAke2VuZFVSTCA/ICdhY3Rpb24vcGFnZScgOiAnbWFpblBhZ2UnfWAsIGVuZHBvaW50TmFtZTogJ2RiJ30sXG4gICAgICAncHJvZHVjdCc6IHt2aWV3TmFtZTogYCR7ZW5kVVJMID8gJ3Byb2R1Y3QvcGFnZScgOiAnbWFpblBhZ2UnfWAsIGVuZHBvaW50TmFtZTogJ2RiJ31cbiAgICB9KVttaWRVUkxdIHx8IHt2aWV3TmFtZTogJ21haW5QYWdlJywgZW5kcG9pbnROYW1lOiAnZGInfTtcbiAgfVxuXG4gIGdldFN0YXRlKCkge1xuICAgIGlmICghdGhpcy5nZXRIYXNoKCkpIHJldHVybiB7dmlld05hbWU6ICdtYWluUGFnZScsIGVuZHBvaW50TmFtZTogJ2RiJ307XG4gICAgaWYgKHRoaXMuZ2V0SGFzaCgpLmluY2x1ZGVzKCcvJykpIHtcbiAgICAgIGNvbnN0IGxpc3QgPSB0aGlzLmdldEhhc2goKS5zcGxpdCgnLycpO1xuICAgICAgcmV0dXJuIHRoaXMuZ2V0U2hpdChsaXN0WzBdKShsaXN0WzFdKTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuZ2V0U2hpdCh0aGlzLmdldEhhc2goKSkoKTtcbiAgfVxufVxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ2xpZW50IHtcbiAgZ2V0RGF0YShlbmRwb2ludCkge1xuICAgIHJldHVybiBmZXRjaChgaHR0cHM6Ly9teS1qc29uLXNlcnZlci50eXBpY29kZS5jb20vZ2F6aW5hZnQvcGl6emFfZGIvJHtlbmRwb2ludH1gKVxuICAgICAgLnRoZW4ocmVzcG9uc2UgPT4gcmVzcG9uc2UuanNvbigpKVxuICAgICAgLmNhdGNoKGUgPT4gY29uc29sZS5sb2coZSkpO1xuICB9XG5cbiAgcG9zdChkYXRhLCBlbmRwb2ludCkge1xuICAgIHJldHVybiBmZXRjaChgaHR0cHM6Ly9teS1qc29uLXNlcnZlci50eXBpY29kZS5jb20vZ2F6aW5hZnQvcGl6emFfZGIvJHtlbmRwb2ludH1gLCB7XG4gICAgICBtZXRob2Q6ICdQT1NUJywgIFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoZGF0YSlcbiAgICB9KVxuICAgICAgLnRoZW4oKHJlc3BvbnNlKSA9PiByZXNwb25zZS5qc29uKCkpXG4gICAgICAuY2F0Y2goZSA9PiBjb25zb2xlLmxvZyhlKSk7IFxuICB9XG5cbn0iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBSZW5kZXJFbmdpbmUge1xuICByZW5kZXIodmlldykge1xuICAgIGNvbnN0IHJvb3QgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbWFpbicpO1xuICAgIHJvb3QuaW5uZXJIVE1MID0gdmlldztcbiAgfVxuXG4gIGxvYWRlcigpIHtcbiAgICBjb25zdCByb290ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ21haW4nKTtcbiAgICByb290LmlubmVySFRNTCA9IGBcbiAgICA8ZGl2IGNsYXNzPVwidGV4dC1jZW50ZXJcIj5cbiAgICAgIDxkaXYgY2xhc3M9XCJzcGlubmVyLWJvcmRlciB0ZXh0LXByaW1hcnlcIiByb2xlPVwic3RhdHVzXCIgc3R5bGU9XCJ3aWR0aDogNXJlbTsgaGVpZ2h0OiA1cmVtO1wiPlxuICAgICAgICA8c3BhbiBjbGFzcz1cInNyLW9ubHlcIj5Mb2FkaW5nLi4uPC9zcGFuPlxuICAgICAgPC9kaXY+XG4gICAgPC9kaXY+XG4gICAgYDtcbiAgfVxufVxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ2FydCB7XG4gIFxuICBjb25zdHJ1Y3RvcigpIHtcbiAgICBpZiAobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2NhcnQnKSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnY2FydCcsICd7fScpO1xuICAgIH1cbiAgfVxuXG4gIGFkZChpdGVtSWQpIHtcbiAgICBjb25zdCB2YWx1ZSA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2NhcnQnKSk7XG4gICAgaWYgKHZhbHVlW2l0ZW1JZF0gPT09IHVuZGVmaW5lZCkge1xuICAgICAgdmFsdWVbaXRlbUlkXSA9IDE7XG4gICAgfSBlbHNlIHtcbiAgICAgICsrdmFsdWVbaXRlbUlkXTtcbiAgICB9XG4gICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ2NhcnQnLCBKU09OLnN0cmluZ2lmeSh2YWx1ZSkpO1xuICB9XG5cbiAgZ2V0SXRlbXMoKSB7XG4gICAgcmV0dXJuIEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2NhcnQnKSk7XG4gIH1cblxuICBkZWxldGUoaXRlbUlkKSB7XG4gICAgY29uc3QgdmFsdWUgPSBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdjYXJ0JykpO1xuICAgIGlmKCF2YWx1ZVtpdGVtSWRdKSByZXR1cm47XG4gICAgLS12YWx1ZVtpdGVtSWRdO1xuICAgIGlmKHZhbHVlW2l0ZW1JZF0gPT09IDApIGRlbGV0ZSB2YWx1ZVtpdGVtSWRdO1xuICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdjYXJ0JywgSlNPTi5zdHJpbmdpZnkodmFsdWUpKTtcbiAgfVxuXG4gIGlzRW1wdHkoKSB7XG4gICAgY29uc3QgdmFsdWUgPSBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdjYXJ0JykpO1xuICAgIHJldHVybiBPYmplY3Qua2V5cyh2YWx1ZSkubGVuZ3RoID09PSAwO1xuICB9XG5cbiAgY2xlYXIoKSB7XG4gICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ2NhcnQnLCAne30nKTtcbiAgfVxuXG4gIGdldFByaWNlKGRhdGEpIHtcbiAgICBjb25zdCBvcmRlcnMgPSB0aGlzLmdldEl0ZW1zKCk7XG4gICAgbGV0IHJlcyA9IDA7XG4gICAgZm9yIChjb25zdCBrZXkgaW4gb3JkZXJzKSB7XG4gICAgICByZXMgKz0gZGF0YS5maW5kKHByb2R1Y3QgPT4gcHJvZHVjdC5pZCA9PT0ga2V5KS5wcmljZSAqIG9yZGVyc1trZXldO1xuICAgIH1cbiAgICByZXR1cm4gcmVzO1xuICB9IFxuXG5cbiAgdmlzdWFsaXplKGRhdGEsIHZpZXcpIHtcbiAgICBjb25zdCBjYXJ0cHJvZHVjdHMgPSB0aGlzLmdldEl0ZW1zKCk7XG4gICAgY29uc3QgcHJvZHVjdHMgPSBkYXRhLnByb2R1Y3RzLmZpbHRlcihwcm9kID0+IE9iamVjdC5rZXlzKGNhcnRwcm9kdWN0cykuaW5jbHVkZXMocHJvZC5pZCkpOyBcbiAgICB2aWV3LmlubmVySFRNTCA9IGA8ZGl2IGNsYXNzPVwibGlzdC1ncm91cFwiPlxuJHtwcm9kdWN0cy5tYXAocHJvZHVjdCA9PlxuICAgIGA8YSBjbGFzcz1cImxpc3QtZ3JvdXAtaXRlbSBsaXN0LWdyb3VwLWl0ZW0tYWN0aW9uIGZsZXgtY29sdW1uIGFsaWduLWl0ZW1zLXN0YXJ0XCI+XG4gICAgICAgIDxkaXYgY2xhc3M9XCJkLWZsZXggdy0xMDAganVzdGlmeS1jb250ZW50LWJldHdlZW5cIj5cbiAgICAgICAgICA8aDUgY2xhc3M9XCJtYi0xXCI+JHtwcm9kdWN0LnByb2R1Y3ROYW1lfTwvaDU+XG4gICAgICAgIDwvZGl2PlxuICAgICAgICA8cCBjbGFzcz1cIm1iLTFcIj4ke2NhcnRwcm9kdWN0c1twcm9kdWN0LmlkXX0gZm9yICR7cHJvZHVjdC5wcmljZX0gZWFjaDwvcD5cbiAgICAgICAgPGhyPlxuICAgICAgICA8YnV0dG9uIGNsYXNzPVwiY2FydGJ0biBidG4gYnRuLW91dGxpbmUtcHJpbWFyeVwiIGlkPVwiJHtwcm9kdWN0LmlkfVwiIHN0eWxlPVwiZmxvYXQ6IGxlZnRcIj5BZGQ8L2J1dHRvbj5cbiAgICAgICAgPGJ1dHRvbiBjbGFzcz1cInJlbW92ZWJ0biBidG4gYnRuLW91dGxpbmUtcHJpbWFyeVwiIGlkPVwiJHtwcm9kdWN0LmlkfVwiPlJlbW92ZTwvYnV0dG9uPiAgIFxuICAgICAgPC9hPmApLmpvaW4oJ1xcbicpfVxuICAgICAgICA8aDM+VG90YWw6ICR7dGhpcy5nZXRQcmljZShkYXRhLnByb2R1Y3RzKX08L2gzPlxuICAgIDwvZGl2PmA7XG4gIH1cblxufVxuIl0sInNvdXJjZVJvb3QiOiIifQ==