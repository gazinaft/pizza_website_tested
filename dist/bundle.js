(()=>{var e,t,a={277:(e,t,a)=>{var n={"./__tests__/action/page.test.js":[369,369],"./__tests__/catalog.test.js":[716,716],"./__tests__/catalog/page.test.js":[368,368],"./__tests__/mainPage.test.js":[480,480],"./__tests__/order.test.js":[806,806],"./__tests__/orderDone.test.js":[624,624],"./__tests__/product/page.test.js":[329,329],"./action/page.js":[722,722],"./catalog.js":[87,87],"./catalog/page.js":[762,762],"./mainPage.js":[429,429],"./order.js":[880,880],"./orderDone.js":[879,879],"./product/page.js":[30,30]};function r(e){if(!a.o(n,e))return Promise.resolve().then((()=>{var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=n[e],r=t[0];return a.e(t[1]).then((()=>a(r)))}r.keys=()=>Object.keys(n),r.id=277,e.exports=r}},n={};function r(e){if(n[e])return n[e].exports;var t=n[e]={exports:{}};return a[e](t,t.exports,r),t.exports}r.m=a,r.d=(e,t)=>{for(var a in t)r.o(t,a)&&!r.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},r.f={},r.e=e=>Promise.all(Object.keys(r.f).reduce(((t,a)=>(r.f[a](e,t),t)),[])),r.u=e=>e+".bundle.js",r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),e={},t="my-pizza-website-tested:",r.l=(a,n,o)=>{if(e[a])e[a].push(n);else{var s,i;if(void 0!==o)for(var c=document.getElementsByTagName("script"),d=0;d<c.length;d++){var l=c[d];if(l.getAttribute("src")==a||l.getAttribute("data-webpack")==t+o){s=l;break}}s||(i=!0,(s=document.createElement("script")).charset="utf-8",s.timeout=120,r.nc&&s.setAttribute("nonce",r.nc),s.setAttribute("data-webpack",t+o),s.src=a),e[a]=[n];var g=(t,n)=>{s.onerror=s.onload=null,clearTimeout(m);var r=e[a];if(delete e[a],s.parentNode&&s.parentNode.removeChild(s),r&&r.forEach((e=>e(n))),t)return t(n)},m=setTimeout(g.bind(null,void 0,{type:"timeout",target:s}),12e4);s.onerror=g.bind(null,s.onerror),s.onload=g.bind(null,s.onload),i&&document.head.appendChild(s)}},r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e;r.g.importScripts&&(e=r.g.location+"");var t=r.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var a=t.getElementsByTagName("script");a.length&&(e=a[a.length-1].src)}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),r.p=e})(),(()=>{var e={179:0};r.f.j=(t,a)=>{var n=r.o(e,t)?e[t]:void 0;if(0!==n)if(n)a.push(n[2]);else{var o=new Promise(((a,r)=>{n=e[t]=[a,r]}));a.push(n[2]=o);var s=r.p+r.u(t),i=new Error;r.l(s,(a=>{if(r.o(e,t)&&(0!==(n=e[t])&&(e[t]=void 0),n)){var o=a&&("load"===a.type?"missing":a.type),s=a&&a.target&&a.target.src;i.message="Loading chunk "+t+" failed.\n("+o+": "+s+")",i.name="ChunkLoadError",i.type=o,i.request=s,n[1](i)}}),"chunk-"+t)}};var t=(t,a)=>{for(var n,o,[s,i,c]=a,d=0,l=[];d<s.length;d++)o=s[d],r.o(e,o)&&e[o]&&l.push(e[o][0]),e[o]=0;for(n in i)r.o(i,n)&&(r.m[n]=i[n]);for(c&&c(r),t&&t(a);l.length;)l.shift()()},a=self.webpackChunkmy_pizza_website_tested=self.webpackChunkmy_pizza_website_tested||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))})(),(()=>{"use strict";document.addEventListener("click",(a=>{switch(a.target.className.split(" ")[0]){case"closebt":case"closebtn":document.getElementById("myNav").style.width="0%";break;case"openbtn":document.getElementById("myNav").style.width="100%";break;case"cartbtn":o(a.target.id);break;case"removebtn":s(a.target.id);break;case"hashbtn":r=a.target.id,e.changeURL(r),d();break;case"showbtn":(()=>{const e=document.getElementById("dropdown");e.classList.contains("show")?e.classList.remove("show"):(e.classList.add("show"),t.getData("db").then((t=>{n.visualize(t,e)})))})();break;case"submitformbtn":i()}var r}));const e=new class{getHash(){return window.location.hash.split("#")[1]}changeURL(e){history.pushState({},null,`#${e}`)}replace(e){history.replaceState({},null,`#${e}`)}goBack(){history.back()}getShit(e){return(t="")=>({catalog:{viewName:t?"catalog/page":"catalog",endpointName:"db"},order:{viewName:"order",endpointName:"db"},action:{viewName:t?"action/page":"mainPage",endpointName:"db"},product:{viewName:t?"product/page":"mainPage",endpointName:"db"}}[e]||{viewName:"mainPage",endpointName:"db"})}getState(){if(!this.getHash())return{viewName:"mainPage",endpointName:"db"};if(this.getHash().includes("/")){const e=this.getHash().split("/");return this.getShit(e[0])(e[1])}return this.getShit(this.getHash())()}},t=new class{getData(e){return fetch(`https://my-json-server.typicode.com/gazinaft/pizza_db/${e}`).then((e=>e.json())).catch((e=>console.log(e)))}post(e,t){return fetch(`https://my-json-server.typicode.com/gazinaft/pizza_db/${t}`,{method:"POST",body:JSON.stringify(e)}).then((e=>e.json())).catch((e=>console.log(e)))}},a=new class{render(e){document.getElementById("main").innerHTML=e}loader(){document.getElementById("main").innerHTML='\n    <div class="text-center">\n      <div class="spinner-border text-primary" role="status" style="width: 5rem; height: 5rem;">\n        <span class="sr-only">Loading...</span>\n      </div>\n    </div>\n    '}},n=new class{constructor(){void 0===localStorage.getItem("cart")&&localStorage.setItem("cart","{}")}add(e){const t=JSON.parse(localStorage.getItem("cart"));void 0===t[e]?t[e]=1:++t[e],localStorage.setItem("cart",JSON.stringify(t))}getItems(){return JSON.parse(localStorage.getItem("cart"))}delete(e){const t=JSON.parse(localStorage.getItem("cart"));t[e]&&(--t[e],0===t[e]&&delete t[e],localStorage.setItem("cart",JSON.stringify(t)))}isEmpty(){const e=JSON.parse(localStorage.getItem("cart"));return 0===Object.keys(e).length}clear(){localStorage.setItem("cart","{}")}getPrice(e){const t=this.getItems();let a=0;for(const n in t)a+=e.find((e=>e.id===n)).price*t[n];return a}visualize(e,t){const a=this.getItems(),n=e.products.filter((e=>Object.keys(a).includes(e.id)));t.innerHTML=`<div class="list-group">\n${n.map((e=>`<a class="list-group-item list-group-item-action flex-column align-items-start">\n        <div class="d-flex w-100 justify-content-between">\n          <h5 class="mb-1">${e.productName}</h5>\n        </div>\n        <p class="mb-1">${a[e.id]} for ${e.price} each</p>\n        <hr>\n        <button class="cartbtn btn btn-outline-primary" id="${e.id}" style="float: left">Add</button>\n        <button class="removebtn btn btn-outline-primary" id="${e.id}">Remove</button>   \n      </a>`)).join("\n")}\n        <h3>Total: ${this.getPrice(e.products)}</h3>\n    </div>`}},o=e=>{n.add(e)},s=e=>{n.delete(e)},i=()=>{const o=document.getElementById("email"),s=document.getElementById("phone"),i=document.getElementById("name"),c=document.getElementById("address"),l=document.getElementById("time"),g=document.getElementById("cash");a.loader();let m=t.getData("db");console.log(m),console.log(n.getItems());const u={email:o.value,phone:s.value,name:i.value,address:c.value,time:l.value,payment:g.checked?"cash":"card",order:n.getItems(),price:n.getPrice(m.products)};n.clear();const h=t.post(u,"orders").id,p=r.e(879).then(r.bind(r,879)).default;window.removeEventListener("hashchange",d),e.changeURL(`order${h}`),a.render(p(u,m.products)),window.addEventListener("hashchange",d)};let c;const d=()=>{const{viewName:n,endpointName:o}=e.getState();a.loader(),r(277)(`./${n}.js`).then((e=>(c=e.default,t.getData(o)))).catch((e=>{console.log(e),async function(){const e=await r.e(429).then(r.bind(r,429)).catch((e=>console.log(e))),n=await t.getData("db").catch((e=>console.log(e)));a.render(e(n))}()})).then((t=>{a.render(c(t,e.getHash()))})).catch((e=>{console.log(e)}))};d(),window.addEventListener("hashchange",d),window.addEventListener("hashchange",(()=>{n.isEmpty()&&"order"===e.getHash()&&e.goBack()}))})()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9teS1waXp6YS13ZWJzaXRlLXRlc3RlZC93ZWJwYWNrL3J1bnRpbWUvbG9hZCBzY3JpcHQiLCJ3ZWJwYWNrOi8vbXktcGl6emEtd2Vic2l0ZS10ZXN0ZWQvLi9zcmMvdmlld3N8bGF6eXwvXi8uKi8uanMkL3xncm91cE9wdGlvbnM6IHt9fG5hbWVzcGFjZSBvYmplY3QiLCJ3ZWJwYWNrOi8vbXktcGl6emEtd2Vic2l0ZS10ZXN0ZWQvd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vbXktcGl6emEtd2Vic2l0ZS10ZXN0ZWQvd2VicGFjay9ydW50aW1lL2RlZmluZSBwcm9wZXJ0eSBnZXR0ZXJzIiwid2VicGFjazovL215LXBpenphLXdlYnNpdGUtdGVzdGVkL3dlYnBhY2svcnVudGltZS9lbnN1cmUgY2h1bmsiLCJ3ZWJwYWNrOi8vbXktcGl6emEtd2Vic2l0ZS10ZXN0ZWQvd2VicGFjay9ydW50aW1lL2dldCBqYXZhc2NyaXB0IGNodW5rIGZpbGVuYW1lIiwid2VicGFjazovL215LXBpenphLXdlYnNpdGUtdGVzdGVkL3dlYnBhY2svcnVudGltZS9nbG9iYWwiLCJ3ZWJwYWNrOi8vbXktcGl6emEtd2Vic2l0ZS10ZXN0ZWQvd2VicGFjay9ydW50aW1lL2hhc093blByb3BlcnR5IHNob3J0aGFuZCIsIndlYnBhY2s6Ly9teS1waXp6YS13ZWJzaXRlLXRlc3RlZC93ZWJwYWNrL3J1bnRpbWUvbWFrZSBuYW1lc3BhY2Ugb2JqZWN0Iiwid2VicGFjazovL215LXBpenphLXdlYnNpdGUtdGVzdGVkL3dlYnBhY2svcnVudGltZS9wdWJsaWNQYXRoIiwid2VicGFjazovL215LXBpenphLXdlYnNpdGUtdGVzdGVkL3dlYnBhY2svcnVudGltZS9qc29ucCBjaHVuayBsb2FkaW5nIiwid2VicGFjazovL215LXBpenphLXdlYnNpdGUtdGVzdGVkLy4vc3JjL3NjcmlwdC5qcyIsIndlYnBhY2s6Ly9teS1waXp6YS13ZWJzaXRlLXRlc3RlZC8uL3NyYy9yb3V0ZXIuanMiLCJ3ZWJwYWNrOi8vbXktcGl6emEtd2Vic2l0ZS10ZXN0ZWQvLi9zcmMvY2xpZW50LmpzIiwid2VicGFjazovL215LXBpenphLXdlYnNpdGUtdGVzdGVkLy4vc3JjL2VuZ2luZS5qcyIsIndlYnBhY2s6Ly9teS1waXp6YS13ZWJzaXRlLXRlc3RlZC8uL3NyYy9jYXJ0TG9naWMuanMiXSwibmFtZXMiOlsiaW5Qcm9ncmVzcyIsImRhdGFXZWJwYWNrUHJlZml4IiwibWFwIiwid2VicGFja0FzeW5jQ29udGV4dCIsInJlcSIsIl9fd2VicGFja19yZXF1aXJlX18iLCJvIiwiUHJvbWlzZSIsInJlc29sdmUiLCJ0aGVuIiwiZSIsIkVycm9yIiwiY29kZSIsImlkcyIsImlkIiwia2V5cyIsIk9iamVjdCIsIm1vZHVsZSIsImV4cG9ydHMiLCJfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX18iLCJtb2R1bGVJZCIsIl9fd2VicGFja19tb2R1bGVzX18iLCJtIiwiZCIsImRlZmluaXRpb24iLCJrZXkiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJnZXQiLCJmIiwiY2h1bmtJZCIsImFsbCIsInJlZHVjZSIsInByb21pc2VzIiwidSIsImciLCJnbG9iYWxUaGlzIiwidGhpcyIsIkZ1bmN0aW9uIiwid2luZG93Iiwib2JqIiwicHJvcCIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwiY2FsbCIsImwiLCJ1cmwiLCJkb25lIiwicHVzaCIsInNjcmlwdCIsIm5lZWRBdHRhY2giLCJ1bmRlZmluZWQiLCJzY3JpcHRzIiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50c0J5VGFnTmFtZSIsImkiLCJsZW5ndGgiLCJzIiwiZ2V0QXR0cmlidXRlIiwiY3JlYXRlRWxlbWVudCIsImNoYXJzZXQiLCJ0aW1lb3V0IiwibmMiLCJzZXRBdHRyaWJ1dGUiLCJzcmMiLCJvblNjcmlwdENvbXBsZXRlIiwicHJldiIsImV2ZW50Iiwib25lcnJvciIsIm9ubG9hZCIsImNsZWFyVGltZW91dCIsImRvbmVGbnMiLCJwYXJlbnROb2RlIiwicmVtb3ZlQ2hpbGQiLCJmb3JFYWNoIiwiZm4iLCJzZXRUaW1lb3V0IiwiYmluZCIsInR5cGUiLCJ0YXJnZXQiLCJoZWFkIiwiYXBwZW5kQ2hpbGQiLCJyIiwiU3ltYm9sIiwidG9TdHJpbmdUYWciLCJ2YWx1ZSIsInNjcmlwdFVybCIsImltcG9ydFNjcmlwdHMiLCJsb2NhdGlvbiIsImN1cnJlbnRTY3JpcHQiLCJyZXBsYWNlIiwicCIsImluc3RhbGxlZENodW5rcyIsIjE3OSIsImoiLCJpbnN0YWxsZWRDaHVua0RhdGEiLCJwcm9taXNlIiwicmVqZWN0IiwiZXJyb3IiLCJlcnJvclR5cGUiLCJyZWFsU3JjIiwibWVzc2FnZSIsIm5hbWUiLCJyZXF1ZXN0Iiwid2VicGFja0pzb25wQ2FsbGJhY2siLCJwYXJlbnRDaHVua0xvYWRpbmdGdW5jdGlvbiIsImRhdGEiLCJjaHVua0lkcyIsIm1vcmVNb2R1bGVzIiwicnVudGltZSIsInJlc29sdmVzIiwic2hpZnQiLCJjaHVua0xvYWRpbmdHbG9iYWwiLCJzZWxmIiwiYWRkRXZlbnRMaXN0ZW5lciIsImV2dCIsImNsYXNzTmFtZSIsInNwbGl0IiwiZ2V0RWxlbWVudEJ5SWQiLCJzdHlsZSIsIndpZHRoIiwiY2FydGFkZCIsImNhcnRyZW1vdmUiLCJoYXNoIiwicm91dGVyIiwiY2hhbmdlVVJMIiwibWFpbkYiLCJ0YWciLCJjbGFzc0xpc3QiLCJjb250YWlucyIsInJlbW92ZSIsImFkZCIsImNsaWVudCIsImdldERhdGEiLCJjYXJ0IiwidmlzdWFsaXplIiwic2hvdyIsInN1Ym1pdEZvcm0iLCJoaXN0b3J5IiwicHVzaFN0YXRlIiwicmVwbGFjZVN0YXRlIiwiYmFjayIsIm1pZFVSTCIsImVuZFVSTCIsInZpZXdOYW1lIiwiZW5kcG9pbnROYW1lIiwiZ2V0SGFzaCIsImluY2x1ZGVzIiwibGlzdCIsImdldFNoaXQiLCJlbmRwb2ludCIsImZldGNoIiwicmVzcG9uc2UiLCJqc29uIiwiY2F0Y2giLCJjb25zb2xlIiwibG9nIiwibWV0aG9kIiwiYm9keSIsIkpTT04iLCJzdHJpbmdpZnkiLCJlbmdpbmUiLCJ2aWV3IiwiaW5uZXJIVE1MIiwibG9jYWxTdG9yYWdlIiwiZ2V0SXRlbSIsInNldEl0ZW0iLCJpdGVtSWQiLCJwYXJzZSIsIm9yZGVycyIsImdldEl0ZW1zIiwicmVzIiwiZmluZCIsInByb2R1Y3QiLCJwcmljZSIsImNhcnRwcm9kdWN0cyIsInByb2R1Y3RzIiwiZmlsdGVyIiwicHJvZCIsInByb2R1Y3ROYW1lIiwiam9pbiIsImdldFByaWNlIiwiaXRlbSIsImRlbGV0ZSIsImVtYWlsIiwicGhvbmUiLCJhZGRyZXNzIiwidGltZSIsImNhc2giLCJsb2FkZXIiLCJkYiIsInBheW1lbnQiLCJjaGVja2VkIiwib3JkZXIiLCJjbGVhciIsIm9yZGVySWQiLCJwb3N0IiwiZGVmYXVsdCIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJyZW5kZXIiLCJnZXRTdGF0ZSIsInZpZXdNb2RlbCIsInJlYXNvbiIsImFzeW5jIiwibG9hZE1haW4iLCJpc0VtcHR5IiwiZ29CYWNrIl0sIm1hcHBpbmdzIjoiVUFBSUEsRUFDQUMsRSxpQkNESixJQUFJQyxFQUFNLENBQ1Qsa0NBQW1DLENBQ2xDLElBQ0EsS0FFRCw4QkFBK0IsQ0FDOUIsSUFDQSxLQUVELG1DQUFvQyxDQUNuQyxJQUNBLEtBRUQsK0JBQWdDLENBQy9CLElBQ0EsS0FFRCw0QkFBNkIsQ0FDNUIsSUFDQSxLQUVELGdDQUFpQyxDQUNoQyxJQUNBLEtBRUQsbUNBQW9DLENBQ25DLElBQ0EsS0FFRCxtQkFBb0IsQ0FDbkIsSUFDQSxLQUVELGVBQWdCLENBQ2YsR0FDQSxJQUVELG9CQUFxQixDQUNwQixJQUNBLEtBRUQsZ0JBQWlCLENBQ2hCLElBQ0EsS0FFRCxhQUFjLENBQ2IsSUFDQSxLQUVELGlCQUFrQixDQUNqQixJQUNBLEtBRUQsb0JBQXFCLENBQ3BCLEdBQ0EsS0FHRixTQUFTQyxFQUFvQkMsR0FDNUIsSUFBSUMsRUFBb0JDLEVBQUVKLEVBQUtFLEdBQzlCLE9BQU9HLFFBQVFDLFVB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QU80QixTQUNQLE9BQU8sS0FBVzdDLFFBQ2Z2SSxNQUFNZ00sSUFDTHZDLEVBQU91QyxFQUFVSixRQUNWakUsRUFBT0MsUUFBUVksTUFFdkJTLE9BQU1nRCxJQUNML0MsUUFBUUMsSUFBSThDLEdBaEJsQkMsaUJBQ0UsTUFBTXpDLFFBQWEsNkJBQThCUixPQUFPaEosR0FBTWlKLFFBQVFDLElBQUlsSixLQUNwRWdHLFFBQWEwQixFQUFPQyxRQUFRLE1BQU1xQixPQUFPaEosR0FBTWlKLFFBQVFDLElBQUlsSixLQUNqRXVKLEVBQU9zQyxPQUFPckMsRUFBS3hELElBY2ZrRyxNQUVEbk0sTUFBS2lHLElBQ0p1RCxFQUFPc0MsT0FBT3JDLEVBQUt4RCxFQUFNa0IsRUFBT3NCLGVBRWpDUSxPQUFNZ0QsSUFDTC9DLFFBQVFDLElBQUk4QyxPQUlsQjVFLElBQ0F2RixPQUFPMkUsaUJBQWlCLGFBQWNZLEdBT3RDdkYsT0FBTzJFLGlCQUFpQixjQUxMLEtBQ2RvQixFQUFLdUUsV0FBa0MsVUFBckJqRixFQUFPc0IsV0FDMUJ0QixFQUFPa0YsYSIsImZpbGUiOiJidW5kbGUuanMiLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgaW5Qcm9ncmVzcyA9IHt9O1xudmFyIGRhdGFXZWJwYWNrUHJlZml4ID0gXCJteS1waXp6YS13ZWJzaXRlLXRlc3RlZDpcIjtcbi8vIGxvYWRTY3JpcHQgZnVuY3Rpb24gdG8gbG9hZCBhIHNjcmlwdCB2aWEgc2NyaXB0IHRhZ1xuX193ZWJwYWNrX3JlcXVpcmVfXy5sID0gKHVybCwgZG9uZSwga2V5KSA9PiB7XG5cdGlmKGluUHJvZ3Jlc3NbdXJsXSkgeyBpblByb2dyZXNzW3VybF0ucHVzaChkb25lKTsgcmV0dXJuOyB9XG5cdHZhciBzY3JpcHQsIG5lZWRBdHRhY2g7XG5cdGlmKGtleSAhPT0gdW5kZWZpbmVkKSB7XG5cdFx0dmFyIHNjcmlwdHMgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZShcInNjcmlwdFwiKTtcblx0XHRmb3IodmFyIGkgPSAwOyBpIDwgc2NyaXB0cy5sZW5ndGg7IGkrKykge1xuXHRcdFx0dmFyIHMgPSBzY3JpcHRzW2ldO1xuXHRcdFx0aWYocy5nZXRBdHRyaWJ1dGUoXCJzcmNcIikgPT0gdXJsIHx8IHMuZ2V0QXR0cmlidXRlKFwiZGF0YS13ZWJwYWNrXCIpID09IGRhdGFXZWJwYWNrUHJlZml4ICsga2V5KSB7IHNjcmlwdCA9IHM7IGJyZWFrOyB9XG5cdFx0fVxuXHR9XG5cdGlmKCFzY3JpcHQpIHtcblx0XHRuZWVkQXR0YWNoID0gdHJ1ZTtcblx0XHRzY3JpcHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzY3JpcHQnKTtcblxuXHRcdHNjcmlwdC5jaGFyc2V0ID0gJ3V0Zi04Jztcblx0XHRzY3JpcHQudGltZW91dCA9IDEyMDtcblx0XHRpZiAoX193ZWJwYWNrX3JlcXVpcmVfXy5uYykge1xuXHRcdFx0c2NyaXB0LnNldEF0dHJpYnV0ZShcIm5vbmNlXCIsIF9fd2VicGFja19yZXF1aXJlX18ubmMpO1xuXHRcdH1cblx0XHRzY3JpcHQuc2V0QXR0cmlidXRlKFwiZGF0YS13ZWJwYWNrXCIsIGRhdGFXZWJwYWNrUHJlZml4ICsga2V5KTtcblx0XHRzY3JpcHQuc3JjID0gdXJsO1xuXHR9XG5cdGluUHJvZ3Jlc3NbdXJsXSA9IFtkb25lXTtcblx0dmFyIG9uU2NyaXB0Q29tcGxldGUgPSAocHJldiwgZXZlbnQpID0+IHtcblx0XHQvLyBhdm9pZCBtZW0gbGVha3MgaW4gSUUuXG5cdFx0c2NyaXB0Lm9uZXJyb3IgPSBzY3JpcHQub25sb2FkID0gbnVsbDtcblx0XHRjbGVhclRpbWVvdXQodGltZW91dCk7XG5cdFx0dmFyIGRvbmVGbnMgPSBpblByb2dyZXNzW3VybF07XG5cdFx0ZGVsZXRlIGluUHJvZ3Jlc3NbdXJsXTtcblx0XHRzY3JpcHQucGFyZW50Tm9kZSAmJiBzY3JpcHQucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChzY3JpcHQpO1xuXHRcdGRvbmVGbnMgJiYgZG9uZUZucy5mb3JFYWNoKChmbikgPT4gZm4oZXZlbnQpKTtcblx0XHRpZihwcmV2KSByZXR1cm4gcHJldihldmVudCk7XG5cdH1cblx0O1xuXHR2YXIgdGltZW91dCA9IHNldFRpbWVvdXQob25TY3JpcHRDb21wbGV0ZS5iaW5kKG51bGwsIHVuZGVmaW5lZCwgeyB0eXBlOiAndGltZW91dCcsIHRhcmdldDogc2NyaXB0IH0pLCAxMjAwMDApO1xuXHRzY3JpcHQub25lcnJvciA9IG9uU2NyaXB0Q29tcGxldGUuYmluZChudWxsLCBzY3JpcHQub25lcnJvcik7XG5cdHNjcmlwdC5vbmxvYWQgPSBvblNjcmlwdENvbXBsZXRlLmJpbmQobnVsbCwgc2NyaXB0Lm9ubG9hZCk7XG5cdG5lZWRBdHRhY2ggJiYgZG9jdW1lbnQuaGVhZC5hcHBlbmRDaGlsZChzY3JpcHQpO1xufTsiLCJ2YXIgbWFwID0ge1xuXHRcIi4vX190ZXN0c19fL2FjdGlvbi9wYWdlLnRlc3QuanNcIjogW1xuXHRcdDM2OSxcblx0XHQzNjlcblx0XSxcblx0XCIuL19fdGVzdHNfXy9jYXRhbG9nLnRlc3QuanNcIjogW1xuXHRcdDcxNixcblx0XHQ3MTZcblx0XSxcblx0XCIuL19fdGVzdHNfXy9jYXRhbG9nL3BhZ2UudGVzdC5qc1wiOiBbXG5cdFx0MzY4LFxuXHRcdDM2OFxuXHRdLFxuXHRcIi4vX190ZXN0c19fL21haW5QYWdlLnRlc3QuanNcIjogW1xuXHRcdDQ4MCxcblx0XHQ0ODBcblx0XSxcblx0XCIuL19fdGVzdHNfXy9vcmRlci50ZXN0LmpzXCI6IFtcblx0XHQ4MDYsXG5cdFx0ODA2XG5cdF0sXG5cdFwiLi9fX3Rlc3RzX18vb3JkZXJEb25lLnRlc3QuanNcIjogW1xuXHRcdDYyNCxcblx0XHQ2MjRcblx0XSxcblx0XCIuL19fdGVzdHNfXy9wcm9kdWN0L3BhZ2UudGVzdC5qc1wiOiBbXG5cdFx0MzI5LFxuXHRcdDMyOVxuXHRdLFxuXHRcIi4vYWN0aW9uL3BhZ2UuanNcIjogW1xuXHRcdDcyMixcblx0XHQ3MjJcblx0XSxcblx0XCIuL2NhdGFsb2cuanNcIjogW1xuXHRcdDg3LFxuXHRcdDg3XG5cdF0sXG5cdFwiLi9jYXRhbG9nL3BhZ2UuanNcIjogW1xuXHRcdDc2Mixcblx0XHQ3NjJcblx0XSxcblx0XCIuL21haW5QYWdlLmpzXCI6IFtcblx0XHQ0MjksXG5cdFx0NDI5XG5cdF0sXG5cdFwiLi9vcmRlci5qc1wiOiBbXG5cdFx0ODgwLFxuXHRcdDg4MFxuXHRdLFxuXHRcIi4vb3JkZXJEb25lLmpzXCI6IFtcblx0XHQ4NzksXG5cdFx0ODc5XG5cdF0sXG5cdFwiLi9wcm9kdWN0L3BhZ2UuanNcIjogW1xuXHRcdDMwLFxuXHRcdDMwXG5cdF1cbn07XG5mdW5jdGlvbiB3ZWJwYWNrQXN5bmNDb250ZXh0KHJlcSkge1xuXHRpZighX193ZWJwYWNrX3JlcXVpcmVfXy5vKG1hcCwgcmVxKSkge1xuXHRcdHJldHVybiBQcm9taXNlLnJlc29sdmUoKS50aGVuKCgpID0+IHtcblx0XHRcdHZhciBlID0gbmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIiArIHJlcSArIFwiJ1wiKTtcblx0XHRcdGUuY29kZSA9ICdNT0RVTEVfTk9UX0ZPVU5EJztcblx0XHRcdHRocm93IGU7XG5cdFx0fSk7XG5cdH1cblxuXHR2YXIgaWRzID0gbWFwW3JlcV0sIGlkID0gaWRzWzBdO1xuXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXy5lKGlkc1sxXSkudGhlbigoKSA9PiB7XG5cdFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oaWQpO1xuXHR9KTtcbn1cbndlYnBhY2tBc3luY0NvbnRleHQua2V5cyA9ICgpID0+IE9iamVjdC5rZXlzKG1hcCk7XG53ZWJwYWNrQXN5bmNDb250ZXh0LmlkID0gMjc3O1xubW9kdWxlLmV4cG9ydHMgPSB3ZWJwYWNrQXN5bmNDb250ZXh0OyIsIi8vIFRoZSBtb2R1bGUgY2FjaGVcbnZhciBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX18gPSB7fTtcblxuLy8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbmZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG5cdGlmKF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF0pIHtcblx0XHRyZXR1cm4gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXS5leHBvcnRzO1xuXHR9XG5cdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG5cdHZhciBtb2R1bGUgPSBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdID0ge1xuXHRcdC8vIG5vIG1vZHVsZS5pZCBuZWVkZWRcblx0XHQvLyBubyBtb2R1bGUubG9hZGVkIG5lZWRlZFxuXHRcdGV4cG9ydHM6IHt9XG5cdH07XG5cblx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG5cdF9fd2VicGFja19tb2R1bGVzX19bbW9kdWxlSWRdKG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG5cdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG5cdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbn1cblxuLy8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbl9fd2VicGFja19yZXF1aXJlX18ubSA9IF9fd2VicGFja19tb2R1bGVzX187XG5cbiIsIi8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb25zIGZvciBoYXJtb255IGV4cG9ydHNcbl9fd2VicGFja19yZXF1aXJlX18uZCA9IChleHBvcnRzLCBkZWZpbml0aW9uKSA9PiB7XG5cdGZvcih2YXIga2V5IGluIGRlZmluaXRpb24pIHtcblx0XHRpZihfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZGVmaW5pdGlvbiwga2V5KSAmJiAhX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIGtleSkpIHtcblx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBrZXksIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBkZWZpbml0aW9uW2tleV0gfSk7XG5cdFx0fVxuXHR9XG59OyIsIl9fd2VicGFja19yZXF1aXJlX18uZiA9IHt9O1xuLy8gVGhpcyBmaWxlIGNvbnRhaW5zIG9ubHkgdGhlIGVudHJ5IGNodW5rLlxuLy8gVGhlIGNodW5rIGxvYWRpbmcgZnVuY3Rpb24gZm9yIGFkZGl0aW9uYWwgY2h1bmtzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLmUgPSAoY2h1bmtJZCkgPT4ge1xuXHRyZXR1cm4gUHJvbWlzZS5hbGwoT2JqZWN0LmtleXMoX193ZWJwYWNrX3JlcXVpcmVfXy5mKS5yZWR1Y2UoKHByb21pc2VzLCBrZXkpID0+IHtcblx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLmZba2V5XShjaHVua0lkLCBwcm9taXNlcyk7XG5cdFx0cmV0dXJuIHByb21pc2VzO1xuXHR9LCBbXSkpO1xufTsiLCIvLyBUaGlzIGZ1bmN0aW9uIGFsbG93IHRvIHJlZmVyZW5jZSBhc3luYyBjaHVua3Ncbl9fd2VicGFja19yZXF1aXJlX18udSA9IChjaHVua0lkKSA9PiB7XG5cdC8vIHJldHVybiB1cmwgZm9yIGZpbGVuYW1lcyBiYXNlZCBvbiB0ZW1wbGF0ZVxuXHRyZXR1cm4gXCJcIiArIGNodW5rSWQgKyBcIi5idW5kbGUuanNcIjtcbn07IiwiX193ZWJwYWNrX3JlcXVpcmVfXy5nID0gKGZ1bmN0aW9uKCkge1xuXHRpZiAodHlwZW9mIGdsb2JhbFRoaXMgPT09ICdvYmplY3QnKSByZXR1cm4gZ2xvYmFsVGhpcztcblx0dHJ5IHtcblx0XHRyZXR1cm4gdGhpcyB8fCBuZXcgRnVuY3Rpb24oJ3JldHVybiB0aGlzJykoKTtcblx0fSBjYXRjaCAoZSkge1xuXHRcdGlmICh0eXBlb2Ygd2luZG93ID09PSAnb2JqZWN0JykgcmV0dXJuIHdpbmRvdztcblx0fVxufSkoKTsiLCJfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSAob2JqLCBwcm9wKSA9PiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBwcm9wKSIsIi8vIGRlZmluZSBfX2VzTW9kdWxlIG9uIGV4cG9ydHNcbl9fd2VicGFja19yZXF1aXJlX18uciA9IChleHBvcnRzKSA9PiB7XG5cdGlmKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC50b1N0cmluZ1RhZykge1xuXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6ICdNb2R1bGUnIH0pO1xuXHR9XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG59OyIsInZhciBzY3JpcHRVcmw7XG5pZiAoX193ZWJwYWNrX3JlcXVpcmVfXy5nLmltcG9ydFNjcmlwdHMpIHNjcmlwdFVybCA9IF9fd2VicGFja19yZXF1aXJlX18uZy5sb2NhdGlvbiArIFwiXCI7XG52YXIgZG9jdW1lbnQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fLmcuZG9jdW1lbnQ7XG5pZiAoIXNjcmlwdFVybCAmJiBkb2N1bWVudCkge1xuXHRpZiAoZG9jdW1lbnQuY3VycmVudFNjcmlwdClcblx0XHRzY3JpcHRVcmwgPSBkb2N1bWVudC5jdXJyZW50U2NyaXB0LnNyY1xuXHRpZiAoIXNjcmlwdFVybCkge1xuXHRcdHZhciBzY3JpcHRzID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJzY3JpcHRcIik7XG5cdFx0aWYoc2NyaXB0cy5sZW5ndGgpIHNjcmlwdFVybCA9IHNjcmlwdHNbc2NyaXB0cy5sZW5ndGggLSAxXS5zcmNcblx0fVxufVxuLy8gV2hlbiBzdXBwb3J0aW5nIGJyb3dzZXJzIHdoZXJlIGFuIGF1dG9tYXRpYyBwdWJsaWNQYXRoIGlzIG5vdCBzdXBwb3J0ZWQgeW91IG11c3Qgc3BlY2lmeSBhbiBvdXRwdXQucHVibGljUGF0aCBtYW51YWxseSB2aWEgY29uZmlndXJhdGlvblxuLy8gb3IgcGFzcyBhbiBlbXB0eSBzdHJpbmcgKFwiXCIpIGFuZCBzZXQgdGhlIF9fd2VicGFja19wdWJsaWNfcGF0aF9fIHZhcmlhYmxlIGZyb20geW91ciBjb2RlIHRvIHVzZSB5b3VyIG93biBsb2dpYy5cbmlmICghc2NyaXB0VXJsKSB0aHJvdyBuZXcgRXJyb3IoXCJBdXRvbWF0aWMgcHVibGljUGF0aCBpcyBub3Qgc3VwcG9ydGVkIGluIHRoaXMgYnJvd3NlclwiKTtcbnNjcmlwdFVybCA9IHNjcmlwdFVybC5yZXBsYWNlKC8jLiokLywgXCJcIikucmVwbGFjZSgvXFw/LiokLywgXCJcIikucmVwbGFjZSgvXFwvW15cXC9dKyQvLCBcIi9cIik7XG5fX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBzY3JpcHRVcmw7IiwiLy8gbm8gYmFzZVVSSVxuXG4vLyBvYmplY3QgdG8gc3RvcmUgbG9hZGVkIGFuZCBsb2FkaW5nIGNodW5rc1xuLy8gdW5kZWZpbmVkID0gY2h1bmsgbm90IGxvYWRlZCwgbnVsbCA9IGNodW5rIHByZWxvYWRlZC9wcmVmZXRjaGVkXG4vLyBQcm9taXNlID0gY2h1bmsgbG9hZGluZywgMCA9IGNodW5rIGxvYWRlZFxudmFyIGluc3RhbGxlZENodW5rcyA9IHtcblx0MTc5OiAwXG59O1xuXG5cbl9fd2VicGFja19yZXF1aXJlX18uZi5qID0gKGNodW5rSWQsIHByb21pc2VzKSA9PiB7XG5cdFx0Ly8gSlNPTlAgY2h1bmsgbG9hZGluZyBmb3IgamF2YXNjcmlwdFxuXHRcdHZhciBpbnN0YWxsZWRDaHVua0RhdGEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fLm8oaW5zdGFsbGVkQ2h1bmtzLCBjaHVua0lkKSA/IGluc3RhbGxlZENodW5rc1tjaHVua0lkXSA6IHVuZGVmaW5lZDtcblx0XHRpZihpbnN0YWxsZWRDaHVua0RhdGEgIT09IDApIHsgLy8gMCBtZWFucyBcImFscmVhZHkgaW5zdGFsbGVkXCIuXG5cblx0XHRcdC8vIGEgUHJvbWlzZSBtZWFucyBcImN1cnJlbnRseSBsb2FkaW5nXCIuXG5cdFx0XHRpZihpbnN0YWxsZWRDaHVua0RhdGEpIHtcblx0XHRcdFx0cHJvbWlzZXMucHVzaChpbnN0YWxsZWRDaHVua0RhdGFbMl0pO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0aWYodHJ1ZSkgeyAvLyBhbGwgY2h1bmtzIGhhdmUgSlNcblx0XHRcdFx0XHQvLyBzZXR1cCBQcm9taXNlIGluIGNodW5rIGNhY2hlXG5cdFx0XHRcdFx0dmFyIHByb21pc2UgPSBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG5cdFx0XHRcdFx0XHRpbnN0YWxsZWRDaHVua0RhdGEgPSBpbnN0YWxsZWRDaHVua3NbY2h1bmtJZF0gPSBbcmVzb2x2ZSwgcmVqZWN0XTtcblx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHRwcm9taXNlcy5wdXNoKGluc3RhbGxlZENodW5rRGF0YVsyXSA9IHByb21pc2UpO1xuXG5cdFx0XHRcdFx0Ly8gc3RhcnQgY2h1bmsgbG9hZGluZ1xuXHRcdFx0XHRcdHZhciB1cmwgPSBfX3dlYnBhY2tfcmVxdWlyZV9fLnAgKyBfX3dlYnBhY2tfcmVxdWlyZV9fLnUoY2h1bmtJZCk7XG5cdFx0XHRcdFx0Ly8gY3JlYXRlIGVycm9yIGJlZm9yZSBzdGFjayB1bndvdW5kIHRvIGdldCB1c2VmdWwgc3RhY2t0cmFjZSBsYXRlclxuXHRcdFx0XHRcdHZhciBlcnJvciA9IG5ldyBFcnJvcigpO1xuXHRcdFx0XHRcdHZhciBsb2FkaW5nRW5kZWQgPSAoZXZlbnQpID0+IHtcblx0XHRcdFx0XHRcdGlmKF9fd2VicGFja19yZXF1aXJlX18ubyhpbnN0YWxsZWRDaHVua3MsIGNodW5rSWQpKSB7XG5cdFx0XHRcdFx0XHRcdGluc3RhbGxlZENodW5rRGF0YSA9IGluc3RhbGxlZENodW5rc1tjaHVua0lkXTtcblx0XHRcdFx0XHRcdFx0aWYoaW5zdGFsbGVkQ2h1bmtEYXRhICE9PSAwKSBpbnN0YWxsZWRDaHVua3NbY2h1bmtJZF0gPSB1bmRlZmluZWQ7XG5cdFx0XHRcdFx0XHRcdGlmKGluc3RhbGxlZENodW5rRGF0YSkge1xuXHRcdFx0XHRcdFx0XHRcdHZhciBlcnJvclR5cGUgPSBldmVudCAmJiAoZXZlbnQudHlwZSA9PT0gJ2xvYWQnID8gJ21pc3NpbmcnIDogZXZlbnQudHlwZSk7XG5cdFx0XHRcdFx0XHRcdFx0dmFyIHJlYWxTcmMgPSBldmVudCAmJiBldmVudC50YXJnZXQgJiYgZXZlbnQudGFyZ2V0LnNyYztcblx0XHRcdFx0XHRcdFx0XHRlcnJvci5tZXNzYWdlID0gJ0xvYWRpbmcgY2h1bmsgJyArIGNodW5rSWQgKyAnIGZhaWxlZC5cXG4oJyArIGVycm9yVHlwZSArICc6ICcgKyByZWFsU3JjICsgJyknO1xuXHRcdFx0XHRcdFx0XHRcdGVycm9yLm5hbWUgPSAnQ2h1bmtMb2FkRXJyb3InO1xuXHRcdFx0XHRcdFx0XHRcdGVycm9yLnR5cGUgPSBlcnJvclR5cGU7XG5cdFx0XHRcdFx0XHRcdFx0ZXJyb3IucmVxdWVzdCA9IHJlYWxTcmM7XG5cdFx0XHRcdFx0XHRcdFx0aW5zdGFsbGVkQ2h1bmtEYXRhWzFdKGVycm9yKTtcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH07XG5cdFx0XHRcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5sKHVybCwgbG9hZGluZ0VuZGVkLCBcImNodW5rLVwiICsgY2h1bmtJZCk7XG5cdFx0XHRcdH0gZWxzZSBpbnN0YWxsZWRDaHVua3NbY2h1bmtJZF0gPSAwO1xuXHRcdFx0fVxuXHRcdH1cbn07XG5cbi8vIG5vIHByZWZldGNoaW5nXG5cbi8vIG5vIHByZWxvYWRlZFxuXG4vLyBubyBITVJcblxuLy8gbm8gSE1SIG1hbmlmZXN0XG5cbi8vIG5vIGRlZmVycmVkIHN0YXJ0dXBcblxuLy8gaW5zdGFsbCBhIEpTT05QIGNhbGxiYWNrIGZvciBjaHVuayBsb2FkaW5nXG52YXIgd2VicGFja0pzb25wQ2FsbGJhY2sgPSAocGFyZW50Q2h1bmtMb2FkaW5nRnVuY3Rpb24sIGRhdGEpID0+IHtcblx0dmFyIFtjaHVua0lkcywgbW9yZU1vZHVsZXMsIHJ1bnRpbWVdID0gZGF0YTtcblx0Ly8gYWRkIFwibW9yZU1vZHVsZXNcIiB0byB0aGUgbW9kdWxlcyBvYmplY3QsXG5cdC8vIHRoZW4gZmxhZyBhbGwgXCJjaHVua0lkc1wiIGFzIGxvYWRlZCBhbmQgZmlyZSBjYWxsYmFja1xuXHR2YXIgbW9kdWxlSWQsIGNodW5rSWQsIGkgPSAwLCByZXNvbHZlcyA9IFtdO1xuXHRmb3IoO2kgPCBjaHVua0lkcy5sZW5ndGg7IGkrKykge1xuXHRcdGNodW5rSWQgPSBjaHVua0lkc1tpXTtcblx0XHRpZihfX3dlYnBhY2tfcmVxdWlyZV9fLm8oaW5zdGFsbGVkQ2h1bmtzLCBjaHVua0lkKSAmJiBpbnN0YWxsZWRDaHVua3NbY2h1bmtJZF0pIHtcblx0XHRcdHJlc29sdmVzLnB1c2goaW5zdGFsbGVkQ2h1bmtzW2NodW5rSWRdWzBdKTtcblx0XHR9XG5cdFx0aW5zdGFsbGVkQ2h1bmtzW2NodW5rSWRdID0gMDtcblx0fVxuXHRmb3IobW9kdWxlSWQgaW4gbW9yZU1vZHVsZXMpIHtcblx0XHRpZihfX3dlYnBhY2tfcmVxdWlyZV9fLm8obW9yZU1vZHVsZXMsIG1vZHVsZUlkKSkge1xuXHRcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tW21vZHVsZUlkXSA9IG1vcmVNb2R1bGVzW21vZHVsZUlkXTtcblx0XHR9XG5cdH1cblx0aWYocnVudGltZSkgcnVudGltZShfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblx0aWYocGFyZW50Q2h1bmtMb2FkaW5nRnVuY3Rpb24pIHBhcmVudENodW5rTG9hZGluZ0Z1bmN0aW9uKGRhdGEpO1xuXHR3aGlsZShyZXNvbHZlcy5sZW5ndGgpIHtcblx0XHRyZXNvbHZlcy5zaGlmdCgpKCk7XG5cdH1cblxufVxuXG52YXIgY2h1bmtMb2FkaW5nR2xvYmFsID0gc2VsZltcIndlYnBhY2tDaHVua215X3BpenphX3dlYnNpdGVfdGVzdGVkXCJdID0gc2VsZltcIndlYnBhY2tDaHVua215X3BpenphX3dlYnNpdGVfdGVzdGVkXCJdIHx8IFtdO1xuY2h1bmtMb2FkaW5nR2xvYmFsLmZvckVhY2god2VicGFja0pzb25wQ2FsbGJhY2suYmluZChudWxsLCAwKSk7XG5jaHVua0xvYWRpbmdHbG9iYWwucHVzaCA9IHdlYnBhY2tKc29ucENhbGxiYWNrLmJpbmQobnVsbCwgY2h1bmtMb2FkaW5nR2xvYmFsLnB1c2guYmluZChjaHVua0xvYWRpbmdHbG9iYWwpKTtcblxuLy8gbm8gZGVmZXJyZWQgc3RhcnR1cCIsImltcG9ydCBSZW5kZXJFbmdpbmUgZnJvbSAnLi9lbmdpbmUuanMnO1xuaW1wb3J0IFJvdXRlciBmcm9tICcuL3JvdXRlci5qcyc7XG5pbXBvcnQgQ2xpZW50IGZyb20gJy4vY2xpZW50LmpzJztcbmltcG9ydCBDYXJ0IGZyb20gJy4vY2FydExvZ2ljLmpzJztcblxuY29uc3Qgb3Blbk5hdiA9ICgpID0+IHtcbiAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ215TmF2Jykuc3R5bGUud2lkdGggPSAnMTAwJSc7XG59O1xuICBcbmNvbnN0IGNsb3NlTmF2ID0gKCkgPT4ge1xuICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbXlOYXYnKS5zdHlsZS53aWR0aCA9ICcwJSc7XG59O1xuXG5cbmNvbnN0IHNob3cgPSAoKSA9PiB7XG4gIGNvbnN0IHRhZyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdkcm9wZG93bicpO1xuICBpZiAodGFnLmNsYXNzTGlzdC5jb250YWlucygnc2hvdycpKSB7XG4gICAgdGFnLmNsYXNzTGlzdC5yZW1vdmUoJ3Nob3cnKTtcbiAgfSBlbHNlIHtcbiAgICB0YWcuY2xhc3NMaXN0LmFkZCgnc2hvdycpO1xuXG4gICAgY2xpZW50LmdldERhdGEoJ2RiJylcbiAgICAgIC50aGVuKChkYXRhKSA9PiB7XG4gICAgICAgIGNhcnQudmlzdWFsaXplKGRhdGEsIHRhZyk7XG4gICAgICB9KTtcbiAgfVxufTtcblxuY29uc3QgY2hhbmdlSGFzaCA9IGhhc2ggPT4ge1xuICByb3V0ZXIuY2hhbmdlVVJMKGhhc2gpO1xuICBtYWluRigpO1xufTtcblxuZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZXZ0KSA9PiB7XG4gIHN3aXRjaCAoZXZ0LnRhcmdldC5jbGFzc05hbWUuc3BsaXQoJyAnKVswXSkge1xuICBjYXNlICdjbG9zZWJ0JzpcbiAgY2FzZSAnY2xvc2VidG4nOlxuICAgIGNsb3NlTmF2KCk7XG4gICAgYnJlYWs7XG4gIGNhc2UgJ29wZW5idG4nOlxuICAgIG9wZW5OYXYoKTtcbiAgICBicmVhaztcbiAgY2FzZSAnY2FydGJ0bic6XG4gICAgY2FydGFkZChldnQudGFyZ2V0LmlkKTtcbiAgICBicmVhaztcbiAgY2FzZSAncmVtb3ZlYnRuJzpcbiAgICBjYXJ0cmVtb3ZlKGV2dC50YXJnZXQuaWQpO1xuICAgIGJyZWFrO1xuICBjYXNlICdoYXNoYnRuJzpcbiAgICBjaGFuZ2VIYXNoKGV2dC50YXJnZXQuaWQpO1xuICAgIGJyZWFrO1xuICBjYXNlICdzaG93YnRuJzpcbiAgICBzaG93KCk7XG4gICAgYnJlYWs7XG4gIGNhc2UgJ3N1Ym1pdGZvcm1idG4nOlxuICAgIHN1Ym1pdEZvcm0oKTtcbiAgICBicmVhaztcbiAgZGVmYXVsdDpcbiAgICBicmVhaztcbiAgfVxufSk7XG5cbmNvbnN0IHJvdXRlciA9IG5ldyBSb3V0ZXIoKTtcbmNvbnN0IGNsaWVudCA9IG5ldyBDbGllbnQoKTtcbmNvbnN0IGVuZ2luZSA9IG5ldyBSZW5kZXJFbmdpbmUoKTtcbmNvbnN0IGNhcnQgPSBuZXcgQ2FydCgpO1xuXG5jb25zdCBjYXJ0YWRkID0gKGl0ZW0pID0+IHtcbiAgY2FydC5hZGQoaXRlbSk7XG59O1xuXG5jb25zdCBjYXJ0cmVtb3ZlID0gKGl0ZW0pID0+IHtcbiAgY2FydC5kZWxldGUoaXRlbSk7XG59O1xuXG5jb25zdCBzdWJtaXRGb3JtID0gICgpID0+IHtcbiAgY29uc3QgZW1haWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZW1haWwnKTtcbiAgY29uc3QgcGhvbmUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncGhvbmUnKTtcbiAgY29uc3QgbmFtZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCduYW1lJyk7XG4gIGNvbnN0IGFkZHJlc3MgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYWRkcmVzcycpO1xuICBjb25zdCB0aW1lID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3RpbWUnKTtcbiAgY29uc3QgY2FzaCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjYXNoJyk7XG4gIGVuZ2luZS5sb2FkZXIoKTtcbiAgbGV0IGRiID0gY2xpZW50LmdldERhdGEoJ2RiJyk7XG4gIGNvbnNvbGUubG9nKGRiKTtcbiAgY29uc29sZS5sb2coY2FydC5nZXRJdGVtcygpKTtcbiAgY29uc3Qgb2JqID0ge1xuICAgIGVtYWlsOiBlbWFpbC52YWx1ZSxcbiAgICBwaG9uZTogcGhvbmUudmFsdWUsXG4gICAgbmFtZTogbmFtZS52YWx1ZSxcbiAgICBhZGRyZXNzOiBhZGRyZXNzLnZhbHVlLFxuICAgIHRpbWU6IHRpbWUudmFsdWUsXG4gICAgcGF5bWVudDogY2FzaC5jaGVja2VkID8gJ2Nhc2gnIDogJ2NhcmQnLFxuICAgIG9yZGVyOiBjYXJ0LmdldEl0ZW1zKCksXG4gICAgcHJpY2U6IGNhcnQuZ2V0UHJpY2UoZGIucHJvZHVjdHMpXG4gIH07XG4gIGNhcnQuY2xlYXIoKTtcbiAgY29uc3Qgb3JkZXJJZCA9ICggY2xpZW50LnBvc3Qob2JqLCAnb3JkZXJzJykpLmlkO1xuICBjb25zdCB2aWV3ID0gKCBpbXBvcnQoJy4vdmlld3Mvb3JkZXJEb25lLmpzJykpLmRlZmF1bHQ7XG4gIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdoYXNoY2hhbmdlJywgbWFpbkYpO1xuICByb3V0ZXIuY2hhbmdlVVJMKGBvcmRlciR7b3JkZXJJZH1gKTtcbiAgZW5naW5lLnJlbmRlcih2aWV3KG9iaiwgZGIucHJvZHVjdHMpKTtcbiAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2hhc2hjaGFuZ2UnLCBtYWluRik7XG59O1xuXG5cbmFzeW5jIGZ1bmN0aW9uIGxvYWRNYWluKCkge1xuICBjb25zdCB2aWV3ID0gYXdhaXQgaW1wb3J0KCcuL3ZpZXdzL21haW5QYWdlLmpzJykuY2F0Y2goKGUpID0+IGNvbnNvbGUubG9nKGUpKTtcbiAgY29uc3QgZGF0YSA9IGF3YWl0IGNsaWVudC5nZXREYXRhKCdkYicpLmNhdGNoKChlKSA9PiBjb25zb2xlLmxvZyhlKSk7XG4gIGVuZ2luZS5yZW5kZXIodmlldyhkYXRhKSk7XG59XG5cbmxldCB2aWV3O1xuY29uc3QgbWFpbkYgPSAoKSA9PiB7XG4gIGNvbnN0IHsgdmlld05hbWUsIGVuZHBvaW50TmFtZSB9ID0gcm91dGVyLmdldFN0YXRlKCk7XG4gIGVuZ2luZS5sb2FkZXIoKTtcbiAgaW1wb3J0KGAuL3ZpZXdzLyR7dmlld05hbWV9LmpzYClcbiAgICAudGhlbigodmlld01vZGVsKSA9PiB7XG4gICAgICB2aWV3ID0gdmlld01vZGVsLmRlZmF1bHQ7XG4gICAgICByZXR1cm4gY2xpZW50LmdldERhdGEoZW5kcG9pbnROYW1lKTtcbiAgICB9KVxuICAgIC5jYXRjaChyZWFzb24gPT4ge1xuICAgICAgY29uc29sZS5sb2cocmVhc29uKTtcbiAgICAgIGxvYWRNYWluKCk7XG4gICAgfSlcbiAgICAudGhlbihkYXRhID0+IHtcbiAgICAgIGVuZ2luZS5yZW5kZXIodmlldyhkYXRhLCByb3V0ZXIuZ2V0SGFzaCgpKSk7XG4gICAgfSlcbiAgICAuY2F0Y2gocmVhc29uID0+IHtcbiAgICAgIGNvbnNvbGUubG9nKHJlYXNvbik7XG4gICAgfSk7XG5cbn07XG5tYWluRigpO1xud2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2hhc2hjaGFuZ2UnLCBtYWluRik7XG5cbmNvbnN0IGNoZWNrRW1wdHkgPSAoKSA9PiB7XG4gIGlmKGNhcnQuaXNFbXB0eSgpICYmIHJvdXRlci5nZXRIYXNoKCkgPT09ICdvcmRlcicpIHtcbiAgICByb3V0ZXIuZ29CYWNrKCk7XG4gIH1cbn07XG53aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignaGFzaGNoYW5nZScsIGNoZWNrRW1wdHkpO1xuXG5cbmV4cG9ydCB7XG4gIG9wZW5OYXYsXG4gIGNsb3NlTmF2LFxuICBzdWJtaXRGb3JtLFxuICBjaGFuZ2VIYXNoLFxuICBjYXJ0YWRkLFxuICBjYXJ0cmVtb3ZlLFxuICBtYWluRixcbiAgbG9hZE1haW4sXG4gIGNoZWNrRW1wdHlcbn07IiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgUm91dGVyIHtcblxuICBnZXRIYXNoKCkge1xuICAgIHJldHVybiB3aW5kb3cubG9jYXRpb24uaGFzaC5zcGxpdCgnIycpWzFdO1xuICB9XG5cbiAgY2hhbmdlVVJMKHVybCkge1xuICAgIGhpc3RvcnkucHVzaFN0YXRlKHt9LCBudWxsLCBgIyR7dXJsfWApO1xuICB9XG5cbiAgcmVwbGFjZShoYXNoKSB7XG4gICAgaGlzdG9yeS5yZXBsYWNlU3RhdGUoe30sIG51bGwsIGAjJHtoYXNofWApO1xuICB9XG4gIFxuICBnb0JhY2soKSB7XG4gICAgaGlzdG9yeS5iYWNrKCk7XG4gIH1cblxuICBnZXRTaGl0KG1pZFVSTCkge1xuICAgIHJldHVybiAoZW5kVVJMID0gJycpID0+ICh7XG4gICAgICAnY2F0YWxvZyc6IHt2aWV3TmFtZTogYCR7ZW5kVVJMID8gJ2NhdGFsb2cvcGFnZScgOiAnY2F0YWxvZyd9YCwgZW5kcG9pbnROYW1lOiAnZGInfSxcbiAgICAgICdvcmRlcic6IHt2aWV3TmFtZTogJ29yZGVyJywgZW5kcG9pbnROYW1lOiAnZGInfSxcbiAgICAgICdhY3Rpb24nOiB7dmlld05hbWU6IGAke2VuZFVSTCA/ICdhY3Rpb24vcGFnZScgOiAnbWFpblBhZ2UnfWAsIGVuZHBvaW50TmFtZTogJ2RiJ30sXG4gICAgICAncHJvZHVjdCc6IHt2aWV3TmFtZTogYCR7ZW5kVVJMID8gJ3Byb2R1Y3QvcGFnZScgOiAnbWFpblBhZ2UnfWAsIGVuZHBvaW50TmFtZTogJ2RiJ31cbiAgICB9KVttaWRVUkxdIHx8IHt2aWV3TmFtZTogJ21haW5QYWdlJywgZW5kcG9pbnROYW1lOiAnZGInfTtcbiAgfVxuXG4gIGdldFN0YXRlKCkge1xuICAgIGlmICghdGhpcy5nZXRIYXNoKCkpIHJldHVybiB7dmlld05hbWU6ICdtYWluUGFnZScsIGVuZHBvaW50TmFtZTogJ2RiJ307XG4gICAgaWYgKHRoaXMuZ2V0SGFzaCgpLmluY2x1ZGVzKCcvJykpIHtcbiAgICAgIGNvbnN0IGxpc3QgPSB0aGlzLmdldEhhc2goKS5zcGxpdCgnLycpO1xuICAgICAgcmV0dXJuIHRoaXMuZ2V0U2hpdChsaXN0WzBdKShsaXN0WzFdKTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuZ2V0U2hpdCh0aGlzLmdldEhhc2goKSkoKTtcbiAgfVxufVxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ2xpZW50IHtcbiAgZ2V0RGF0YShlbmRwb2ludCkge1xuICAgIHJldHVybiBmZXRjaChgaHR0cHM6Ly9teS1qc29uLXNlcnZlci50eXBpY29kZS5jb20vZ2F6aW5hZnQvcGl6emFfZGIvJHtlbmRwb2ludH1gKVxuICAgICAgLnRoZW4ocmVzcG9uc2UgPT4gcmVzcG9uc2UuanNvbigpKVxuICAgICAgLmNhdGNoKGUgPT4gY29uc29sZS5sb2coZSkpO1xuICB9XG5cbiAgcG9zdChkYXRhLCBlbmRwb2ludCkge1xuICAgIHJldHVybiBmZXRjaChgaHR0cHM6Ly9teS1qc29uLXNlcnZlci50eXBpY29kZS5jb20vZ2F6aW5hZnQvcGl6emFfZGIvJHtlbmRwb2ludH1gLCB7XG4gICAgICBtZXRob2Q6ICdQT1NUJywgIFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoZGF0YSlcbiAgICB9KVxuICAgICAgLnRoZW4oKHJlc3BvbnNlKSA9PiByZXNwb25zZS5qc29uKCkpXG4gICAgICAuY2F0Y2goZSA9PiBjb25zb2xlLmxvZyhlKSk7IFxuICB9XG5cbn0iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBSZW5kZXJFbmdpbmUge1xuICByZW5kZXIodmlldykge1xuICAgIGNvbnN0IHJvb3QgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbWFpbicpO1xuICAgIHJvb3QuaW5uZXJIVE1MID0gdmlldztcbiAgfVxuXG4gIGxvYWRlcigpIHtcbiAgICBjb25zdCByb290ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ21haW4nKTtcbiAgICByb290LmlubmVySFRNTCA9IGBcbiAgICA8ZGl2IGNsYXNzPVwidGV4dC1jZW50ZXJcIj5cbiAgICAgIDxkaXYgY2xhc3M9XCJzcGlubmVyLWJvcmRlciB0ZXh0LXByaW1hcnlcIiByb2xlPVwic3RhdHVzXCIgc3R5bGU9XCJ3aWR0aDogNXJlbTsgaGVpZ2h0OiA1cmVtO1wiPlxuICAgICAgICA8c3BhbiBjbGFzcz1cInNyLW9ubHlcIj5Mb2FkaW5nLi4uPC9zcGFuPlxuICAgICAgPC9kaXY+XG4gICAgPC9kaXY+XG4gICAgYDtcbiAgfVxufVxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ2FydCB7XG4gIFxuICBjb25zdHJ1Y3RvcigpIHtcbiAgICBpZiAobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2NhcnQnKSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnY2FydCcsICd7fScpO1xuICAgIH1cbiAgfVxuXG4gIGFkZChpdGVtSWQpIHtcbiAgICBjb25zdCB2YWx1ZSA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2NhcnQnKSk7XG4gICAgaWYgKHZhbHVlW2l0ZW1JZF0gPT09IHVuZGVmaW5lZCkge1xuICAgICAgdmFsdWVbaXRlbUlkXSA9IDE7XG4gICAgfSBlbHNlIHtcbiAgICAgICsrdmFsdWVbaXRlbUlkXTtcbiAgICB9XG4gICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ2NhcnQnLCBKU09OLnN0cmluZ2lmeSh2YWx1ZSkpO1xuICB9XG5cbiAgZ2V0SXRlbXMoKSB7XG4gICAgcmV0dXJuIEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2NhcnQnKSk7XG4gIH1cblxuICBkZWxldGUoaXRlbUlkKSB7XG4gICAgY29uc3QgdmFsdWUgPSBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdjYXJ0JykpO1xuICAgIGlmKCF2YWx1ZVtpdGVtSWRdKSByZXR1cm47XG4gICAgLS12YWx1ZVtpdGVtSWRdO1xuICAgIGlmKHZhbHVlW2l0ZW1JZF0gPT09IDApIGRlbGV0ZSB2YWx1ZVtpdGVtSWRdO1xuICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdjYXJ0JywgSlNPTi5zdHJpbmdpZnkodmFsdWUpKTtcbiAgfVxuXG4gIGlzRW1wdHkoKSB7XG4gICAgY29uc3QgdmFsdWUgPSBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdjYXJ0JykpO1xuICAgIHJldHVybiBPYmplY3Qua2V5cyh2YWx1ZSkubGVuZ3RoID09PSAwO1xuICB9XG5cbiAgY2xlYXIoKSB7XG4gICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ2NhcnQnLCAne30nKTtcbiAgfVxuXG4gIGdldFByaWNlKGRhdGEpIHtcbiAgICBjb25zdCBvcmRlcnMgPSB0aGlzLmdldEl0ZW1zKCk7XG4gICAgbGV0IHJlcyA9IDA7XG4gICAgZm9yIChjb25zdCBrZXkgaW4gb3JkZXJzKSB7XG4gICAgICByZXMgKz0gZGF0YS5maW5kKHByb2R1Y3QgPT4gcHJvZHVjdC5pZCA9PT0ga2V5KS5wcmljZSAqIG9yZGVyc1trZXldO1xuICAgIH1cbiAgICByZXR1cm4gcmVzO1xuICB9IFxuXG5cbiAgdmlzdWFsaXplKGRhdGEsIHZpZXcpIHtcbiAgICBjb25zdCBjYXJ0cHJvZHVjdHMgPSB0aGlzLmdldEl0ZW1zKCk7XG4gICAgY29uc3QgcHJvZHVjdHMgPSBkYXRhLnByb2R1Y3RzLmZpbHRlcihwcm9kID0+IE9iamVjdC5rZXlzKGNhcnRwcm9kdWN0cykuaW5jbHVkZXMocHJvZC5pZCkpOyBcbiAgICB2aWV3LmlubmVySFRNTCA9IGA8ZGl2IGNsYXNzPVwibGlzdC1ncm91cFwiPlxuJHtwcm9kdWN0cy5tYXAocHJvZHVjdCA9PlxuICAgIGA8YSBjbGFzcz1cImxpc3QtZ3JvdXAtaXRlbSBsaXN0LWdyb3VwLWl0ZW0tYWN0aW9uIGZsZXgtY29sdW1uIGFsaWduLWl0ZW1zLXN0YXJ0XCI+XG4gICAgICAgIDxkaXYgY2xhc3M9XCJkLWZsZXggdy0xMDAganVzdGlmeS1jb250ZW50LWJldHdlZW5cIj5cbiAgICAgICAgICA8aDUgY2xhc3M9XCJtYi0xXCI+JHtwcm9kdWN0LnByb2R1Y3ROYW1lfTwvaDU+XG4gICAgICAgIDwvZGl2PlxuICAgICAgICA8cCBjbGFzcz1cIm1iLTFcIj4ke2NhcnRwcm9kdWN0c1twcm9kdWN0LmlkXX0gZm9yICR7cHJvZHVjdC5wcmljZX0gZWFjaDwvcD5cbiAgICAgICAgPGhyPlxuICAgICAgICA8YnV0dG9uIGNsYXNzPVwiY2FydGJ0biBidG4gYnRuLW91dGxpbmUtcHJpbWFyeVwiIGlkPVwiJHtwcm9kdWN0LmlkfVwiIHN0eWxlPVwiZmxvYXQ6IGxlZnRcIj5BZGQ8L2J1dHRvbj5cbiAgICAgICAgPGJ1dHRvbiBjbGFzcz1cInJlbW92ZWJ0biBidG4gYnRuLW91dGxpbmUtcHJpbWFyeVwiIGlkPVwiJHtwcm9kdWN0LmlkfVwiPlJlbW92ZTwvYnV0dG9uPiAgIFxuICAgICAgPC9hPmApLmpvaW4oJ1xcbicpfVxuICAgICAgICA8aDM+VG90YWw6ICR7dGhpcy5nZXRQcmljZShkYXRhLnByb2R1Y3RzKX08L2gzPlxuICAgIDwvZGl2PmA7XG4gIH1cblxufVxuIl0sInNvdXJjZVJvb3QiOiIifQ==